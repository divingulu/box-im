{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js!/home/d/github/box-im/im-web/node_modules/eslint-loader/index.js??ref--14-0!/home/d/github/box-im/im-web/src/store/userStore.js","dependencies":[{"path":"/home/d/github/box-im/im-web/src/store/userStore.js","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/babel.config.js","mtime":1727013808912},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js","mtime":1727014166227},{"path":"/home/d/github/box-im/im-web/node_modules/eslint-loader/index.js","mtime":1727014164203}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGh0dHAgZnJvbSAnLi4vYXBpL2h0dHBSZXF1ZXN0LmpzJzsKaW1wb3J0IHsgUlRDX1NUQVRFIH0gZnJvbSAiLi4vYXBpL2VudW1zLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICB1c2VySW5mbzoge30sCiAgICBydGNJbmZvOiB7CiAgICAgIGZyaWVuZDoge30sCiAgICAgIC8vIOWlveWPi+S/oeaBrwogICAgICBtb2RlOiAidmlkZW8iLAogICAgICAvLyDmqKHlvI8gdmlkZW866KeG6aKRIHZvaWNlOuivremfswogICAgICBzdGF0ZTogUlRDX1NUQVRFLkZSRUUgLy8gRlJFRTrnqbrpl7IgIFdBSVRfQ0FMTDrlkbzlj6vmlrnnrYnlvoUgV0FJVF9BQ0NFUFQ6IOiiq+WRvOWPq+aWueetieW+heaOpeWQrCAgQ0hBVElORzrogYrlpKnkuK0gCiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFVzZXJJbmZvKHN0YXRlLCB1c2VySW5mbykgewogICAgICBzdGF0ZS51c2VySW5mbyA9IHVzZXJJbmZvOwogICAgfSwKICAgIHNldFJ0Y0luZm8oc3RhdGUsIHJ0Y0luZm8pIHsKICAgICAgc3RhdGUucnRjSW5mbyA9IHJ0Y0luZm87CiAgICB9LAogICAgc2V0UnRjU3RhdGUoc3RhdGUsIHJ0Y1N0YXRlKSB7CiAgICAgIHN0YXRlLnJ0Y0luZm8uc3RhdGUgPSBydGNTdGF0ZTsKICAgIH0sCiAgICBjbGVhcihzdGF0ZSkgewogICAgICBzdGF0ZS51c2VySW5mbyA9IHt9OwogICAgICBzdGF0ZS5ydGNJbmZvID0gewogICAgICAgIGZyaWVuZDoge30sCiAgICAgICAgbW9kZTogInZpZGVvIiwKICAgICAgICBzdGF0ZTogUlRDX1NUQVRFLkZSRUUKICAgICAgfTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIGxvYWRVc2VyKGNvbnRleHQpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBodHRwKHsKICAgICAgICAgIHVybDogJy91c2VyL3NlbGYnLAogICAgICAgICAgbWV0aG9kOiAnR0VUJwogICAgICAgIH0pLnRoZW4odXNlckluZm8gPT4gewogICAgICAgICAgY29udGV4dC5jb21taXQoInNldFVzZXJJbmZvIiwgdXNlckluZm8pOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKHJlcyA9PiB7CiAgICAgICAgICByZWplY3QocmVzKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["http","RTC_STATE","state","userInfo","rtcInfo","friend","mode","FREE","mutations","setUserInfo","setRtcInfo","setRtcState","rtcState","clear","actions","loadUser","context","Promise","resolve","reject","url","method","then","commit","catch","res"],"sources":["/home/d/github/box-im/im-web/src/store/userStore.js"],"sourcesContent":["import http from '../api/httpRequest.js'\nimport {RTC_STATE} from \"../api/enums.js\"\nexport default {\n\t\n\tstate: {\n\t\tuserInfo: {\n\t\t\t\n\t\t},\n\t\trtcInfo: {\n\t\t\tfriend: {},  // 好友信息\n\t\t\tmode: \"video\", // 模式 video:视频 voice:语音\n\t\t\tstate: \tRTC_STATE.FREE // FREE:空闲  WAIT_CALL:呼叫方等待 WAIT_ACCEPT: 被呼叫方等待接听  CHATING:聊天中 \n\t\t}\n\t},\n\n\tmutations: {\n\t\tsetUserInfo(state, userInfo) {\n\t\t\tstate.userInfo = userInfo\n\t\t},\n\t\tsetRtcInfo(state, rtcInfo ){\n\t\t    state.rtcInfo = rtcInfo;\n\t\t},\n\t\tsetRtcState(state,rtcState){\n\t\t\tstate.rtcInfo.state = rtcState;\n\t\t},\n\t\tclear(state){\n\t\t\tstate.userInfo = {};\n\t\t\tstate.rtcInfo = {\n\t\t\t\tfriend: {},\n\t\t\t\tmode: \"video\",\n\t\t\t\tstate: RTC_STATE.FREE\n\t\t\t};\n\t\t}\n\t},\n\tactions:{\n\t\tloadUser(context){\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\thttp({\n\t\t\t\t\turl: '/user/self',\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t}).then((userInfo) => {\n\t\t\t\t\tcontext.commit(\"setUserInfo\",userInfo);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((res)=>{\n\t\t\t\t\treject(res);\n\t\t\t\t});\n\t\t\t})\n\t\t}\n\t}\n}"],"mappings":"AAAA,OAAOA,IAAI,MAAM,uBAAuB;AACxC,SAAQC,SAAS,QAAO,iBAAiB;AACzC,eAAe;EAEdC,KAAK,EAAE;IACNC,QAAQ,EAAE,CAEV,CAAC;IACDC,OAAO,EAAE;MACRC,MAAM,EAAE,CAAC,CAAC;MAAG;MACbC,IAAI,EAAE,OAAO;MAAE;MACfJ,KAAK,EAAGD,SAAS,CAACM,IAAI,CAAC;IACxB;EACD,CAAC;EAEDC,SAAS,EAAE;IACVC,WAAWA,CAACP,KAAK,EAAEC,QAAQ,EAAE;MAC5BD,KAAK,CAACC,QAAQ,GAAGA,QAAQ;IAC1B,CAAC;IACDO,UAAUA,CAACR,KAAK,EAAEE,OAAO,EAAE;MACvBF,KAAK,CAACE,OAAO,GAAGA,OAAO;IAC3B,CAAC;IACDO,WAAWA,CAACT,KAAK,EAACU,QAAQ,EAAC;MAC1BV,KAAK,CAACE,OAAO,CAACF,KAAK,GAAGU,QAAQ;IAC/B,CAAC;IACDC,KAAKA,CAACX,KAAK,EAAC;MACXA,KAAK,CAACC,QAAQ,GAAG,CAAC,CAAC;MACnBD,KAAK,CAACE,OAAO,GAAG;QACfC,MAAM,EAAE,CAAC,CAAC;QACVC,IAAI,EAAE,OAAO;QACbJ,KAAK,EAAED,SAAS,CAACM;MAClB,CAAC;IACF;EACD,CAAC;EACDO,OAAO,EAAC;IACPC,QAAQA,CAACC,OAAO,EAAC;MAChB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACvCnB,IAAI,CAAC;UACJoB,GAAG,EAAE,YAAY;UACjBC,MAAM,EAAE;QACT,CAAC,CAAC,CAACC,IAAI,CAAEnB,QAAQ,IAAK;UACrBa,OAAO,CAACO,MAAM,CAAC,aAAa,EAACpB,QAAQ,CAAC;UACtCe,OAAO,CAAC,CAAC;QACV,CAAC,CAAC,CAACM,KAAK,CAAEC,GAAG,IAAG;UACfN,MAAM,CAACM,GAAG,CAAC;QACZ,CAAC,CAAC;MACH,CAAC,CAAC;IACH;EACD;AACD,CAAC","ignoreList":[]}]}