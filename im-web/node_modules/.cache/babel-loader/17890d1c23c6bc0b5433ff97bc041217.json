{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js!/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/view/Home.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/d/github/box-im/im-web/src/view/Home.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/babel.config.js","mtime":1727013808912},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js","mtime":1727014166227},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEhlYWRJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL2NvbW1vbi9IZWFkSW1hZ2UudnVlJzsKaW1wb3J0IFNldHRpbmcgZnJvbSAnLi4vY29tcG9uZW50cy9zZXR0aW5nL1NldHRpbmcudnVlJzsKaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvY29tbW9uL1VzZXJJbmZvLnZ1ZSc7CmltcG9ydCBGdWxsSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9jb21tb24vRnVsbEltYWdlLnZ1ZSc7CmltcG9ydCBSdGNQcml2YXRlVmlkZW8gZnJvbSAnLi4vY29tcG9uZW50cy9ydGMvUnRjUHJpdmF0ZVZpZGVvLnZ1ZSc7CmltcG9ydCBSdGNQcml2YXRlQWNjZXB0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9ydGMvUnRjUHJpdmF0ZUFjY2VwdG9yLnZ1ZSc7CmltcG9ydCBSdGNHcm91cFZpZGVvIGZyb20gJy4uL2NvbXBvbmVudHMvcnRjL1J0Y0dyb3VwVmlkZW8udnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRJbWFnZSwKICAgIFNldHRpbmcsCiAgICBVc2VySW5mbywKICAgIEZ1bGxJbWFnZSwKICAgIFJ0Y1ByaXZhdGVWaWRlbywKICAgIFJ0Y1ByaXZhdGVBY2NlcHRvciwKICAgIFJ0Y0dyb3VwVmlkZW8KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93U2V0dGluZ0RpYWxvZzogZmFsc2UsCiAgICAgIGxhc3RQbGF5QXVkaW9UaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIDEwMDAKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0KCkgewogICAgICB0aGlzLiRldmVudEJ1cy4kb24oJ29wZW5Qcml2YXRlVmlkZW8nLCByY3RJbmZvID0+IHsKICAgICAgICAvLyDov5vlhaXljZXkurrop4bpopHpgJror50KICAgICAgICB0aGlzLiRyZWZzLnJ0Y1ByaXZhdGVWaWRlby5vcGVuKHJjdEluZm8pOwogICAgICB9KTsKICAgICAgdGhpcy4kZXZlbnRCdXMuJG9uKCdvcGVuR3JvdXBWaWRlbycsIHJjdEluZm8gPT4gewogICAgICAgIC8vIOi/m+WFpeWkmuS6uuinhumikemAmuivnQogICAgICAgIHRoaXMuJHJlZnMucnRjR3JvdXBWaWRlby5vcGVuKHJjdEluZm8pOwogICAgICB9KTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImxvYWQiKS50aGVuKCgpID0+IHsKICAgICAgICAvLyB3c+WIneWni+WMlgogICAgICAgIHRoaXMuJHdzQXBpLmNvbm5lY3QocHJvY2Vzcy5lbnYuVlVFX0FQUF9XU19VUkwsIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFjY2Vzc1Rva2VuIikpOwogICAgICAgIHRoaXMuJHdzQXBpLm9uQ29ubmVjdCgoKSA9PiB7CiAgICAgICAgICAvLyDliqDovb3nprvnur/mtojmga8KICAgICAgICAgIHRoaXMucHVsbFByaXZhdGVPZmZsaW5lTWVzc2FnZSh0aGlzLiRzdG9yZS5zdGF0ZS5jaGF0U3RvcmUucHJpdmF0ZU1zZ01heElkKTsKICAgICAgICAgIHRoaXMucHVsbEdyb3VwT2ZmbGluZU1lc3NhZ2UodGhpcy4kc3RvcmUuc3RhdGUuY2hhdFN0b3JlLmdyb3VwTXNnTWF4SWQpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHdzQXBpLm9uTWVzc2FnZSgoY21kLCBtc2dJbmZvKSA9PiB7CiAgICAgICAgICBpZiAoY21kID09IDIpIHsKICAgICAgICAgICAgLy8g5YWz6Zetd3MKICAgICAgICAgICAgdGhpcy4kd3NBcGkuY2xvc2UoMzAwMCk7CiAgICAgICAgICAgIC8vIOW8guWcsOeZu+W9le+8jOW8uuWItuS4i+e6vwogICAgICAgICAgICB0aGlzLiRhbGVydCgi5oKo5bey5Zyo5YW25LuW5Zyw5pa555m76ZmG77yM5bCG6KKr5by65Yi25LiL57q/IiwgIuW8uuWItuS4i+e6v+mAmuefpSIsIHsKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gIi8iOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGNtZCA9PSAzKSB7CiAgICAgICAgICAgIC8vIOaPkuWFpeengeiBiua2iOaBrwogICAgICAgICAgICB0aGlzLmhhbmRsZVByaXZhdGVNZXNzYWdlKG1zZ0luZm8pOwogICAgICAgICAgfSBlbHNlIGlmIChjbWQgPT0gNCkgewogICAgICAgICAgICAvLyDmj5LlhaXnvqTogYrmtojmga8KICAgICAgICAgICAgdGhpcy5oYW5kbGVHcm91cE1lc3NhZ2UobXNnSW5mbyk7CiAgICAgICAgICB9IGVsc2UgaWYgKGNtZCA9PSA1KSB7CiAgICAgICAgICAgIC8vIOWkhOeQhuezu+e7n+a2iOaBrwogICAgICAgICAgICB0aGlzLmhhbmRsZVN5c3RlbU1lc3NhZ2UobXNnSW5mbyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kd3NBcGkub25DbG9zZShlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgaWYgKGUuY29kZSAhPSAzMDAwKSB7CiAgICAgICAgICAgIC8vIOaWree6v+mHjei/ngogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLov57mjqXmlq3lvIDvvIzmraPlnKjlsJ3or5Xph43mlrDov57mjqUuLi4iKTsKICAgICAgICAgICAgdGhpcy4kd3NBcGkucmVjb25uZWN0KHByb2Nlc3MuZW52LlZVRV9BUFBfV1NfVVJMLCBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJhY2Nlc3NUb2tlbiIpKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coIuWIneWni+WMluWksei0pSIsIGUpOwogICAgICB9KTsKICAgIH0sCiAgICBwdWxsUHJpdmF0ZU9mZmxpbmVNZXNzYWdlKG1pbklkKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgibG9hZGluZ1ByaXZhdGVNc2ciLCB0cnVlKTsKICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgdXJsOiAiL21lc3NhZ2UvcHJpdmF0ZS9wdWxsT2ZmbGluZU1lc3NhZ2U/bWluSWQ9IiArIG1pbklkLAogICAgICAgIG1ldGhvZDogJ0dFVCcKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgibG9hZGluZ1ByaXZhdGVNc2ciLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHB1bGxHcm91cE9mZmxpbmVNZXNzYWdlKG1pbklkKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgibG9hZGluZ0dyb3VwTXNnIiwgdHJ1ZSk7CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogIi9tZXNzYWdlL2dyb3VwL3B1bGxPZmZsaW5lTWVzc2FnZT9taW5JZD0iICsgbWluSWQsCiAgICAgICAgbWV0aG9kOiAnR0VUJwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJsb2FkaW5nR3JvdXBNc2ciLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVByaXZhdGVNZXNzYWdlKG1zZykgewogICAgICAvLyDmtojmga/liqDovb3moIflv5cKICAgICAgaWYgKG1zZy50eXBlID09IHRoaXMuJGVudW1zLk1FU1NBR0VfVFlQRS5MT0FESU5HKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJsb2FkaW5nUHJpdmF0ZU1zZyIsIEpTT04ucGFyc2UobXNnLmNvbnRlbnQpKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8g5raI5oGv5bey6K+75aSE55CG77yM5riF56m65bey6K+75pWw6YePCiAgICAgIGlmIChtc2cudHlwZSA9PSB0aGlzLiRlbnVtcy5NRVNTQUdFX1RZUEUuUkVBREVEKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJyZXNldFVucmVhZENvdW50IiwgewogICAgICAgICAgdHlwZTogJ1BSSVZBVEUnLAogICAgICAgICAgdGFyZ2V0SWQ6IG1zZy5yZWN2SWQKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8g5raI5oGv5Zue5omn5aSE55CGLOaUuea2iOaBr+eKtuaAgeS4uuW3suivuwogICAgICBpZiAobXNnLnR5cGUgPT0gdGhpcy4kZW51bXMuTUVTU0FHRV9UWVBFLlJFQ0VJUFQpIHsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInJlYWRlZE1lc3NhZ2UiLCB7CiAgICAgICAgICBmcmllbmRJZDogbXNnLnNlbmRJZAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyDmoIforrDov5nmnaHmtojmga/mmK/kuI3mmK/oh6rlt7Hlj5HnmoQKICAgICAgbXNnLnNlbGZTZW5kID0gbXNnLnNlbmRJZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyU3RvcmUudXNlckluZm8uaWQ7CiAgICAgIC8vIOWNleS6undlYnJ0YyDkv6Hku6QKICAgICAgaWYgKHRoaXMuJG1zZ1R5cGUuaXNSdGNQcml2YXRlKG1zZy50eXBlKSkgewogICAgICAgIHRoaXMuJHJlZnMucnRjUHJpdmF0ZVZpZGVvLm9uUlRDTWVzc2FnZShtc2cpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyDlpb3lj4tpZAogICAgICBsZXQgZnJpZW5kSWQgPSBtc2cuc2VsZlNlbmQgPyBtc2cucmVjdklkIDogbXNnLnNlbmRJZDsKICAgICAgdGhpcy5sb2FkRnJpZW5kSW5mbyhmcmllbmRJZCkudGhlbihmcmllbmQgPT4gewogICAgICAgIHRoaXMuaW5zZXJ0UHJpdmF0ZU1lc3NhZ2UoZnJpZW5kLCBtc2cpOwogICAgICB9KTsKICAgIH0sCiAgICBpbnNlcnRQcml2YXRlTWVzc2FnZShmcmllbmQsIG1zZykgewogICAgICBsZXQgY2hhdEluZm8gPSB7CiAgICAgICAgdHlwZTogJ1BSSVZBVEUnLAogICAgICAgIHRhcmdldElkOiBmcmllbmQuaWQsCiAgICAgICAgc2hvd05hbWU6IGZyaWVuZC5uaWNrTmFtZSwKICAgICAgICBoZWFkSW1hZ2U6IGZyaWVuZC5oZWFkSW1hZ2UKICAgICAgfTsKICAgICAgLy8g5omT5byA5Lya6K+dCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgib3BlbkNoYXQiLCBjaGF0SW5mbyk7CiAgICAgIC8vIOaPkuWFpea2iOaBrwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2cpOwogICAgICAvLyDmkq3mlL7mj5DnpLrpn7MKICAgICAgaWYgKCFtc2cuc2VsZlNlbmQgJiYgdGhpcy4kbXNnVHlwZS5pc05vcm1hbChtc2cudHlwZSkgJiYgbXNnLnN0YXR1cyAhPSB0aGlzLiRlbnVtcy5NRVNTQUdFX1NUQVRVUy5SRUFERUQpIHsKICAgICAgICB0aGlzLnBsYXlBdWRpb1RpcCgpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlR3JvdXBNZXNzYWdlKG1zZykgewogICAgICAvLyDmtojmga/liqDovb3moIflv5cKICAgICAgaWYgKG1zZy50eXBlID09IHRoaXMuJGVudW1zLk1FU1NBR0VfVFlQRS5MT0FESU5HKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJsb2FkaW5nR3JvdXBNc2ciLCBKU09OLnBhcnNlKG1zZy5jb250ZW50KSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIOa2iOaBr+W3suivu+WkhOeQhgogICAgICBpZiAobXNnLnR5cGUgPT0gdGhpcy4kZW51bXMuTUVTU0FHRV9UWVBFLlJFQURFRCkgewogICAgICAgIC8vIOaIkeW3suivu+WvueaWueeahOa2iOaBr++8jOa4heepuuW3suivu+aVsOmHjwogICAgICAgIGxldCBjaGF0SW5mbyA9IHsKICAgICAgICAgIHR5cGU6ICdHUk9VUCcsCiAgICAgICAgICB0YXJnZXRJZDogbXNnLmdyb3VwSWQKICAgICAgICB9OwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVzZXRVbnJlYWRDb3VudCIsIGNoYXRJbmZvKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy8g5raI5oGv5Zue5omn5aSE55CGCiAgICAgIGlmIChtc2cudHlwZSA9PSB0aGlzLiRlbnVtcy5NRVNTQUdFX1RZUEUuUkVDRUlQVCkgewogICAgICAgIC8vIOabtOaWsOa2iOaBr+W3suivu+S6uuaVsAogICAgICAgIGxldCBtc2dJbmZvID0gewogICAgICAgICAgaWQ6IG1zZy5pZCwKICAgICAgICAgIGdyb3VwSWQ6IG1zZy5ncm91cElkLAogICAgICAgICAgcmVhZGVkQ291bnQ6IG1zZy5yZWFkZWRDb3VudCwKICAgICAgICAgIHJlY2VpcHRPazogbXNnLnJlY2VpcHRPawogICAgICAgIH07CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVNZXNzYWdlIiwgbXNnSW5mbyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIOagh+iusOi/meadoea2iOaBr+aYr+S4jeaYr+iHquW3seWPkeeahAogICAgICBtc2cuc2VsZlNlbmQgPSBtc2cuc2VuZElkID09IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZDsKICAgICAgLy8g576k6KeG6aKR5L+h5LukCiAgICAgIGlmICh0aGlzLiRtc2dUeXBlLmlzUnRjR3JvdXAobXNnLnR5cGUpKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5ydGNHcm91cFZpZGVvLm9uUlRDTWVzc2FnZShtc2cpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmxvYWRHcm91cEluZm8obXNnLmdyb3VwSWQpLnRoZW4oZ3JvdXAgPT4gewogICAgICAgIC8vIOaPkuWFpee+pOiBiua2iOaBrwogICAgICAgIHRoaXMuaW5zZXJ0R3JvdXBNZXNzYWdlKGdyb3VwLCBtc2cpOwogICAgICB9KTsKICAgIH0sCiAgICBpbnNlcnRHcm91cE1lc3NhZ2UoZ3JvdXAsIG1zZykgewogICAgICBsZXQgY2hhdEluZm8gPSB7CiAgICAgICAgdHlwZTogJ0dST1VQJywKICAgICAgICB0YXJnZXRJZDogZ3JvdXAuaWQsCiAgICAgICAgc2hvd05hbWU6IGdyb3VwLnNob3dHcm91cE5hbWUsCiAgICAgICAgaGVhZEltYWdlOiBncm91cC5oZWFkSW1hZ2VUaHVtYgogICAgICB9OwogICAgICAvLyDmiZPlvIDkvJror50KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJvcGVuQ2hhdCIsIGNoYXRJbmZvKTsKICAgICAgLy8g5o+S5YWl5raI5oGvCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiaW5zZXJ0TWVzc2FnZSIsIG1zZyk7CiAgICAgIC8vIOaSreaUvuaPkOekuumfswogICAgICBpZiAoIW1zZy5zZWxmU2VuZCAmJiBtc2cudHlwZSA8PSB0aGlzLiRlbnVtcy5NRVNTQUdFX1RZUEUuVklERU8gJiYgbXNnLnN0YXR1cyAhPSB0aGlzLiRlbnVtcy5NRVNTQUdFX1NUQVRVUy5SRUFERUQpIHsKICAgICAgICB0aGlzLnBsYXlBdWRpb1RpcCgpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlU3lzdGVtTWVzc2FnZShtc2cpIHsKICAgICAgLy8g55So5oi36KKr5bCB56aBCgogICAgICBpZiAobXNnLnR5cGUgPT0gdGhpcy4kZW51bXMuTUVTU0FHRV9UWVBFLlVTRVJfQkFOTkVEKSB7CiAgICAgICAgdGhpcy4kd3NBcGkuY2xvc2UoMzAwMCk7CiAgICAgICAgdGhpcy4kYWxlcnQoIuaCqOeahOi0puWPt+W3suiiq+euoeeQhuWRmOWwgeemgSzljp/lm6A6IiArIG1zZy5jb250ZW50LCAi6LSm5Y+36KKr5bCB56aBIiwgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7CiAgICAgICAgICAgIHRoaXMub25FeGl0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgb25FeGl0KCkgewogICAgICB0aGlzLiR3c0FwaS5jbG9zZSgzMDAwKTsKICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgiYWNjZXNzVG9rZW4iKTsKICAgICAgbG9jYXRpb24uaHJlZiA9ICIvIjsKICAgIH0sCiAgICBwbGF5QXVkaW9UaXAoKSB7CiAgICAgIC8vIOemu+e6v+a2iOaBr+S4jeaSreaUvumTg+WjsAogICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5pc0xvYWRpbmcoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyDpmLLmraLov4fkuo7lr4bpm4bmkq3mlL4KICAgICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdGhpcy5sYXN0UGxheUF1ZGlvVGltZSA+IDEwMDApIHsKICAgICAgICB0aGlzLmxhc3RQbGF5QXVkaW9UaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgbGV0IGF1ZGlvID0gbmV3IEF1ZGlvKCk7CiAgICAgICAgbGV0IHVybCA9IHJlcXVpcmUoYEAvYXNzZXRzL2F1ZGlvL3RpcC53YXZgKTsKICAgICAgICBhdWRpby5zcmMgPSB1cmw7CiAgICAgICAgYXVkaW8ucGxheSgpOwogICAgICB9CiAgICB9LAogICAgc2hvd1NldHRpbmcoKSB7CiAgICAgIHRoaXMuc2hvd1NldHRpbmdEaWFsb2cgPSB0cnVlOwogICAgfSwKICAgIGNsb3NlU2V0dGluZygpIHsKICAgICAgdGhpcy5zaG93U2V0dGluZ0RpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIGxvYWRGcmllbmRJbmZvKGlkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgbGV0IGZyaWVuZCA9IHRoaXMuJHN0b3JlLnN0YXRlLmZyaWVuZFN0b3JlLmZyaWVuZHMuZmluZChmID0+IGYuaWQgPT0gaWQpOwogICAgICAgIGlmIChmcmllbmQpIHsKICAgICAgICAgIHJlc29sdmUoZnJpZW5kKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICAgIHVybDogYC9mcmllbmQvZmluZC8ke2lkfWAsCiAgICAgICAgICAgIG1ldGhvZDogJ2dldCcKICAgICAgICAgIH0pLnRoZW4oZnJpZW5kID0+IHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJhZGRGcmllbmQiLCBmcmllbmQpOwogICAgICAgICAgICByZXNvbHZlKGZyaWVuZCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRHcm91cEluZm8oaWQpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLiRzdG9yZS5zdGF0ZS5ncm91cFN0b3JlLmdyb3Vwcy5maW5kKGcgPT4gZy5pZCA9PSBpZCk7CiAgICAgICAgaWYgKGdyb3VwKSB7CiAgICAgICAgICByZXNvbHZlKGdyb3VwKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kaHR0cCh7CiAgICAgICAgICAgIHVybDogYC9ncm91cC9maW5kLyR7aWR9YCwKICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JwogICAgICAgICAgfSkudGhlbihncm91cCA9PiB7CiAgICAgICAgICAgIHJlc29sdmUoZ3JvdXApOwogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImFkZEdyb3VwIiwgZ3JvdXApOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICB1aVN0b3JlKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudWlTdG9yZTsKICAgIH0sCiAgICB1bnJlYWRDb3VudCgpIHsKICAgICAgbGV0IHVucmVhZENvdW50ID0gMDsKICAgICAgbGV0IGNoYXRzID0gdGhpcy4kc3RvcmUuc3RhdGUuY2hhdFN0b3JlLmNoYXRzOwogICAgICBjaGF0cy5mb3JFYWNoKGNoYXQgPT4gewogICAgICAgIGlmICghY2hhdC5kZWxldGUpIHsKICAgICAgICAgIHVucmVhZENvdW50ICs9IGNoYXQudW5yZWFkQ291bnQ7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHVucmVhZENvdW50OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHVucmVhZENvdW50OiB7CiAgICAgIGhhbmRsZXIobmV3Q291bnQsIG9sZENvdW50KSB7CiAgICAgICAgbGV0IHRpcCA9IG5ld0NvdW50ID4gMCA/IGAke25ld0NvdW50feadoeacquivu2AgOiAiIjsKICAgICAgICB0aGlzLiRlbG0uc2V0VGl0bGVUaXAodGlwKTsKICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICB1bm1vdW50ZWQoKSB7CiAgICB0aGlzLiR3c0FwaS5jbG9zZSgpOwogIH0KfTs="},{"version":3,"names":["HeadImage","Setting","UserInfo","FullImage","RtcPrivateVideo","RtcPrivateAcceptor","RtcGroupVideo","components","data","showSettingDialog","lastPlayAudioTime","Date","getTime","methods","init","$eventBus","$on","rctInfo","$refs","rtcPrivateVideo","open","rtcGroupVideo","$store","dispatch","then","$wsApi","connect","process","env","VUE_APP_WS_URL","sessionStorage","getItem","onConnect","pullPrivateOfflineMessage","state","chatStore","privateMsgMaxId","pullGroupOfflineMessage","groupMsgMaxId","onMessage","cmd","msgInfo","close","$alert","confirmButtonText","callback","action","location","href","handlePrivateMessage","handleGroupMessage","handleSystemMessage","onClose","e","console","log","code","$message","error","reconnect","catch","minId","commit","$http","url","method","msg","type","$enums","MESSAGE_TYPE","LOADING","JSON","parse","content","READED","targetId","recvId","RECEIPT","friendId","sendId","selfSend","userStore","userInfo","id","$msgType","isRtcPrivate","onRTCMessage","loadFriendInfo","friend","insertPrivateMessage","chatInfo","showName","nickName","headImage","isNormal","status","MESSAGE_STATUS","playAudioTip","groupId","readedCount","receiptOk","isRtcGroup","$nextTick","loadGroupInfo","group","insertGroupMessage","showGroupName","headImageThumb","VIDEO","USER_BANNED","onExit","removeItem","getters","isLoading","audio","Audio","require","src","play","showSetting","closeSetting","Promise","resolve","reject","friendStore","friends","find","f","groupStore","groups","g","computed","uiStore","unreadCount","chats","forEach","chat","delete","watch","handler","newCount","oldCount","tip","$elm","setTitleTip","immediate","mounted","unmounted"],"sources":["src/view/Home.vue"],"sourcesContent":["<template>\n\t<el-container class=\"home-page\">\n\t\t<el-aside width=\"80px\" class=\"navi-bar\">\n\t\t\t<div class=\"user-head-image\">\n\t\t\t\t<head-image :name=\"$store.state.userStore.userInfo.nickName\"\n\t\t\t\t\t:url=\"$store.state.userStore.userInfo.headImageThumb\" :size=\"60\"\n\t\t\t\t\t@click.native=\"showSettingDialog = true\">\n\t\t\t\t</head-image>\n\t\t\t</div>\n\t\t\t<el-menu background-color=\"#E8F2FF\" style=\"margin-top: 25px;\">\n\t\t\t\t<el-menu-item title=\"聊天\">\n\t\t\t\t\t<router-link class=\"link\" v-bind:to=\"'/home/chat'\">\n\t\t\t\t\t\t<span class=\"icon iconfont icon-chat\"></span>\n\t\t\t\t\t\t<div v-show=\"unreadCount > 0\" class=\"unread-text\">{{ unreadCount }}</div>\n\t\t\t\t\t</router-link>\n\t\t\t\t</el-menu-item>\n\t\t\t\t<el-menu-item title=\"好友\">\n\t\t\t\t\t<router-link class=\"link\" v-bind:to=\"'/home/friend'\">\n\t\t\t\t\t\t<span class=\"icon iconfont icon-friend\"></span>\n\t\t\t\t\t</router-link>\n\t\t\t\t</el-menu-item>\n\t\t\t\t<el-menu-item title=\"群聊\">\n\t\t\t\t\t<router-link class=\"link\" v-bind:to=\"'/home/group'\">\n\t\t\t\t\t\t<span class=\"icon iconfont icon-group\"></span>\n\t\t\t\t\t</router-link>\n\t\t\t\t</el-menu-item>\n\t\t\t\t<el-menu-item title=\"设置\" @click=\"showSetting()\">\n\t\t\t\t\t<span class=\"icon iconfont icon-setting\"></span>\n\t\t\t\t</el-menu-item>\n\t\t\t</el-menu>\n\t\t\t<div class=\"exit-box\" @click=\"onExit()\" title=\"退出\">\n\t\t\t\t<span class=\"icon iconfont icon-exit\"></span>\n\t\t\t</div>\n\t\t</el-aside>\n\t\t<el-main class=\"content-box\">\n\t\t\t<router-view></router-view>\n\t\t</el-main>\n\t\t<setting :visible=\"showSettingDialog\" @close=\"closeSetting()\"></setting>\n\t\t<user-info v-show=\"uiStore.userInfo.show\" :pos=\"uiStore.userInfo.pos\" :user=\"uiStore.userInfo.user\"\n\t\t\t@close=\"$store.commit('closeUserInfoBox')\"></user-info>\n\t\t<full-image :visible=\"uiStore.fullImage.show\" :url=\"uiStore.fullImage.url\"\n\t\t\t@close=\"$store.commit('closeFullImageBox')\"></full-image>\n\t\t<rtc-private-video ref=\"rtcPrivateVideo\"></rtc-private-video>\n\t\t<rtc-group-video ref=\"rtcGroupVideo\"></rtc-group-video>\n\t</el-container>\n</template>\n\n<script>\n\timport HeadImage from '../components/common/HeadImage.vue';\n\timport Setting from '../components/setting/Setting.vue';\n\timport UserInfo from '../components/common/UserInfo.vue';\n\timport FullImage from '../components/common/FullImage.vue';\n\timport RtcPrivateVideo from '../components/rtc/RtcPrivateVideo.vue';\n\timport RtcPrivateAcceptor from '../components/rtc/RtcPrivateAcceptor.vue';\n\timport RtcGroupVideo from '../components/rtc/RtcGroupVideo.vue';\n\n\texport default {\n\t\tcomponents: {\n\t\t\tHeadImage,\n\t\t\tSetting,\n\t\t\tUserInfo,\n\t\t\tFullImage,\n\t\t\tRtcPrivateVideo,\n\t\t\tRtcPrivateAcceptor,\n\t\t\tRtcGroupVideo\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshowSettingDialog: false,\n\t\t\t\tlastPlayAudioTime: new Date().getTime() - 1000\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tinit() {\n\t\t\t\tthis.$eventBus.$on('openPrivateVideo', (rctInfo) => {\n\t\t\t\t\t// 进入单人视频通话\n\t\t\t\t\tthis.$refs.rtcPrivateVideo.open(rctInfo);\n\t\t\t\t});\n\t\t\t\tthis.$eventBus.$on('openGroupVideo', (rctInfo) => {\n\t\t\t\t\t// 进入多人视频通话\n\t\t\t\t\tthis.$refs.rtcGroupVideo.open(rctInfo);\n\t\t\t\t});\n\n\t\t\t\tthis.$store.dispatch(\"load\").then(() => {\n\t\t\t\t\t// ws初始化\n\t\t\t\t\tthis.$wsApi.connect(process.env.VUE_APP_WS_URL, sessionStorage.getItem(\"accessToken\"));\n\t\t\t\t\tthis.$wsApi.onConnect(() => {\n\t\t\t\t\t\t// 加载离线消息\n\t\t\t\t\t\tthis.pullPrivateOfflineMessage(this.$store.state.chatStore.privateMsgMaxId);\n\t\t\t\t\t\tthis.pullGroupOfflineMessage(this.$store.state.chatStore.groupMsgMaxId);\n\t\t\t\t\t});\n\t\t\t\t\tthis.$wsApi.onMessage((cmd, msgInfo) => {\n\t\t\t\t\t\tif (cmd == 2) {\n\t\t\t\t\t\t\t// 关闭ws\n\t\t\t\t\t\t\tthis.$wsApi.close(3000)\n\t\t\t\t\t\t\t// 异地登录，强制下线\n\t\t\t\t\t\t\tthis.$alert(\"您已在其他地方登陆，将被强制下线\", \"强制下线通知\", {\n\t\t\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\t\t\tcallback: action => {\n\t\t\t\t\t\t\t\t\tlocation.href = \"/\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t} else if (cmd == 3) {\n\t\t\t\t\t\t\t// 插入私聊消息\n\t\t\t\t\t\t\tthis.handlePrivateMessage(msgInfo);\n\t\t\t\t\t\t} else if (cmd == 4) {\n\t\t\t\t\t\t\t// 插入群聊消息\n\t\t\t\t\t\t\tthis.handleGroupMessage(msgInfo);\n\t\t\t\t\t\t} else if (cmd == 5){\n\t\t\t\t\t\t\t// 处理系统消息\n\t\t\t\t\t\t\tthis.handleSystemMessage(msgInfo);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.$wsApi.onClose((e) => {\n\t\t\t\t\t\tconsole.log(e);\n\t\t\t\t\t\tif (e.code != 3000) {\n\t\t\t\t\t\t\t// 断线重连\n\t\t\t\t\t\t\tthis.$message.error(\"连接断开，正在尝试重新连接...\");\n\t\t\t\t\t\t\tthis.$wsApi.reconnect(process.env.VUE_APP_WS_URL, sessionStorage.getItem(\n\t\t\t\t\t\t\t\t\"accessToken\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}).catch((e) => {\n\t\t\t\t\tconsole.log(\"初始化失败\", e);\n\t\t\t\t})\n\t\t\t},\n\t\t\tpullPrivateOfflineMessage(minId) {\n\t\t\t\tthis.$store.commit(\"loadingPrivateMsg\", true)\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/message/private/pullOfflineMessage?minId=\" + minId,\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$store.commit(\"loadingPrivateMsg\", false)\n\t\t\t\t})\n\t\t\t},\n\t\t\tpullGroupOfflineMessage(minId) {\n\t\t\t\tthis.$store.commit(\"loadingGroupMsg\", true)\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/message/group/pullOfflineMessage?minId=\" + minId,\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$store.commit(\"loadingGroupMsg\", false)\n\t\t\t\t})\n\t\t\t},\n\t\t\thandlePrivateMessage(msg) {\n\t\t\t\t// 消息加载标志\n\t\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.LOADING) {\n\t\t\t\t\tthis.$store.commit(\"loadingPrivateMsg\", JSON.parse(msg.content))\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 消息已读处理，清空已读数量\n\t\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.READED) {\n\t\t\t\t\tthis.$store.commit(\"resetUnreadCount\", {\n\t\t\t\t\t\ttype: 'PRIVATE',\n\t\t\t\t\t\ttargetId: msg.recvId\n\t\t\t\t\t})\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 消息回执处理,改消息状态为已读\n\t\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.RECEIPT) {\n\t\t\t\t\tthis.$store.commit(\"readedMessage\", {\n\t\t\t\t\t\tfriendId: msg.sendId\n\t\t\t\t\t})\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 标记这条消息是不是自己发的\n\t\t\t\tmsg.selfSend = msg.sendId == this.$store.state.userStore.userInfo.id;\n\t\t\t\t// 单人webrtc 信令\n\t\t\t\tif (this.$msgType.isRtcPrivate(msg.type)) {\n\t\t\t\t\tthis.$refs.rtcPrivateVideo.onRTCMessage(msg)\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 好友id\n\t\t\t\tlet friendId = msg.selfSend ? msg.recvId : msg.sendId;\n\t\t\t\tthis.loadFriendInfo(friendId).then((friend) => {\n\t\t\t\t\tthis.insertPrivateMessage(friend, msg);\n\t\t\t\t})\n\t\t\t},\n\t\t\tinsertPrivateMessage(friend, msg) {\n\n\t\t\t\tlet chatInfo = {\n\t\t\t\t\ttype: 'PRIVATE',\n\t\t\t\t\ttargetId: friend.id,\n\t\t\t\t\tshowName: friend.nickName,\n\t\t\t\t\theadImage: friend.headImage\n\t\t\t\t};\n\t\t\t\t// 打开会话\n\t\t\t\tthis.$store.commit(\"openChat\", chatInfo);\n\t\t\t\t// 插入消息\n\t\t\t\tthis.$store.commit(\"insertMessage\", msg);\n\t\t\t\t// 播放提示音\n\t\t\t\tif (!msg.selfSend && this.$msgType.isNormal(msg.type) &&\n\t\t\t\t\tmsg.status != this.$enums.MESSAGE_STATUS.READED) {\n\t\t\t\t\tthis.playAudioTip();\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleGroupMessage(msg) {\n\t\t\t\t// 消息加载标志\n\t\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.LOADING) {\n\t\t\t\t\tthis.$store.commit(\"loadingGroupMsg\", JSON.parse(msg.content))\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 消息已读处理\n\t\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.READED) {\n\t\t\t\t\t// 我已读对方的消息，清空已读数量\n\t\t\t\t\tlet chatInfo = {\n\t\t\t\t\t\ttype: 'GROUP',\n\t\t\t\t\t\ttargetId: msg.groupId\n\t\t\t\t\t}\n\t\t\t\t\tthis.$store.commit(\"resetUnreadCount\", chatInfo)\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 消息回执处理\n\t\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.RECEIPT) {\n\t\t\t\t\t// 更新消息已读人数\n\t\t\t\t\tlet msgInfo = {\n\t\t\t\t\t\tid: msg.id,\n\t\t\t\t\t\tgroupId: msg.groupId,\n\t\t\t\t\t\treadedCount: msg.readedCount,\n\t\t\t\t\t\treceiptOk: msg.receiptOk\n\t\t\t\t\t};\n\t\t\t\t\tthis.$store.commit(\"updateMessage\", msgInfo)\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 标记这条消息是不是自己发的\n\t\t\t\tmsg.selfSend = msg.sendId == this.$store.state.userStore.userInfo.id;\n\t\t\t\t// 群视频信令\n\t\t\t\tif (this.$msgType.isRtcGroup(msg.type)) {\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.$refs.rtcGroupVideo.onRTCMessage(msg);\n\t\t\t\t\t})\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.loadGroupInfo(msg.groupId).then((group) => {\n\t\t\t\t\t// 插入群聊消息\n\t\t\t\t\tthis.insertGroupMessage(group, msg);\n\t\t\t\t})\n\t\t\t},\n\t\t\tinsertGroupMessage(group, msg) {\n\n\t\t\t\tlet chatInfo = {\n\t\t\t\t\ttype: 'GROUP',\n\t\t\t\t\ttargetId: group.id,\n\t\t\t\t\tshowName: group.showGroupName,\n\t\t\t\t\theadImage: group.headImageThumb\n\t\t\t\t};\n\t\t\t\t// 打开会话\n\t\t\t\tthis.$store.commit(\"openChat\", chatInfo);\n\t\t\t\t// 插入消息\n\t\t\t\tthis.$store.commit(\"insertMessage\", msg);\n\t\t\t\t// 播放提示音\n\t\t\t\tif (!msg.selfSend && msg.type <= this.$enums.MESSAGE_TYPE.VIDEO &&\n\t\t\t\t\tmsg.status != this.$enums.MESSAGE_STATUS.READED) {\n\t\t\t\t\tthis.playAudioTip();\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleSystemMessage(msg){\n\t\t\t\t// 用户被封禁\n\t\t\t\t\n\t\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.USER_BANNED) {\n\t\t\t\t\tthis.$wsApi.close(3000);\n\t\t\t\t\tthis.$alert(\"您的账号已被管理员封禁,原因:\"+ msg.content, \"账号被封禁\", {\n\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\tcallback: action => {\n\t\t\t\t\t\t\tthis.onExit();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonExit() {\n\t\t\t\tthis.$wsApi.close(3000);\n\t\t\t\tsessionStorage.removeItem(\"accessToken\");\n\t\t\t\tlocation.href = \"/\";\n\t\t\t},\n\t\t\tplayAudioTip() {\n\t\t\t\t// 离线消息不播放铃声\n\t\t\t\tif(this.$store.getters.isLoading()){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 防止过于密集播放\n\t\t\t\tif (new Date().getTime() - this.lastPlayAudioTime > 1000) {\n\t\t\t\t\tthis.lastPlayAudioTime = new Date().getTime();\n\t\t\t\t\tlet audio = new Audio();\n\t\t\t\t\tlet url = require(`@/assets/audio/tip.wav`);\n\t\t\t\t\taudio.src = url;\n\t\t\t\t\taudio.play();\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tshowSetting() {\n\t\t\t\tthis.showSettingDialog = true;\n\t\t\t},\n\t\t\tcloseSetting() {\n\t\t\t\tthis.showSettingDialog = false;\n\t\t\t},\n\t\t\tloadFriendInfo(id) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet friend = this.$store.state.friendStore.friends.find((f) => f.id == id);\n\t\t\t\t\tif (friend) {\n\t\t\t\t\t\tresolve(friend);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: `/friend/find/${id}`,\n\t\t\t\t\t\t\tmethod: 'get'\n\t\t\t\t\t\t}).then((friend) => {\n\t\t\t\t\t\t\tthis.$store.commit(\"addFriend\", friend);\n\t\t\t\t\t\t\tresolve(friend)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tloadGroupInfo(id) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet group = this.$store.state.groupStore.groups.find((g) => g.id == id);\n\t\t\t\t\tif (group) {\n\t\t\t\t\t\tresolve(group);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: `/group/find/${id}`,\n\t\t\t\t\t\t\tmethod: 'get'\n\t\t\t\t\t\t}).then((group) => {\n\t\t\t\t\t\t\tresolve(group)\n\t\t\t\t\t\t\tthis.$store.commit(\"addGroup\", group);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tuiStore() {\n\t\t\t\treturn this.$store.state.uiStore;\n\t\t\t},\n\t\t\tunreadCount() {\n\t\t\t\tlet unreadCount = 0;\n\t\t\t\tlet chats = this.$store.state.chatStore.chats;\n\t\t\t\tchats.forEach((chat) => {\n\t\t\t\t\tif(!chat.delete){\n\t\t\t\t\t\tunreadCount += chat.unreadCount\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn unreadCount;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tunreadCount: {\n\t\t\t\thandler(newCount, oldCount) {\n\t\t\t\t\tlet tip = newCount > 0 ? `${newCount}条未读` : \"\";\n\t\t\t\t\tthis.$elm.setTitleTip(tip);\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.init();\n\t\t},\n\t\tunmounted() {\n\t\t\tthis.$wsApi.close();\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t.navi-bar {\n\t\tbackground: #E8F2FF;\n\t\tpadding: 10px;\n\t\tpadding-top: 20px;\n\t\tborder-right: #53a0e79c solid 1px;\n\t\t\n\t\t.el-menu {\n\t\t\tborder: none;\n\t\t\tflex: 1;\n\n\t\t\t.el-menu-item {\n\t\t\t\tmargin: 25px 0;\n\t\t\t\tbackground-color: #E8F2FF !important;\n\t\t\t\tpadding: 0 !important;\n\t\t\t\ttext-align: center;\n\n\t\t\t\t.link {\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\t\n\t\t\t\t\t&.router-link-active .icon {\n\t\t\t\t\t\tcolor: #195ee2;\n\t\t\t\t\t\tfont-size: 28px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.icon {\n\t\t\t\t\tfont-size: 26px;\n\t\t\t\t\tcolor: #888;\n\t\t\t\t}\n\n\t\t\t\t.unread-text {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t\tbackground-color: #f56c6c;\n\t\t\t\t\tleft: 36px;\n\t\t\t\t\ttop: 7px;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tborder-radius: 30px;\n\t\t\t\t\tpadding: 0 5px;\n\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\tborder: 1px solid #f1e5e5;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.exit-box {\n\t\t\tposition: absolute;\n\t\t\twidth: 60px;\n\t\t\tbottom: 40px;\n\t\t\ttext-align: center;\n\t\t\tcursor: pointer;\n\n\t\t\t.icon {\n\t\t\t\tfont-size: 28px;\n\t\t\t}\n\n\t\t\t&:hover {\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\t\t}\n\t}\n\n\t.content-box {\n\t\tpadding: 0;\n\t\tbackground-color: #f8f8f8;\n\t\tcolor: black;\n\t\ttext-align: center;\n\t}\n</style>"],"mappings":"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","ignoreList":[]}]}