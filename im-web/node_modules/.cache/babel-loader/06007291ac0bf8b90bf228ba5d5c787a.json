{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js!/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/components/chat/ChatItem.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/d/github/box-im/im-web/src/components/chat/ChatItem.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/babel.config.js","mtime":1727013808912},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js","mtime":1727014166227},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEhlYWRJbWFnZSBmcm9tICcuLi9jb21tb24vSGVhZEltYWdlLnZ1ZSc7CmltcG9ydCBSaWdodE1lbnUgZnJvbSAnLi4vY29tbW9uL1JpZ2h0TWVudS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNoYXRJdGVtIiwKICBjb21wb25lbnRzOiB7CiAgICBIZWFkSW1hZ2UsCiAgICBSaWdodE1lbnUKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByaWdodE1lbnU6IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBwb3M6IHsKICAgICAgICAgIHg6IDAsCiAgICAgICAgICB5OiAwCiAgICAgICAgfSwKICAgICAgICBpdGVtczogW3sKICAgICAgICAgIGtleTogJ1RPUCcsCiAgICAgICAgICBuYW1lOiAn572u6aG2JywKICAgICAgICAgIGljb246ICdlbC1pY29uLXRvcCcKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdERUxFVEUnLAogICAgICAgICAgbmFtZTogJ+WIoOmZpCcsCiAgICAgICAgICBpY29uOiAnZWwtaWNvbi1kZWxldGUnCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBjaGF0OiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIGFjdGl2ZTogewogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAogICAgaW5kZXg6IHsKICAgICAgdHlwZTogTnVtYmVyCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaG93UmlnaHRNZW51KGUpIHsKICAgICAgdGhpcy5yaWdodE1lbnUucG9zID0gewogICAgICAgIHg6IGUueCwKICAgICAgICB5OiBlLnkKICAgICAgfTsKICAgICAgdGhpcy5yaWdodE1lbnUuc2hvdyA9ICJ0cnVlIjsKICAgIH0sCiAgICBvblNlbGVjdE1lbnUoaXRlbSkgewogICAgICB0aGlzLiRlbWl0KGl0ZW0ua2V5LnRvTG93ZXJDYXNlKCksIHRoaXMubXNnSW5mbyk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNTaG93U2VuZE5hbWUoKSB7CiAgICAgIGlmICghdGhpcy5jaGF0LnNlbmROaWNrTmFtZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBsZXQgc2l6ZSA9IHRoaXMuY2hhdC5tZXNzYWdlcy5sZW5ndGg7CiAgICAgIGlmIChzaXplID09IDApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgLy8g5Y+q5pyJ576k6IGK55qE5pmu6YCa5raI5oGv6ZyA6KaB5pi+56S65ZCN56ewCiAgICAgIGxldCBsYXN0TXNnID0gdGhpcy5jaGF0Lm1lc3NhZ2VzW3NpemUgLSAxXTsKICAgICAgcmV0dXJuIHRoaXMuJG1zZ1R5cGUuaXNOb3JtYWwobGFzdE1zZy50eXBlKTsKICAgIH0sCiAgICBzaG93VGltZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGRhdGUudG9UaW1lVGV4dCh0aGlzLmNoYXQubGFzdFNlbmRUaW1lLCB0cnVlKTsKICAgIH0sCiAgICBhdFRleHQoKSB7CiAgICAgIGlmICh0aGlzLmNoYXQuYXRNZSkgewogICAgICAgIHJldHVybiAiW+acieS6ukDmiJFdIjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXQuYXRBbGwpIHsKICAgICAgICByZXR1cm4gIltA5YWo5L2T5oiQ5ZGYXSI7CiAgICAgIH0KICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KfTs="},{"version":3,"names":["HeadImage","RightMenu","name","components","data","rightMenu","show","pos","x","y","items","key","icon","props","chat","type","Object","active","Boolean","index","Number","methods","showRightMenu","e","onSelectMenu","item","$emit","toLowerCase","msgInfo","computed","isShowSendName","sendNickName","size","messages","length","lastMsg","$msgType","isNormal","showTime","$date","toTimeText","lastSendTime","atText","atMe","atAll"],"sources":["src/components/chat/ChatItem.vue"],"sourcesContent":["<template>\n\t<div class=\"chat-item\" :class=\"active ? 'active' : ''\" @contextmenu.prevent=\"showRightMenu($event)\">\n\t\t<div class=\"chat-left\">\n\t\t\t<head-image :url=\"chat.headImage\" :name=\"chat.showName\" :size=\"45\"\n\t\t\t\t:id=\"chat.type=='PRIVATE'?chat.targetId:0\"></head-image>\n\t\t\t<div v-show=\"chat.unreadCount>0\" class=\"unread-text\">{{chat.unreadCount}}</div>\n\t\t</div>\n\t\t<div class=\"chat-right\">\n\t\t\t<div class=\"chat-name\">\n\t\t\t\t<div class=\"chat-tag\" v-if=\"chat.type=='GROUP'\">\n\t\t\t\t\t<el-tag size=\"mini\" >群</el-tag>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"chat-name-text\">{{chat.showName}}</div>\n\t\t\t\t<div class=\"chat-time-text\">{{showTime}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"chat-content\">\n\t\t\t\t<div class=\"chat-at-text\">{{atText}}</div>\n\t\t\t\t<div class=\"chat-send-name\" v-show=\"isShowSendName\">{{chat.sendNickName+':&nbsp;'}}</div>\n\t\t\t\t<div class=\"chat-content-text\" v-html=\"$emo.transform(chat.lastContent)\"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<right-menu v-show=\"rightMenu.show\" :pos=\"rightMenu.pos\" :items=\"rightMenu.items\" @close=\"rightMenu.show=false\"\n\t\t\t@select=\"onSelectMenu\"></right-menu>\n\t</div>\n\n</template>\n\n<script>\n\timport HeadImage from '../common/HeadImage.vue';\n\timport RightMenu from '../common/RightMenu.vue';\n\n\texport default {\n\t\tname: \"chatItem\",\n\t\tcomponents: {\n\t\t\tHeadImage,\n\t\t\tRightMenu\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\trightMenu: {\n\t\t\t\t\tshow: false,\n\t\t\t\t\tpos: {\n\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\ty: 0\n\t\t\t\t\t},\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tkey: 'TOP',\n\t\t\t\t\t\tname: '置顶',\n\t\t\t\t\t\ticon: 'el-icon-top'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tkey: 'DELETE',\n\t\t\t\t\t\tname: '删除',\n\t\t\t\t\t\ticon: 'el-icon-delete'\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tprops: {\n\t\t\tchat: {\n\t\t\t\ttype: Object\n\t\t\t},\n\t\t\tactive: {\n\t\t\t\ttype: Boolean\n\t\t\t},\n\t\t\tindex: {\n\t\t\t\ttype: Number\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tshowRightMenu(e) {\n\t\t\t\tthis.rightMenu.pos = {\n\t\t\t\t\tx: e.x,\n\t\t\t\t\ty: e.y\n\t\t\t\t};\n\t\t\t\tthis.rightMenu.show = \"true\";\n\t\t\t},\n\t\t\tonSelectMenu(item) {\n\t\t\t\tthis.$emit(item.key.toLowerCase(), this.msgInfo);\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisShowSendName() {\n\t\t\t\tif (!this.chat.sendNickName) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tlet size = this.chat.messages.length;\n\t\t\t\tif (size == 0) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// 只有群聊的普通消息需要显示名称\n\t\t\t\tlet lastMsg = this.chat.messages[size - 1];\n\t\t\t\treturn this.$msgType.isNormal(lastMsg.type)\n\t\t\t},\n\t\t\tshowTime() {\n\t\t\t\treturn this.$date.toTimeText(this.chat.lastSendTime, true)\n\t\t\t},\n\t\t\tatText() {\n\t\t\t\tif (this.chat.atMe) {\n\t\t\t\t\treturn \"[有人@我]\"\n\t\t\t\t} else if (this.chat.atAll) {\n\t\t\t\t\treturn \"[@全体成员]\"\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.chat-item {\n\t\theight: 50px;\n\t\tdisplay: flex;\n\t\tmargin-bottom: 1px;\n\t\tposition: relative;\n\t\tpadding: 5px 10px;\n\t\talign-items: center;\n\t\tbackground-color: white;\n\t\twhite-space: nowrap;\n\t\tcolor: black;\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\tbackground-color: #F8FAFF;\n\t\t}\n\n\t\t&.active {\n\t\t\tbackground-color: #F4F9FF;\n\t\t}\n\n\t\t.chat-left {\n\t\t\tposition: relative;\n\t\t\tdisplay: flex;\n\t\t\twidth: 45px;\n\t\t\theight: 45x;\n\n\t\t\t.unread-text {\n\t\t\t\tposition: absolute;\n\t\t\t\tbackground-color: #f56c6c;\n\t\t\t\tright: -5px;\n\t\t\t\ttop: -5px;\n\t\t\t\tcolor: white;\n\t\t\t\tborder-radius: 30px;\n\t\t\t\tpadding: 1px 5px;\n\t\t\t\tfont-size: 10px;\n\t\t\t\ttext-align: center;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\tborder: 1px solid #f1e5e5;\n\t\t\t}\n\t\t}\n\n\n\t\t.chat-right {\n\t\t\tflex: 1;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tpadding-left: 10px;\n\t\t\ttext-align: left;\n\t\t\toverflow: hidden;\n\n\t\t\t.chat-name {\n\t\t\t\tdisplay: flex;\n\t\t\t\tline-height: 25px;\n\t\t\t\theight: 25px;\n\n\t\t\t\t.chat-tag {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmargin-right: 1px;\n\t\t\t\t}\n\n\t\t\t\t.chat-name-text {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tfont-size: 15px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t}\n\n\n\t\t\t\t.chat-time-text {\n\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t\tcolor: #888888;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tpadding-left: 10px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.chat-content {\n\t\t\t\tdisplay: flex;\n\t\t\t\tline-height: 22px;\n\n\t\t\t\t.chat-at-text {\n\t\t\t\t\tcolor: #c70b0b;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t}\n\n\t\t\t\t.chat-send-name {\n\t\t\t\t\tfont-size: 13px;\n\t\t\t\t}\n\n\n\t\t\t\t.chat-content-text {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\tfont-size: 13px;\n\n\t\t\t\t\timg {\n\t\t\t\t\t\twidth: 20px !important;\n\t\t\t\t\t\theight: 20px !important;\n\t\t\t\t\t\tvertical-align: bottom;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n</style>"],"mappings":"AA4BA,OAAAA,SAAA;AACA,OAAAC,SAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAH,SAAA;IACAC;EACA;EACAG,KAAA;IACA;MACAC,SAAA;QACAC,IAAA;QACAC,GAAA;UACAC,CAAA;UACAC,CAAA;QACA;QACAC,KAAA;UACAC,GAAA;UACAT,IAAA;UACAU,IAAA;QACA;UACAD,GAAA;UACAT,IAAA;UACAU,IAAA;QACA;MACA;IACA;EACA;EACAC,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC;IACA;IACAC,MAAA;MACAF,IAAA,EAAAG;IACA;IACAC,KAAA;MACAJ,IAAA,EAAAK;IACA;EACA;EACAC,OAAA;IACAC,cAAAC,CAAA;MACA,KAAAlB,SAAA,CAAAE,GAAA;QACAC,CAAA,EAAAe,CAAA,CAAAf,CAAA;QACAC,CAAA,EAAAc,CAAA,CAAAd;MACA;MACA,KAAAJ,SAAA,CAAAC,IAAA;IACA;IACAkB,aAAAC,IAAA;MACA,KAAAC,KAAA,CAAAD,IAAA,CAAAd,GAAA,CAAAgB,WAAA,SAAAC,OAAA;IACA;EACA;EACAC,QAAA;IACAC,eAAA;MACA,UAAAhB,IAAA,CAAAiB,YAAA;QACA;MACA;MACA,IAAAC,IAAA,QAAAlB,IAAA,CAAAmB,QAAA,CAAAC,MAAA;MACA,IAAAF,IAAA;QACA;MACA;MACA;MACA,IAAAG,OAAA,QAAArB,IAAA,CAAAmB,QAAA,CAAAD,IAAA;MACA,YAAAI,QAAA,CAAAC,QAAA,CAAAF,OAAA,CAAApB,IAAA;IACA;IACAuB,SAAA;MACA,YAAAC,KAAA,CAAAC,UAAA,MAAA1B,IAAA,CAAA2B,YAAA;IACA;IACAC,OAAA;MACA,SAAA5B,IAAA,CAAA6B,IAAA;QACA;MACA,gBAAA7B,IAAA,CAAA8B,KAAA;QACA;MACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}