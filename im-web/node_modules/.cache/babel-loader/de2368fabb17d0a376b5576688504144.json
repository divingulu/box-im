{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js!/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/components/chat/ChatInput.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/d/github/box-im/im-web/src/components/chat/ChatInput.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/babel.config.js","mtime":1727013808912},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js","mtime":1727014166227},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5kZWxldGUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuaGFzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLnNpemUuanMiOwppbXBvcnQgQ2hhdEF0Qm94IGZyb20gIi4vQ2hhdEF0Qm94IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDaGF0SW5wdXQiLAogIGNvbXBvbmVudHM6IHsKICAgIENoYXRBdEJveAogIH0sCiAgcHJvcHM6IHsKICAgIG93bmVySWQ6IHsKICAgICAgdHlwZTogTnVtYmVyCiAgICB9LAogICAgZ3JvdXBNZW1iZXJzOiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW1hZ2VMaXN0OiBbXSwKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICBjdXJyZW50SWQ6IDAsCiAgICAgIGF0U2VhcmNoVGV4dDogbnVsbCwKICAgICAgY29tcG9zaXRpb25GbGFnOiBmYWxzZSwKICAgICAgYXRJbmc6IGZhbHNlLAogICAgICBpc0VtcHR5OiB0cnVlLAogICAgICBjaGFuZ2VTdG9yZWQ6IHRydWUsCiAgICAgIGJsdXJSYW5nZTogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uUGFzdGUoZSkgewogICAgICB0aGlzLmlzRW1wdHkgPSBmYWxzZTsKICAgICAgbGV0IHR4dCA9IGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdUZXh0Jyk7CiAgICAgIGxldCByYW5nZSA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApOwogICAgICBpZiAocmFuZ2Uuc3RhcnRDb250YWluZXIgIT09IHJhbmdlLmVuZENvbnRhaW5lciB8fCByYW5nZS5zdGFydE9mZnNldCAhPT0gcmFuZ2UuZW5kT2Zmc2V0KSB7CiAgICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTsKICAgICAgfQogICAgICAvLyDnspjotLTlm77niYflkozmlofku7bml7bvvIzov5nph4zmsqHmnInmlbDmja4KICAgICAgaWYgKHR4dCAmJiB0eXBlb2YgdHh0ID09ICdzdHJpbmcnKSB7CiAgICAgICAgbGV0IHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodHh0KTsKICAgICAgICByYW5nZS5pbnNlcnROb2RlKHRleHROb2RlKTsKICAgICAgICByYW5nZS5jb2xsYXBzZSgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgaXRlbXMgPSAoZS5jbGlwYm9hcmREYXRhIHx8IHdpbmRvdy5jbGlwYm9hcmREYXRhKS5pdGVtczsKICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGlmIChpdGVtc1tpXS50eXBlLmluZGV4T2YoJ2ltYWdlJykgIT09IC0xKSB7CiAgICAgICAgICAgIGxldCBmaWxlID0gaXRlbXNbaV0uZ2V0QXNGaWxlKCk7CiAgICAgICAgICAgIGxldCBpbWFnZVB1c2ggPSB7CiAgICAgICAgICAgICAgZmlsZUlkOiB0aGlzLmdlbmVyYXRlSWQoKSwKICAgICAgICAgICAgICBmaWxlOiBmaWxlLAogICAgICAgICAgICAgIHVybDogVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLmltYWdlTGlzdFtpbWFnZVB1c2guZmlsZUlkXSA9IGltYWdlUHVzaDsKICAgICAgICAgICAgbGV0IGxpbmUgPSB0aGlzLm5ld0xpbmUoKTsKICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICAgICAgICBpbWFnZUVsZW1lbnQuY2xhc3NOYW1lID0gJ2NoYXQtaW1hZ2Ugbm8tdGV4dCc7CiAgICAgICAgICAgIGltYWdlRWxlbWVudC5zcmMgPSBpbWFnZVB1c2gudXJsOwogICAgICAgICAgICBpbWFnZUVsZW1lbnQuZGF0YXNldC5pbWdJZCA9IGltYWdlUHVzaC5maWxlSWQ7CiAgICAgICAgICAgIGxpbmUuYXBwZW5kQ2hpbGQoaW1hZ2VFbGVtZW50KTsKICAgICAgICAgICAgbGV0IGFmdGVyID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1x1MDBBMCcpOwogICAgICAgICAgICBsaW5lLmFwcGVuZENoaWxkKGFmdGVyKTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RFbGVtZW50KGFmdGVyLCAxKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxldCBhc0ZpbGUgPSBpdGVtc1tpXS5nZXRBc0ZpbGUoKTsKICAgICAgICAgICAgaWYgKCFhc0ZpbGUpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgZmlsZVB1c2ggPSB7CiAgICAgICAgICAgICAgZmlsZUlkOiB0aGlzLmdlbmVyYXRlSWQoKSwKICAgICAgICAgICAgICBmaWxlOiBhc0ZpbGUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhpcy5maWxlTGlzdFtmaWxlUHVzaC5maWxlSWRdID0gZmlsZVB1c2g7CiAgICAgICAgICAgIGxldCBsaW5lID0gdGhpcy5uZXdMaW5lKCk7CiAgICAgICAgICAgIGxldCBmaWxlRWxlbWVudCA9IHRoaXMuY3JlYXRlRmlsZShmaWxlUHVzaCk7CiAgICAgICAgICAgIGxpbmUuYXBwZW5kQ2hpbGQoZmlsZUVsZW1lbnQpOwogICAgICAgICAgICBsZXQgYWZ0ZXIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnXHUwMEEwJyk7CiAgICAgICAgICAgIGxpbmUuYXBwZW5kQ2hpbGQoYWZ0ZXIpOwogICAgICAgICAgICB0aGlzLnNlbGVjdEVsZW1lbnQoYWZ0ZXIsIDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByYW5nZS5jb2xsYXBzZSgpOwogICAgfSwKICAgIHNlbGVjdEVsZW1lbnQoZWxlbWVudCwgZW5kT2Zmc2V0KSB7CiAgICAgIGxldCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIC8vIOaPkuWFpeWFg+e0oOWPr+iDveS4jeaYr+eri+WNs+aJp+ihjOeahO+8jHZ1ZeWPr+iDveS8muWcqOaPkuWFpeWFg+e0oOWQjuWGjeabtOaWsGRvbQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgbGV0IHQxID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsKICAgICAgICB0MS5zZXRTdGFydChlbGVtZW50LCAwKTsKICAgICAgICB0MS5zZXRFbmQoZWxlbWVudCwgZW5kT2Zmc2V0IHx8IDApOwogICAgICAgIGlmIChlbGVtZW50LmZpcnN0Q2hpbGQpIHsKICAgICAgICAgIHQxLnNlbGVjdE5vZGVDb250ZW50cyhlbGVtZW50LmZpcnN0Q2hpbGQpOwogICAgICAgIH0KICAgICAgICB0MS5jb2xsYXBzZSgpOwogICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTsKICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UodDEpOwogICAgICAgIC8vIOmcgOimgeaXtuiHquWKqOiBmueEpgogICAgICAgIGlmIChlbGVtZW50LmZvY3VzKSB7CiAgICAgICAgICBlbGVtZW50LmZvY3VzKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBvbkNvbXBvc2l0aW9uRW5kKGUpIHsKICAgICAgdGhpcy5jb21wb3NpdGlvbkZsYWcgPSBmYWxzZTsKICAgICAgdGhpcy5vbkVkaXRvcklucHV0KGUpOwogICAgfSwKICAgIG9uS2V5ZG93bihlKSB7CiAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgaWYgKHRoaXMuYXRJbmcpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfpgInkuK1hdOeahOS6uicpOwogICAgICAgICAgdGhpcy4kcmVmcy5hdEJveC5zZWxlY3QoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKGUuY3RybEtleSkgewogICAgICAgICAgbGV0IGxpbmUgPSB0aGlzLm5ld0xpbmUoKTsKICAgICAgICAgIGxldCBhZnRlciA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdcdTAwQTAnKTsKICAgICAgICAgIGxpbmUuYXBwZW5kQ2hpbGQoYWZ0ZXIpOwogICAgICAgICAgdGhpcy5zZWxlY3RFbGVtZW50KGxpbmUuY2hpbGROb2Rlc1swXSwgMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOS4reaWh+i+k+WFpeagh+iusAogICAgICAgICAgaWYgKHRoaXMuY29tcG9zaXRpb25GbGFnKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc3VibWl0KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAvLyDliKDpmaTplK4KICAgICAgaWYgKGUua2V5Q29kZSA9PT0gOCkgewogICAgICAgIGNvbnNvbGUubG9nKCJkZWxldGUiKTsKICAgICAgICAvLyDnrYnlvoVkb23mm7TmlrAKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGxldCBzID0gdGhpcy4kcmVmcy5jb250ZW50LmlubmVySFRNTC50cmltKCk7CiAgICAgICAgICAvLyDnqbpkb23ml7bvvIzpnIDopoHliLfmlrBkb20KICAgICAgICAgIGNvbnNvbGUubG9nKHMpOwogICAgICAgICAgaWYgKHMgPT09ICcnIHx8IHMgPT09ICc8YnI+JyB8fCBzID09PSAnPGRpdj4mbmJzcDs8L2Rpdj4nKSB7CiAgICAgICAgICAgIC8vIOaLvOaOpemaj+acuumVv+W6pueahOepuuagvO+8jOS7peWIt+aWsGRvbQogICAgICAgICAgICB0aGlzLmVtcHR5KCk7CiAgICAgICAgICAgIHRoaXMuaXNFbXB0eSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0RWxlbWVudCh0aGlzLiRyZWZzLmNvbnRlbnQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgLy8gYXTmoYbmiZPlvIDml7bvvIzkuIrkuIvplK7np7vliqjnibnmrorlpITnkIYKICAgICAgaWYgKHRoaXMuYXRJbmcpIHsKICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAzOCkgewogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIHRoaXMuJHJlZnMuYXRCb3gubW92ZVVwKCk7CiAgICAgICAgfQogICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQwKSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgdGhpcy4kcmVmcy5hdEJveC5tb3ZlRG93bigpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uQXRTZWxlY3QobWVtYmVyKSB7CiAgICAgIHRoaXMuYXRJbmcgPSBmYWxzZTsKICAgICAgLy8g6YCJ5Lit6L6T5YWl55qEIEB4eCDnrKYKICAgICAgbGV0IGJsdXJSYW5nZSA9IHRoaXMuYmx1clJhbmdlOwogICAgICBsZXQgZW5kQ29udGFpbmVyID0gYmx1clJhbmdlLmVuZENvbnRhaW5lcjsKICAgICAgbGV0IHN0YXJ0T2Zmc2V0ID0gZW5kQ29udGFpbmVyLmRhdGEuaW5kZXhPZigiQCIgKyB0aGlzLmF0U2VhcmNoVGV4dCk7CiAgICAgIGxldCBlbmRPZmZzZXQgPSBzdGFydE9mZnNldCArIHRoaXMuYXRTZWFyY2hUZXh0Lmxlbmd0aCArIDE7CiAgICAgIGJsdXJSYW5nZS5zZXRTdGFydChibHVyUmFuZ2UuZW5kQ29udGFpbmVyLCBzdGFydE9mZnNldCk7CiAgICAgIGJsdXJSYW5nZS5zZXRFbmQoYmx1clJhbmdlLmVuZENvbnRhaW5lciwgZW5kT2Zmc2V0KTsKICAgICAgYmx1clJhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7CiAgICAgIGJsdXJSYW5nZS5jb2xsYXBzZSgpOwogICAgICBjb25zb2xlLmxvZygib25BdFNlbGVjdCIpOwogICAgICB0aGlzLmZvY3VzKCk7CiAgICAgIC8vIOWIm+W7uuWFg+e0oOiKgueCuQogICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1NQQU4nKTsKICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSAiY2hhdC1hdC11c2VyIjsKICAgICAgZWxlbWVudC5kYXRhc2V0LmlkID0gbWVtYmVyLnVzZXJJZDsKICAgICAgZWxlbWVudC5jb250ZW50RWRpdGFibGUgPSAnZmFsc2UnOwogICAgICBlbGVtZW50LmlubmVyVGV4dCA9IGBAJHttZW1iZXIuc2hvd05pY2tOYW1lfWA7CiAgICAgIGJsdXJSYW5nZS5pbnNlcnROb2RlKGVsZW1lbnQpOwogICAgICAvLyDlhYnmoIfnp7vliqjliLDmnKvlsL4KICAgICAgYmx1clJhbmdlLmNvbGxhcHNlKCk7CgogICAgICAvLyDmj5LlhaXnqbrmoLwKICAgICAgbGV0IHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1x1MDBBMCcpOwogICAgICBibHVyUmFuZ2UuaW5zZXJ0Tm9kZSh0ZXh0Tm9kZSk7CiAgICAgIGJsdXJSYW5nZS5jb2xsYXBzZSgpOwogICAgICB0aGlzLmF0U2VhcmNoVGV4dCA9ICIiOwogICAgICB0aGlzLnNlbGVjdEVsZW1lbnQodGV4dE5vZGUsIDEpOwogICAgfSwKICAgIG9uRWRpdG9ySW5wdXQoZSkgewogICAgICB0aGlzLmlzRW1wdHkgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFuZ2VTdG9yZWQgPSBmYWxzZTsKICAgICAgaWYgKHRoaXMuJHByb3BzLmdyb3VwTWVtYmVycyAmJiAhdGhpcy5jb21wb3NpdGlvbkZsYWcpIHsKICAgICAgICBsZXQgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgICAgIGxldCByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICAgIC8vIOaIquWPlkDlkI7pnaLnmoTlkI3np7DkvZzkuLrov4fmu6TmnaHku7bvvIzlubbku6XnqbrmoLznu5PmnZ8KICAgICAgICBsZXQgZW5kQ29udGFpbmVyID0gcmFuZ2UuZW5kQ29udGFpbmVyOwogICAgICAgIGxldCBlbmRPZmZzZXQgPSByYW5nZS5lbmRPZmZzZXQ7CiAgICAgICAgbGV0IHRleHRDb250ZW50ID0gZW5kQ29udGFpbmVyLnRleHRDb250ZW50OwogICAgICAgIGxldCBzdGFydEluZGV4ID0gLTE7CiAgICAgICAgZm9yIChsZXQgaSA9IGVuZE9mZnNldDsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgIGlmICh0ZXh0Q29udGVudFtpXSA9PT0gJ0AnKSB7CiAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8g5rKh5pyJYXTnrKblj7fvvIzliJnlhbPpl63lvLnnqpcKICAgICAgICBpZiAoc3RhcnRJbmRleCA9PT0gLTEpIHsKICAgICAgICAgIHRoaXMuJHJlZnMuYXRCb3guY2xvc2UoKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgbGV0IGVuZEluZGV4ID0gZW5kT2Zmc2V0OwogICAgICAgIGZvciAobGV0IGkgPSBlbmRPZmZzZXQ7IGkgPCB0ZXh0Q29udGVudC5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHRleHRDb250ZW50W2ldID09PSAnICcpIHsKICAgICAgICAgICAgZW5kSW5kZXggPSBpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy5hdFNlYXJjaFRleHQgPSB0ZXh0Q29udGVudC5zdWJzdHJpbmcoc3RhcnRJbmRleCArIDEsIGVuZEluZGV4KS50cmltKCk7CiAgICAgICAgLy8g5omT5byA6YCJ5oup5by556qXCiAgICAgICAgaWYgKHRoaXMuYXRTZWFyY2hUZXh0ID09ICcnKSB7CiAgICAgICAgICB0aGlzLnNob3dBdEJveChlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvbkJsdXIoZSkgewogICAgICB0aGlzLnVwZGF0ZVJhbmdlKCk7CiAgICB9LAogICAgb25Nb3VzZWRvd24oKSB7CiAgICAgIGlmICh0aGlzLmF0SW5nKSB7CiAgICAgICAgdGhpcy4kcmVmcy5hdEJveC5jbG9zZSgpOwogICAgICAgIHRoaXMuYXRJbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGluc2VydEVtb2ppKGVtb2ppVGV4dCkgewogICAgICBsZXQgZW1vamlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgIGVtb2ppRWxlbWVudC5jbGFzc05hbWUgPSAnY2hhdC1lbW9qaSBuby10ZXh0JzsKICAgICAgZW1vamlFbGVtZW50LmRhdGFzZXQuZW1vamlDb2RlID0gZW1vamlUZXh0OwogICAgICBlbW9qaUVsZW1lbnQuc3JjID0gdGhpcy4kZW1vLnRleHRUb1VybChlbW9qaVRleHQpOwogICAgICBsZXQgYmx1clJhbmdlID0gdGhpcy5ibHVyUmFuZ2U7CiAgICAgIGlmICghYmx1clJhbmdlKSB7CiAgICAgICAgdGhpcy5mb2N1cygpOwogICAgICAgIHRoaXMudXBkYXRlUmFuZ2UoKTsKICAgICAgICBibHVyUmFuZ2UgPSB0aGlzLmJsdXJSYW5nZTsKICAgICAgfQogICAgICBpZiAoYmx1clJhbmdlLnN0YXJ0Q29udGFpbmVyICE9PSBibHVyUmFuZ2UuZW5kQ29udGFpbmVyIHx8IGJsdXJSYW5nZS5zdGFydE9mZnNldCAhPT0gYmx1clJhbmdlLmVuZE9mZnNldCkgewogICAgICAgIGJsdXJSYW5nZS5kZWxldGVDb250ZW50cygpOwogICAgICB9CiAgICAgIGJsdXJSYW5nZS5pbnNlcnROb2RlKGVtb2ppRWxlbWVudCk7CiAgICAgIGJsdXJSYW5nZS5jb2xsYXBzZSgpOwogICAgICBsZXQgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnXHUwMEEwJyk7CiAgICAgIGJsdXJSYW5nZS5pbnNlcnROb2RlKHRleHROb2RlKTsKICAgICAgYmx1clJhbmdlLmNvbGxhcHNlKCk7CiAgICAgIHRoaXMuc2VsZWN0RWxlbWVudCh0ZXh0Tm9kZSk7CiAgICAgIHRoaXMudXBkYXRlUmFuZ2UoKTsKICAgICAgdGhpcy5pc0VtcHR5ID0gZmFsc2U7CiAgICB9LAogICAgZ2VuZXJhdGVJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudElkKys7CiAgICB9LAogICAgY3JlYXRlRmlsZShmaWxlUHVzaCkgewogICAgICBsZXQgZmlsZSA9IGZpbGVQdXNoLmZpbGU7CiAgICAgIGxldCBmaWxlSWQgPSBmaWxlUHVzaC5maWxlSWQ7CiAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9ICdjaGF0LWZpbGUtY29udGFpbmVyIG5vLXRleHQnOwogICAgICBjb250YWluZXIuY29udGVudEVkaXRhYmxlID0gJ2ZhbHNlJzsKICAgICAgY29udGFpbmVyLmRhdGFzZXQuZmlsZUlkID0gZmlsZUlkOwogICAgICBsZXQgbGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBsZWZ0LmNsYXNzTmFtZSA9ICdmaWxlLXBvc2l0aW9uLWxlZnQnOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGVmdCk7CiAgICAgIGxldCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGljb24uY2xhc3NOYW1lID0gJ2VsLWljb24tZG9jdW1lbnQnOwogICAgICBsZWZ0LmFwcGVuZENoaWxkKGljb24pOwogICAgICBsZXQgcmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgcmlnaHQuY2xhc3NOYW1lID0gJ2ZpbGUtcG9zaXRpb24tcmlnaHQnOwogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmlnaHQpOwogICAgICBsZXQgZmlsZU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgZmlsZU5hbWUuY2xhc3NOYW1lID0gJ2ZpbGUtbmFtZSc7CiAgICAgIGZpbGVOYW1lLmlubmVyVGV4dCA9IGZpbGUubmFtZTsKICAgICAgbGV0IGZpbGVTaXplID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGZpbGVTaXplLmNsYXNzTmFtZSA9ICdmaWxlLXNpemUnOwogICAgICBmaWxlU2l6ZS5pbm5lclRleHQgPSB0aGlzLnNpemVDb252ZXJ0KGZpbGUuc2l6ZSk7CiAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGZpbGVOYW1lKTsKICAgICAgcmlnaHQuYXBwZW5kQ2hpbGQoZmlsZVNpemUpOwogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfSwKICAgIHNpemVDb252ZXJ0KGxlbikgewogICAgICBpZiAobGVuIDwgMTAyNCkgewogICAgICAgIHJldHVybiBsZW4gKyAnQic7CiAgICAgIH0gZWxzZSBpZiAobGVuIDwgMTAyNCAqIDEwMjQpIHsKICAgICAgICByZXR1cm4gKGxlbiAvIDEwMjQpLnRvRml4ZWQoMikgKyAnS0InOwogICAgICB9IGVsc2UgaWYgKGxlbiA8IDEwMjQgKiAxMDI0ICogMTAyNCkgewogICAgICAgIHJldHVybiAobGVuIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMikgKyAnTUInOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAobGVuIC8gMTAyNCAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDIpICsgJ0dCJzsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZVJhbmdlKCkgewogICAgICBsZXQgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwogICAgICB0aGlzLmJsdXJSYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgfSwKICAgIG5ld0xpbmUoKSB7CiAgICAgIGxldCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIGxldCByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICBsZXQgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBsZXQgZW5kQ29udGFpbmVyID0gcmFuZ2UuZW5kQ29udGFpbmVyOwogICAgICBsZXQgcGFyZW50RWxlbWVudCA9IGVuZENvbnRhaW5lci5wYXJlbnRFbGVtZW50OwogICAgICBpZiAocGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50ID09PSB0aGlzLiRyZWZzLmNvbnRlbnQpIHsKICAgICAgICBkaXZFbGVtZW50LmlubmVySFRNTCA9IGVuZENvbnRhaW5lci50ZXh0Q29udGVudC5zdWJzdHJpbmcocmFuZ2UuZW5kT2Zmc2V0KS50cmltKCk7CiAgICAgICAgZW5kQ29udGFpbmVyLnRleHRDb250ZW50ID0gZW5kQ29udGFpbmVyLnRleHRDb250ZW50LnN1YnN0cmluZygwLCByYW5nZS5lbmRPZmZzZXQpOwogICAgICAgIC8vIOaPkuWFpeWIsOW9k+WJjWRpdu+8iOW9k+WJjeihjO+8ieWQjumdogogICAgICAgIHBhcmVudEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIGRpdkVsZW1lbnQpOwogICAgICB9IGVsc2UgewogICAgICAgIGRpdkVsZW1lbnQuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgdGhpcy4kcmVmcy5jb250ZW50LmFwcGVuZChkaXZFbGVtZW50KTsKICAgICAgfQogICAgICByZXR1cm4gZGl2RWxlbWVudDsKICAgIH0sCiAgICBjbGVhcigpIHsKICAgICAgdGhpcy5lbXB0eSgpOwogICAgICB0aGlzLmltYWdlTGlzdCA9IFtdOwogICAgICB0aGlzLmZpbGVMaXN0ID0gW107CiAgICB9LAogICAgZW1wdHkoKSB7CiAgICAgIHRoaXMuJHJlZnMuY29udGVudC5pbm5lckhUTUwgPSAiIjsKICAgICAgbGV0IGxpbmUgPSB0aGlzLm5ld0xpbmUoKTsKICAgICAgbGV0IGFmdGVyID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1x1MDBBMCcpOwogICAgICBsaW5lLmFwcGVuZENoaWxkKGFmdGVyKTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gdGhpcy5zZWxlY3RFbGVtZW50KGFmdGVyKSk7CiAgICB9LAogICAgc2hvd0F0Qm94KGUpIHsKICAgICAgdGhpcy5hdEluZyA9IHRydWU7CiAgICAgIC8vIHNob3fkuYvlkI7kvJroh6rliqjmm7TmlrDlvZPliY3mkJzntKLnmoR0ZXh0CiAgICAgIC8vIHRoaXMuYXRTZWFyY2hUZXh0ID0gIiI7CiAgICAgIGxldCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7CiAgICAgIGxldCByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICAvLyDlhYnmoIfmiYDlnKjlnZDmoIcKICAgICAgbGV0IHBvcyA9IHJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB0aGlzLiRyZWZzLmF0Qm94Lm9wZW4oewogICAgICAgIHg6IHBvcy54LAogICAgICAgIHk6IHBvcy55CiAgICAgIH0pOwogICAgICAvLyDorrDlvZXlhYnmoIfmiYDlnKjkvY3nva4KICAgICAgdGhpcy51cGRhdGVSYW5nZSgpOwogICAgfSwKICAgIGh0bWwyRXNjYXBlKHN0ckh0bWwpIHsKICAgICAgcmV0dXJuIHN0ckh0bWwucmVwbGFjZSgvWzw+JiJdL2csIGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICc8JzogJyZsdDsnLAogICAgICAgICAgJz4nOiAnJmd0OycsCiAgICAgICAgICAnJic6ICcmYW1wOycsCiAgICAgICAgICAnIic6ICcmcXVvdDsnCiAgICAgICAgfVtjXTsKICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0KCkgewogICAgICBsZXQgbm9kZXMgPSB0aGlzLiRyZWZzLmNvbnRlbnQuY2hpbGROb2RlczsKICAgICAgbGV0IGZ1bGxMaXN0ID0gW107CiAgICAgIGxldCB0ZW1wVGV4dCA9ICcnOwogICAgICBsZXQgYXRVc2VySWRzID0gW107CiAgICAgIGxldCBlYWNoID0gbm9kZXMgPT4gewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGxldCBub2RlID0gbm9kZXNbaV07CiAgICAgICAgICBpZiAoIW5vZGUpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMykgewogICAgICAgICAgICB0ZW1wVGV4dCArPSB0aGlzLmh0bWwyRXNjYXBlKG5vZGUudGV4dENvbnRlbnQpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBub2RlTmFtZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICAgIGlmIChub2RlTmFtZSA9PT0gJ3NjcmlwdCcpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgdGV4dCA9IHRlbXBUZXh0LnRyaW0oKTsKICAgICAgICAgIGlmIChub2RlTmFtZSA9PT0gJ2ltZycpIHsKICAgICAgICAgICAgbGV0IGltZ0lkID0gbm9kZS5kYXRhc2V0LmltZ0lkOwogICAgICAgICAgICBpZiAoaW1nSWQpIHsKICAgICAgICAgICAgICBpZiAodGV4dCkgewogICAgICAgICAgICAgICAgZnVsbExpc3QucHVzaCh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICAgICAgICAgY29udGVudDogdGV4dCwKICAgICAgICAgICAgICAgICAgYXRVc2VySWRzOiBhdFVzZXJJZHMKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGVtcFRleHQgPSAnJzsKICAgICAgICAgICAgICAgIGF0VXNlcklkcyA9IFtdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBmdWxsTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgIHR5cGU6ICdpbWFnZScsCiAgICAgICAgICAgICAgICBjb250ZW50OiB0aGlzLmltYWdlTGlzdFtpbWdJZF0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBsZXQgZW1vamlDb2RlID0gbm9kZS5kYXRhc2V0LmVtb2ppQ29kZTsKICAgICAgICAgICAgICB0ZW1wVGV4dCArPSBlbW9qaUNvZGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAobm9kZU5hbWUgPT09ICdkaXYnKSB7CiAgICAgICAgICAgIGxldCBmaWxlSWQgPSBub2RlLmRhdGFzZXQuZmlsZUlkOwogICAgICAgICAgICAvLyDmlofku7YKICAgICAgICAgICAgaWYgKGZpbGVJZCkgewogICAgICAgICAgICAgIGlmICh0ZXh0KSB7CiAgICAgICAgICAgICAgICBmdWxsTGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgICAgICAgICAgICBjb250ZW50OiB0ZXh0LAogICAgICAgICAgICAgICAgICBhdFVzZXJJZHM6IGF0VXNlcklkcwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0ZW1wVGV4dCA9ICcnOwogICAgICAgICAgICAgICAgYXRVc2VySWRzID0gW107CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZ1bGxMaXN0LnB1c2goewogICAgICAgICAgICAgICAgdHlwZTogJ2ZpbGUnLAogICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5maWxlTGlzdFtmaWxlSWRdCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGVtcFRleHQgKz0gJ1xuJzsKICAgICAgICAgICAgICBlYWNoKG5vZGUuY2hpbGROb2Rlcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAobm9kZU5hbWUgPT09ICdzcGFuJykgewogICAgICAgICAgICBpZiAobm9kZS5kYXRhc2V0LmlkKSB7CiAgICAgICAgICAgICAgdGVtcFRleHQgKz0gbm9kZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgYXRVc2VySWRzLnB1c2gobm9kZS5kYXRhc2V0LmlkKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0ZW1wVGV4dCArPSBub2RlLm91dGVySHRtbDsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgZWFjaChub2Rlcyk7CiAgICAgIGxldCB0ZXh0ID0gdGVtcFRleHQudHJpbSgpOwogICAgICBpZiAodGV4dCAhPT0gJycpIHsKICAgICAgICBmdWxsTGlzdC5wdXNoKHsKICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgIGNvbnRlbnQ6IHRleHQsCiAgICAgICAgICBhdFVzZXJJZHM6IGF0VXNlcklkcwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdCcsIGZ1bGxMaXN0KTsKICAgIH0sCiAgICBmb2N1cygpIHsKICAgICAgdGhpcy4kcmVmcy5jb250ZW50LmZvY3VzKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["ChatAtBox","name","components","props","ownerId","type","Number","groupMembers","Array","data","imageList","fileList","currentId","atSearchText","compositionFlag","atIng","isEmpty","changeStored","blurRange","methods","onPaste","e","txt","clipboardData","getData","range","window","getSelection","getRangeAt","startContainer","endContainer","startOffset","endOffset","deleteContents","textNode","document","createTextNode","insertNode","collapse","items","length","i","indexOf","file","getAsFile","imagePush","fileId","generateId","url","URL","createObjectURL","line","newLine","imageElement","createElement","className","src","dataset","imgId","appendChild","after","selectElement","asFile","filePush","fileElement","createFile","element","selection","$nextTick","t1","createRange","setStart","setEnd","firstChild","selectNodeContents","removeAllRanges","addRange","focus","onCompositionEnd","onEditorInput","onKeydown","keyCode","preventDefault","stopPropagation","console","log","$refs","atBox","select","ctrlKey","childNodes","submit","setTimeout","s","content","innerHTML","trim","empty","moveUp","moveDown","onAtSelect","member","id","userId","contentEditable","innerText","showNickName","$props","textContent","startIndex","close","endIndex","substring","showAtBox","onBlur","updateRange","onMousedown","insertEmoji","emojiText","emojiElement","emojiCode","$emo","textToUrl","container","left","icon","right","fileName","fileSize","sizeConvert","size","len","toFixed","divElement","parentElement","insertAdjacentElement","append","clear","pos","getBoundingClientRect","open","x","y","html2Escape","strHtml","replace","c","nodes","fullList","tempText","atUserIds","each","node","nodeType","nodeName","toLowerCase","text","push","outerHtml","$emit"],"sources":["src/components/chat/ChatInput.vue"],"sourcesContent":["<template>\n\t<div class=\"chat-input-area\">\n\t\t<div :class=\"['edit-chat-container',isEmpty?'':'not-empty']\" contenteditable=\"true\" @paste.prevent=\"onPaste\"\n\t\t\t@keydown=\"onKeydown\" @compositionstart=\"compositionFlag=true\" @compositionend=\"onCompositionEnd\"\n\t\t\t@input=\"onEditorInput\" @mousedown=\"onMousedown\" ref=\"content\" @blur=\"onBlur\">\n\t\t</div>\n\t\t<chat-at-box @select=\"onAtSelect\" :search-text=\"atSearchText\" ref=\"atBox\" :ownerId=\"ownerId\"\n\t\t\t:members=\"groupMembers\"></chat-at-box>\n\t</div>\n</template>\n\n<script>\n\timport ChatAtBox from \"./ChatAtBox\";\n\n\texport default {\n\t\tname: \"ChatInput\",\n\t\tcomponents: { ChatAtBox },\n\t\tprops: {\n\t\t\townerId: {\n\t\t\t\ttype: Number,\n\t\t\t},\n\t\t\tgroupMembers: {\n\t\t\t\ttype: Array,\n\t\t\t},\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\timageList: [],\n\t\t\t\tfileList: [],\n\t\t\t\tcurrentId: 0,\n\t\t\t\tatSearchText: null,\n\t\t\t\tcompositionFlag: false,\n\t\t\t\tatIng: false,\n\t\t\t\tisEmpty: true,\n\t\t\t\tchangeStored: true,\n\t\t\t\tblurRange: null\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tonPaste(e) {\n\t\t\t\tthis.isEmpty = false;\n\t\t\t\tlet txt = e.clipboardData.getData('Text')\n\t\t\t\tlet range = window.getSelection().getRangeAt(0)\n\t\t\t\tif (range.startContainer !== range.endContainer || range.startOffset !== range.endOffset) {\n\t\t\t\t\trange.deleteContents();\n\t\t\t\t}\n\t\t\t\t// 粘贴图片和文件时，这里没有数据\n\t\t\t\tif (txt && typeof(txt) == 'string') {\n\t\t\t\t\tlet textNode = document.createTextNode(txt);\n\t\t\t\t\trange.insertNode(textNode)\n\t\t\t\t\trange.collapse();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet items = (e.clipboardData || window.clipboardData).items\n\t\t\t\tif (items.length) {\n\t\t\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\t\t\tif (items[i].type.indexOf('image') !== -1) {\n\t\t\t\t\t\t\tlet file = items[i].getAsFile();\n\t\t\t\t\t\t\tlet imagePush = {\n\t\t\t\t\t\t\t\tfileId: this.generateId(),\n\t\t\t\t\t\t\t\tfile: file,\n\t\t\t\t\t\t\t\turl: URL.createObjectURL(file)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.imageList[imagePush.fileId] = (imagePush);\n\t\t\t\t\t\t\tlet line = this.newLine();\n\t\t\t\t\t\t\tlet imageElement = document.createElement('img');\n\t\t\t\t\t\t\timageElement.className = 'chat-image no-text';\n\t\t\t\t\t\t\timageElement.src = imagePush.url;\n\t\t\t\t\t\t\timageElement.dataset.imgId = imagePush.fileId;\n\t\t\t\t\t\t\tline.appendChild(imageElement);\n\t\t\t\t\t\t\tlet after = document.createTextNode('\\u00A0');\n\t\t\t\t\t\t\tline.appendChild(after);\n\t\t\t\t\t\t\tthis.selectElement(after, 1);\t\t\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet asFile = items[i].getAsFile();\n\t\t\t\t\t\t\tif (!asFile) {\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet filePush = { fileId: this.generateId(), file: asFile };\n\t\t\t\t\t\t\tthis.fileList[filePush.fileId] = (filePush)\n\t\t\t\t\t\t\tlet line = this.newLine();\n\t\t\t\t\t\t\tlet fileElement = this.createFile(filePush);\n\t\t\t\t\t\t\tline.appendChild(fileElement);\n\t\t\t\t\t\t\tlet after = document.createTextNode('\\u00A0');\n\t\t\t\t\t\t\tline.appendChild(after);\n\t\t\t\t\t\t\tthis.selectElement(after, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\trange.collapse();\n\t\t\t},\n\t\t\tselectElement(element, endOffset) {\n\t\t\t\tlet selection = window.getSelection();\n\t\t\t\t// 插入元素可能不是立即执行的，vue可能会在插入元素后再更新dom\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tlet t1 = document.createRange();\n\t\t\t\t\tt1.setStart(element, 0);\n\t\t\t\t\tt1.setEnd(element, endOffset || 0);\n\t\t\t\t\tif (element.firstChild) {\n\t\t\t\t\t\tt1.selectNodeContents(element.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tt1.collapse();\n\t\t\t\t\tselection.removeAllRanges();\n\t\t\t\t\tselection.addRange(t1);\n\t\t\t\t\t// 需要时自动聚焦\n\t\t\t\t\tif (element.focus) {\n\t\t\t\t\t\telement.focus();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tonCompositionEnd(e) {\n\t\t\t\tthis.compositionFlag = false;\n\t\t\t\tthis.onEditorInput(e);\n\t\t\t},\n\t\t\tonKeydown(e) {\n\t\t\t\tif (e.keyCode === 13) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tif (this.atIng) {\n\t\t\t\t\t\tconsole.log('选中at的人')\n\t\t\t\t\t\tthis.$refs.atBox.select();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.ctrlKey) {\n\t\t\t\t\t\tlet line = this.newLine();\n\t\t\t\t\t\tlet after = document.createTextNode('\\u00A0');\n\t\t\t\t\t\tline.appendChild(after);\n\t\t\t\t\t\tthis.selectElement(line.childNodes[0], 0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 中文输入标记\n\t\t\t\t\t\tif (this.compositionFlag) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.submit();\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 删除键\n\t\t\t\tif (e.keyCode === 8) {\n\t\t\t\t\tconsole.log(\"delete\")\n\t\t\t\t\t// 等待dom更新\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tlet s = this.$refs.content.innerHTML.trim();\n\t\t\t\t\t\t// 空dom时，需要刷新dom\n\t\t\t\t\t\tconsole.log(s);\n\t\t\t\t\t\tif (s === '' || s === '<br>' || s === '<div>&nbsp;</div>' ) {\n\t\t\t\t\t\t\t// 拼接随机长度的空格，以刷新dom\n\t\t\t\t\t\t\tthis.empty();\n\t\t\t\t\t\t\tthis.isEmpty = true;\n\t\t\t\t\t\t\tthis.selectElement(this.$refs.content);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.isEmpty = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// at框打开时，上下键移动特殊处理\n\t\t\t\tif (this.atIng) {\n\t\t\t\t\tif (e.keyCode === 38) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tthis.$refs.atBox.moveUp();\n\t\t\t\t\t}\n\t\t\t\t\tif (e.keyCode === 40) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tthis.$refs.atBox.moveDown();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tonAtSelect(member) {\n\t\t\t\tthis.atIng = false;\n\t\t\t\t// 选中输入的 @xx 符\n\t\t\t\tlet blurRange = this.blurRange;\n\t\t\t\tlet endContainer = blurRange.endContainer\n\t\t\t\tlet startOffset = endContainer.data.indexOf(\"@\"+this.atSearchText);\n\t\t\t\tlet endOffset = startOffset + this.atSearchText.length + 1;\n\t\t\t\tblurRange.setStart(blurRange.endContainer, startOffset);\n\t\t\t\tblurRange.setEnd(blurRange.endContainer,  endOffset);\n\t\t\t\tblurRange.deleteContents()\n\t\t\t\tblurRange.collapse();\n\t\t\t\tconsole.log(\"onAtSelect\")\n\t\t\t\tthis.focus();\n\t\t\t\t// 创建元素节点\n\t\t\t\tlet element = document.createElement('SPAN')\n\t\t\t\telement.className = \"chat-at-user\";\n\t\t\t\telement.dataset.id = member.userId;\n\t\t\t\telement.contentEditable = 'false'\n\t\t\t\telement.innerText = `@${member.showNickName}`\n\t\t\t\tblurRange.insertNode(element)\n\t\t\t\t// 光标移动到末尾\n\t\t\t\tblurRange.collapse()\n\n\t\t\t\t// 插入空格\n\t\t\t\tlet textNode = document.createTextNode('\\u00A0');\n\t\t\t\tblurRange.insertNode(textNode);\n\n\t\t\t\tblurRange.collapse()\n\t\t\t\tthis.atSearchText = \"\";\n\t\t\t\tthis.selectElement(textNode, 1);\n\t\t\t},\n\t\t\tonEditorInput(e) {\n\t\t\t\tthis.isEmpty = false;\n\t\t\t\tthis.changeStored = false;\n\t\t\t\tif (this.$props.groupMembers && !this.compositionFlag) {\n\t\t\t\t\tlet selection = window.getSelection()\n\t\t\t\t\tlet range = selection.getRangeAt(0);\n\t\t\t\t\t// 截取@后面的名称作为过滤条件，并以空格结束\n\t\t\t\t\tlet endContainer = range.endContainer;\n\t\t\t\t\tlet endOffset = range.endOffset;\n\t\t\t\t\tlet textContent = endContainer.textContent;\n\t\t\t\t\tlet startIndex = -1;\n\t\t\t\t\tfor (let i = endOffset; i >= 0; i--) {\n\t\t\t\t\t\tif (textContent[i] === '@') {\n\t\t\t\t\t\t\tstartIndex = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// 没有at符号，则关闭弹窗\n\t\t\t\t\tif (startIndex === -1) {\n\t\t\t\t\t\tthis.$refs.atBox.close();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet endIndex = endOffset;\n\t\t\t\t\tfor (let i = endOffset; i < textContent.length; i++) {\n\t\t\t\t\t\tif (textContent[i] === ' ') {\n\t\t\t\t\t\t\tendIndex = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.atSearchText = textContent.substring(startIndex + 1, endIndex).trim();\n\t\t\t\t\t// 打开选择弹窗\n\t\t\t\t\tif (this.atSearchText == '') {\n\t\t\t\t\t\tthis.showAtBox(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t},\n\t\t\tonBlur(e) {\n\t\t\t\tthis.updateRange();\n\t\t\t\t\n\t\t\t},\n\t\t\tonMousedown() {\n\t\t\t\tif (this.atIng) {\n\t\t\t\t\tthis.$refs.atBox.close();\n\t\t\t\t\tthis.atIng = false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tinsertEmoji(emojiText) {\n\t\t\t\tlet emojiElement = document.createElement('img');\n\t\t\t\temojiElement.className = 'chat-emoji no-text';\n\t\t\t\temojiElement.dataset.emojiCode = emojiText;\n\t\t\t\temojiElement.src = this.$emo.textToUrl(emojiText);\n\n\t\t\t\tlet blurRange = this.blurRange;\n\t\t\t\tif (!blurRange) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\tthis.updateRange();\n\t\t\t\t\tblurRange = this.blurRange;\n\t\t\t\t}\n\t\t\t\tif (blurRange.startContainer !== blurRange.endContainer || blurRange.startOffset !== blurRange.endOffset) {\n\t\t\t\t\tblurRange.deleteContents();\n\t\t\t\t}\n\t\t\t\tblurRange.insertNode(emojiElement);\n\t\t\t\tblurRange.collapse()\n\n\t\t\t\tlet textNode = document.createTextNode('\\u00A0');\n\t\t\t\tblurRange.insertNode(textNode)\n\t\t\t\tblurRange.collapse()\n\n\t\t\t\tthis.selectElement(textNode);\n\t\t\t\tthis.updateRange();\n\t\t\t\tthis.isEmpty = false;\n\t\t\t},\n\t\t\tgenerateId() {\n\t\t\t\treturn this.currentId++;\n\t\t\t},\n\t\t\tcreateFile(filePush) {\n\t\t\t\tlet file = filePush.file;\n\t\t\t\tlet fileId = filePush.fileId;\n\t\t\t\tlet container = document.createElement('div');\n\t\t\t\tcontainer.className = 'chat-file-container no-text';\n\t\t\t\tcontainer.contentEditable = 'false';\n\t\t\t\tcontainer.dataset.fileId = fileId;\n\n\t\t\t\tlet left = document.createElement('div');\n\t\t\t\tleft.className = 'file-position-left';\n\t\t\t\tcontainer.appendChild(left);\n\n\t\t\t\tlet icon = document.createElement('div');\n\t\t\t\ticon.className = 'el-icon-document';\n\t\t\t\tleft.appendChild(icon);\n\n\t\t\t\tlet right = document.createElement('div');\n\t\t\t\tright.className = 'file-position-right';\n\t\t\t\tcontainer.appendChild(right);\n\n\t\t\t\tlet fileName = document.createElement('div');\n\t\t\t\tfileName.className = 'file-name';\n\t\t\t\tfileName.innerText = file.name;\n\n\t\t\t\tlet fileSize = document.createElement('div');\n\t\t\t\tfileSize.className = 'file-size';\n\t\t\t\tfileSize.innerText = this.sizeConvert(file.size);\n\n\t\t\t\tright.appendChild(fileName);\n\t\t\t\tright.appendChild(fileSize);\n\n\t\t\t\treturn container;\n\t\t\t},\n\t\t\tsizeConvert(len) {\n\t\t\t\tif (len < 1024) {\n\t\t\t\t\treturn len + 'B';\n\t\t\t\t} else if (len < 1024 * 1024) {\n\t\t\t\t\treturn (len / 1024).toFixed(2) + 'KB';\n\t\t\t\t} else if (len < 1024 * 1024 * 1024) {\n\t\t\t\t\treturn (len / 1024 / 1024).toFixed(2) + 'MB';\n\t\t\t\t} else {\n\t\t\t\t\treturn (len / 1024 / 1024 / 1024).toFixed(2) + 'GB';\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdateRange() {\n\t\t\t\tlet selection = window.getSelection();\n\t\t\t\tthis.blurRange = selection.getRangeAt(0);\n\t\t\t},\n\t\t\tnewLine() {\n\t\t\t\tlet selection = window.getSelection();\n\t\t\t\tlet range = selection.getRangeAt(0);\n\t\t\t\tlet divElement = document.createElement('div');\n\t\t\t\tlet endContainer = range.endContainer;\n\t\t\t\tlet parentElement = endContainer.parentElement;\n\t\t\t\tif (parentElement.parentElement === this.$refs.content) {\n\t\t\t\t\tdivElement.innerHTML  = endContainer.textContent.substring(range.endOffset).trim(); \n\t\t\t\t\tendContainer.textContent = endContainer.textContent.substring(0, range.endOffset);\n\t\t\t\t\t// 插入到当前div（当前行）后面\n\t\t\t\t\tparentElement.insertAdjacentElement('afterend', divElement);\n\t\t\t\t} else {\n\t\t\t\t\tdivElement.innerHTML = '';\n\t\t\t\t\tthis.$refs.content.append(divElement);\n\t\t\t\t}\n\t\t\t\treturn divElement;\n\t\t\t},\n\t\t\tclear() {\n\t\t\t\tthis.empty();\n\t\t\t\tthis.imageList = [];\n\t\t\t\tthis.fileList = [];\n\t\t\t},\n\t\t\tempty() {\n\t\t\t\tthis.$refs.content.innerHTML = \"\";\n\t\t\t\tlet line = this.newLine();\n\t\t\t\tlet after = document.createTextNode('\\u00A0');\n\t\t\t\tline.appendChild(after);\n\t\t\t\tthis.$nextTick(()=>this.selectElement(after));\n\t\t\t},\n\t\t\tshowAtBox(e) {\n\t\t\t\tthis.atIng = true;\n\t\t\t\t// show之后会自动更新当前搜索的text\n\t\t\t\t// this.atSearchText = \"\";\n\t\t\t\tlet selection = window.getSelection()\n\t\t\t\tlet range = selection.getRangeAt(0)\n\t\t\t\t// 光标所在坐标\n\t\t\t\tlet pos = range.getBoundingClientRect();\n\t\t\t\tthis.$refs.atBox.open({\n\t\t\t\t\tx: pos.x,\n\t\t\t\t\ty: pos.y\n\t\t\t\t})\n\t\t\t\t// 记录光标所在位置\n\t\t\t\tthis.updateRange();\n\t\t\t},\n\t\t\thtml2Escape(strHtml) {\n\t\t\t\treturn strHtml.replace(/[<>&\"]/g, function(c) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t'<': '&lt;',\n\t\t\t\t\t\t'>': '&gt;',\n\t\t\t\t\t\t'&': '&amp;',\n\t\t\t\t\t\t'\"': '&quot;'\n\t\t\t\t\t} [c];\n\t\t\t\t});\n\t\t\t},\n\t\t\tsubmit() {\n\t\t\t\tlet nodes = this.$refs.content.childNodes;\n\t\t\t\tlet fullList = [];\n\t\t\t\tlet tempText = '';\n\t\t\t\tlet atUserIds = [];\n\t\t\t\tlet each = (nodes) => {\n\t\t\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\t\t\tlet node = nodes[i];\n\t\t\t\t\t\tif (!node) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (node.nodeType === 3) {\n\t\t\t\t\t\t\ttempText += this.html2Escape(node.textContent);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet nodeName = node.nodeName.toLowerCase();\n\t\t\t\t\t\tif (nodeName === 'script') {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet text = tempText.trim();\n\t\t\t\t\t\tif (nodeName === 'img') {\n\t\t\t\t\t\t\tlet imgId = node.dataset.imgId;\n\t\t\t\t\t\t\tif (imgId) {\n\t\t\t\t\t\t\t\tif (text) {\n\t\t\t\t\t\t\t\t\tfullList.push({\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\tcontent: text,\n\t\t\t\t\t\t\t\t\t\tatUserIds: atUserIds\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\ttempText = '';\n\t\t\t\t\t\t\t\t\tatUserIds = []\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfullList.push({\n\t\t\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\t\t\tcontent: this.imageList[imgId]\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet emojiCode = node.dataset.emojiCode;\n\t\t\t\t\t\t\t\ttempText += emojiCode;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (nodeName === 'div') {\n\t\t\t\t\t\t\tlet fileId = node.dataset.fileId\n\t\t\t\t\t\t\t// 文件\n\t\t\t\t\t\t\tif (fileId) {\n\t\t\t\t\t\t\t\tif (text) {\n\t\t\t\t\t\t\t\t\tfullList.push({\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t\tcontent: text,\n\t\t\t\t\t\t\t\t\t\tatUserIds: atUserIds\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\ttempText = '';\n\t\t\t\t\t\t\t\t\tatUserIds = []\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tfullList.push({\n\t\t\t\t\t\t\t\t\ttype: 'file',\n\t\t\t\t\t\t\t\t\tcontent: this.fileList[fileId]\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttempText += '\\n';\n\t\t\t\t\t\t\t\teach(node.childNodes);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (nodeName === 'span') {\n\t\t\t\t\t\t\tif(node.dataset.id){\n\t\t\t\t\t\t\t\ttempText += node.innerHTML;\n\t\t\t\t\t\t\t\tatUserIds.push(node.dataset.id)\n\t\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\t\ttempText += node.outerHtml;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\teach(nodes)\n\t\t\t\tlet text = tempText.trim();\n\t\t\t\tif (text !== '') {\n\t\t\t\t\tfullList.push({\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tcontent: text,\n\t\t\t\t\t\tatUserIds: atUserIds\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.$emit('submit', fullList);\n\t\t\t},\n\t\t\tfocus() {\n\t\t\t\tthis.$refs.content.focus();\n\t\t\t}\n\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.chat-input-area {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tposition: relative;\n\n\t\t.edit-chat-container {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t\tborder: 1px solid #c3c3c3;\n\t\t\toutline: none;\n\t\t\tpadding: 5px;\n\t\t\tline-height: 30px;\n\t\t\tfont-size: 16px;\n\t\t\ttext-align: left;\n\t\t\toverflow-y: scroll;\n\n\t\t\t// 单独一行时，无法在前面输入的bug\n\t\t\t>div:before {\n\t\t\t\tcontent: \"\\00a0\";\n\t\t\t\tfont-size: 14px;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t}\n\n\t\t\t.chat-image {\n\t\t\t\tdisplay: block;\n\t\t\t\tmax-width: 200px;\n\t\t\t\tmax-height: 100px;\n\t\t\t\tborder: 1px solid #e6e6e6;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\n\t\t\t.chat-emoji {\n\t\t\t\twidth: 30px;\n\t\t\t\theight: 30px;\n\t\t\t\tvertical-align: top;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\n\t\t\t.chat-file-container {\n\t\t\t\tmax-width: 65%;\n\t\t\t\tpadding: 10px;\n\t\t\t\tborder: 2px solid #587ff0;\n\t\t\t\tdisplay: flex;\n\t\t\t\tbackground: #eeeC;\n\t\t\t\tborder-radius: 10px;\n\n\t\t\t\t.file-position-left {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\twidth: 80px;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t.el-icon-document {\n\t\t\t\t\t\tfont-size: 40px;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tcolor: #d42e07;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.file-position-right {\n\t\t\t\t\tflex: 1;\n\n\t\t\t\t\t.file-name {\n\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\tcolor: #66b1ff;\n\t\t\t\t\t}\n\n\t\t\t\t\t.file-size {\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\tcolor: black;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.chat-at-user {\n\t\t\t\tcolor: #00f;\n\t\t\t\tfont-weight: 600;\n\n\t\t\t\tborder-radius: 3px;\n\t\t\t}\n\t\t}\n\n\t\t.edit-chat-container>div:nth-of-type(1):after {\n\t\t\tcontent: '请输入消息（按Ctrl+Enter键换行）';\n\t\t\tcolor: gray;\n\t\t}\n\n\t\t.edit-chat-container.not-empty>div:nth-of-type(1):after {\n\t\t\tcontent: none;\n\t\t}\n\n\t}\n</style>"],"mappings":"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","ignoreList":[]}]}