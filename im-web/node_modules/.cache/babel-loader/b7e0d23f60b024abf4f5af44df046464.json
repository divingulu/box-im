{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js!/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/components/chat/ChatAtBox.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/d/github/box-im/im-web/src/components/chat/ChatAtBox.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/babel.config.js","mtime":1727013808912},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js","mtime":1727014166227},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBDaGF0R3JvdXBNZW1iZXIgZnJvbSAiLi9DaGF0R3JvdXBNZW1iZXIudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjaGF0QXRCb3giLAogIGNvbXBvbmVudHM6IHsKICAgIENoYXRHcm91cE1lbWJlcgogIH0sCiAgcHJvcHM6IHsKICAgIHNlYXJjaFRleHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIG93bmVySWQ6IHsKICAgICAgdHlwZTogTnVtYmVyCiAgICB9LAogICAgbWVtYmVyczogewogICAgICB0eXBlOiBBcnJheQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3c6IGZhbHNlLAogICAgICBwb3M6IHsKICAgICAgICB4OiAwLAogICAgICAgIHk6IDAKICAgICAgfSwKICAgICAgYWN0aXZlSWR4OiAwLAogICAgICBzaG93TWVtYmVyczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0KCkgewogICAgICB0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA9IDA7CiAgICAgIHRoaXMuc2hvd01lbWJlcnMgPSBbXTsKICAgICAgbGV0IHVzZXJJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZDsKICAgICAgbGV0IG5hbWUgPSAi5YWo5L2T5oiQ5ZGYIjsKICAgICAgaWYgKHRoaXMub3duZXJJZCA9PSB1c2VySWQgJiYgbmFtZS5zdGFydHNXaXRoKHRoaXMuc2VhcmNoVGV4dCkpIHsKICAgICAgICB0aGlzLnNob3dNZW1iZXJzLnB1c2goewogICAgICAgICAgdXNlcklkOiAtMSwKICAgICAgICAgIHNob3dOaWNrTmFtZTogbmFtZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMubWVtYmVycy5mb3JFYWNoKG0gPT4gewogICAgICAgIGlmIChtLnVzZXJJZCAhPSB1c2VySWQgJiYgIW0ucXVpdCAmJiBtLnNob3dOaWNrTmFtZS5zdGFydHNXaXRoKHRoaXMuc2VhcmNoVGV4dCkpIHsKICAgICAgICAgIHRoaXMuc2hvd01lbWJlcnMucHVzaChtKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmFjdGl2ZUlkeCA9IHRoaXMuc2hvd01lbWJlcnMubGVuZ3RoID4gMCA/IDAgOiAtMTsKICAgIH0sCiAgICBvcGVuKHBvcykgewogICAgICB0aGlzLnNob3cgPSB0cnVlOwogICAgICB0aGlzLnBvcyA9IHBvczsKICAgICAgdGhpcy5pbml0KCk7CiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuc2hvdyA9IGZhbHNlOwogICAgfSwKICAgIG1vdmVVcCgpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlSWR4ID4gMCkgewogICAgICAgIHRoaXMuYWN0aXZlSWR4LS07CiAgICAgICAgdGhpcy5zY3JvbGxUb0FjdGl2ZSgpOwogICAgICB9CiAgICB9LAogICAgbW92ZURvd24oKSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZUlkeCA8IHRoaXMuc2hvd01lbWJlcnMubGVuZ3RoIC0gMSkgewogICAgICAgIHRoaXMuYWN0aXZlSWR4Kys7CiAgICAgICAgdGhpcy5zY3JvbGxUb0FjdGl2ZSgpOwogICAgICB9CiAgICB9LAogICAgc2VsZWN0KCkgewogICAgICBpZiAodGhpcy5hY3RpdmVJZHggPj0gMCkgewogICAgICAgIHRoaXMub25TZWxlY3RNZW1iZXIodGhpcy5zaG93TWVtYmVyc1t0aGlzLmFjdGl2ZUlkeF0pOwogICAgICB9CiAgICAgIHRoaXMuY2xvc2UoKTsKICAgIH0sCiAgICBzY3JvbGxUb0FjdGl2ZSgpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlSWR4ICogMzUgLSB0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLmNsaWVudEhlaWdodCA+IHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wKSB7CiAgICAgICAgdGhpcy4kcmVmcy5zY3JvbGxCb3gud3JhcC5zY3JvbGxUb3AgKz0gMTQwOwogICAgICAgIGlmICh0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA+IHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsSGVpZ2h0KSB7CiAgICAgICAgICB0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA9IHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsSGVpZ2h0OwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5hY3RpdmVJZHggKiAzNSA8IHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wKSB7CiAgICAgICAgdGhpcy4kcmVmcy5zY3JvbGxCb3gud3JhcC5zY3JvbGxUb3AgLT0gMTQwOwogICAgICAgIGlmICh0aGlzLiRyZWZzLnNjcm9sbEJveC53cmFwLnNjcm9sbFRvcCA8IDApIHsKICAgICAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsQm94LndyYXAuc2Nyb2xsVG9wID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvblNlbGVjdE1lbWJlcihtZW1iZXIpIHsKICAgICAgdGhpcy4kZW1pdCgic2VsZWN0IiwgbWVtYmVyKTsKICAgICAgdGhpcy5zaG93ID0gZmFsc2U7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNPd25lcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJTdG9yZS51c2VySW5mby5pZCA9PSB0aGlzLm93bmVySWQ7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoVGV4dDogewogICAgICBoYW5kbGVyKG5ld1RleHQsIG9sZFRleHQpIHsKICAgICAgICB0aGlzLmluaXQoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["ChatGroupMember","name","components","props","searchText","type","String","default","ownerId","Number","members","Array","data","show","pos","x","y","activeIdx","showMembers","methods","init","$refs","scrollBox","wrap","scrollTop","userId","$store","state","userStore","userInfo","id","startsWith","push","showNickName","forEach","m","quit","length","open","close","moveUp","scrollToActive","moveDown","select","onSelectMember","clientHeight","scrollHeight","member","$emit","computed","isOwner","watch","handler","newText","oldText"],"sources":["src/components/chat/ChatAtBox.vue"],"sourcesContent":["<template>\n\t<el-scrollbar v-show=\"show&&showMembers.length\" ref=\"scrollBox\" class=\"group-member-choose\"\n\t\t:style=\"{'left':pos.x+'px','top':pos.y-300+'px'}\">\n\t\t<div v-for=\"(member,idx) in showMembers\" :key=\"member.id\">\n\t\t\t<chat-group-member :member=\"member\" :height=\"40\" :active='activeIdx==idx'\n\t\t\t@click.native=\"onSelectMember(member)\"></chat-group-member>\n\t\t</div>\n\t</el-scrollbar>\n</template>\n\n<script>\n\timport ChatGroupMember from \"./ChatGroupMember.vue\";\n\texport default {\n\t\tname: \"chatAtBox\",\n\t\tcomponents: {\n\t\t\tChatGroupMember\n\t\t},\n\t\tprops: {\n\t\t\tsearchText: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\townerId: {\n\t\t\t\ttype: Number,\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\ttype: Array\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshow: false,\n\t\t\t\tpos: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\tactiveIdx: 0,\n\t\t\t\tshowMembers: []\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tinit() {\n\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\tthis.showMembers = [];\n\t\t\t\tlet userId = this.$store.state.userStore.userInfo.id;\n\t\t\t\tlet name = \"全体成员\";\n\t\t\t\tif (this.ownerId == userId && name.startsWith(this.searchText)) {\n\t\t\t\t\tthis.showMembers.push({\n\t\t\t\t\t\tuserId: -1,\n\t\t\t\t\t\tshowNickName: name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.members.forEach((m) => {\n\t\t\t\t\tif (m.userId != userId && !m.quit && m.showNickName.startsWith(this.searchText)) {\n\t\t\t\t\t\tthis.showMembers.push(m);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.activeIdx = this.showMembers.length > 0 ? 0: -1;\n\t\t\t},\n\t\t\topen(pos) {\n\t\t\t\tthis.show = true;\n\t\t\t\tthis.pos = pos;\n\t\t\t\tthis.init();\n\t\t\t},\n\t\t\tclose() {\n\t\t\t\tthis.show = false;\n\t\t\t},\n\t\t\tmoveUp() {\n\t\t\t\tif (this.activeIdx > 0) {\n\t\t\t\t\tthis.activeIdx--;\n\t\t\t\t\tthis.scrollToActive()\n\t\t\t\t}\n\t\t\t},\n\t\t\tmoveDown() {\n\t\t\t\tif (this.activeIdx < this.showMembers.length - 1) {\n\t\t\t\t\tthis.activeIdx++;\n\t\t\t\t\tthis.scrollToActive()\n\t\t\t\t}\n\t\t\t},\n\t\t\tselect() {\n\t\t\t\tif (this.activeIdx >= 0) {\n\t\t\t\t\tthis.onSelectMember(this.showMembers[this.activeIdx])\n\t\t\t\t}\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\tscrollToActive() {\n\t\t\t\tif (this.activeIdx * 35 - this.$refs.scrollBox.wrap.clientHeight > this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop += 140;\n\t\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop > this.$refs.scrollBox.wrap.scrollHeight) {\n\t\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = this.$refs.scrollBox.wrap.scrollHeight\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.activeIdx * 35 < this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop -= 140;\n\t\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop < 0) {\n\t\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSelectMember(member) {\n\t\t\t\tthis.$emit(\"select\", member);\n\t\t\t\tthis.show = false;\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisOwner() {\n\t\t\t\treturn this.$store.state.userStore.userInfo.id == this.ownerId;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tsearchText: {\n\t\t\t\thandler(newText, oldText) {\n\t\t\t\t\tthis.init();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t.group-member-choose {\n\t\tposition: fixed;\n\t\twidth: 200px;\n\t\theight: 300px;\n\t\tborder: 1px solid #53a0e79c;\n\t\tborder-radius: 5px;\n\t\tbackground-color: #f5f5f5;\n\t\tbox-shadow: 0px 0px 10px #ccc;\n\t}\n</style>"],"mappings":"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","ignoreList":[]}]}