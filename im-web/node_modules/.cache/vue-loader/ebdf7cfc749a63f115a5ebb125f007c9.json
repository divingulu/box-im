{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/view/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/d/github/box-im/im-web/src/view/Login.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js","mtime":1727014166227},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgSWNwIGZyb20gJy4uL2NvbXBvbmVudHMvY29tbW9uL0ljcC52dWUnCglleHBvcnQgZGVmYXVsdCB7CgkJbmFtZTogImxvZ2luIiwKCQljb21wb25lbnRzOiB7CgkJCUljcAoJCX0sCgkJZGF0YSgpIHsKCQkJdmFyIGNoZWNrVXNlcm5hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CgkJCQlpZiAoIXZhbHVlKSB7CgkJCQkJcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl55So5oi35ZCNJykpOwoJCQkJfQoJCQkJY2FsbGJhY2soKTsKCQkJfTsKCQkJdmFyIGNoZWNrUGFzc3dvcmQgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CgkJCQlpZiAodmFsdWUgPT09ICcnKSB7CgkJCQkJY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXlr4bnoIEnKSk7CgkJCQl9CgkJCQljYWxsYmFjaygpOwoKCQkJfTsKCQkJcmV0dXJuIHsKCQkJCWxvZ2luRm9ybTogewoJCQkJCXRlcm1pbmFsOiB0aGlzLiRlbnVtcy5URVJNSU5BTF9UWVBFLldFQiwKCQkJCQl1c2VyTmFtZTogJycsCgkJCQkJcGFzc3dvcmQ6ICcnCgkJCQl9LAoJCQkJcnVsZXM6IHsKCQkJCQl1c2VyTmFtZTogW3sKCQkJCQkJdmFsaWRhdG9yOiBjaGVja1VzZXJuYW1lLAoJCQkJCQl0cmlnZ2VyOiAnYmx1cicKCQkJCQl9XSwKCQkJCQlwYXNzd29yZDogW3sKCQkJCQkJdmFsaWRhdG9yOiBjaGVja1Bhc3N3b3JkLAoJCQkJCQl0cmlnZ2VyOiAnYmx1cicKCQkJCQl9XQoJCQkJfQoJCQl9OwoJCX0sCgkJbWV0aG9kczogewoJCQlzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CgkJCQl0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKCQkJCQlpZiAodmFsaWQpIHsKCQkJCQkJdGhpcy4kaHR0cCh7CgkJCQkJCQkJdXJsOiAiL2xvZ2luIiwKCQkJCQkJCQltZXRob2Q6ICdwb3N0JywKCQkJCQkJCQlkYXRhOiB0aGlzLmxvZ2luRm9ybQoJCQkJCQkJfSkKCQkJCQkJCS50aGVuKChkYXRhKSA9PiB7CgkJCQkJCQkJLy8g5L+d5a2Y5a+G56CB5YiwY29va2llKOS4jeWuieWFqCkKCQkJCQkJCQl0aGlzLnNldENvb2tpZSgndXNlcm5hbWUnLCB0aGlzLmxvZ2luRm9ybS51c2VyTmFtZSk7CgkJCQkJCQkJdGhpcy5zZXRDb29raWUoJ3Bhc3N3b3JkJywgdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQpOwoJCQkJCQkJCS8vIOS/neWtmHRva2VuCgkJCQkJCQkJc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYWNjZXNzVG9rZW4iLCBkYXRhLmFjY2Vzc1Rva2VuKTsKCQkJCQkJCQlzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJyZWZyZXNoVG9rZW4iLCBkYXRhLnJlZnJlc2hUb2tlbik7CgkJCQkJCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLnmbvpmYbmiJDlip8iKTsKCQkJCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCgiL2hvbWUvY2hhdCIpOwoJCQkJCQkJfSkKCgkJCQkJfQoJCQkJfSk7CgkJCX0sCgkJCXJlc2V0Rm9ybShmb3JtTmFtZSkgewoJCQkJdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsKCQkJfSwKCQkJLy8g6I635Y+WY29va2ll44CBCgkJCWdldENvb2tpZShuYW1lKSB7CgkJCQlsZXQgcmVnID0gbmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZSArICI9KFteO10qKSg7fCQpIik7CgkJCQlsZXQgYXJyID0gZG9jdW1lbnQuY29va2llLm1hdGNoKHJlZykKCQkJCWlmIChhcnIpIHsKCQkJCQlyZXR1cm4gdW5lc2NhcGUoYXJyWzJdKTsKCQkJCX0KCQkJCXJldHVybiAnJzsKCQkJfSwKCQkJLy8g6K6+572uY29va2llLOWinuWKoOWIsHZ1ZeWunuS+i+aWueS+v+WFqOWxgOiwg+eUqAoJCQlzZXRDb29raWUobmFtZSwgdmFsdWUsIGV4cGlyZWRheXMpIHsKCQkJCXZhciBleGRhdGUgPSBuZXcgRGF0ZSgpOwoJCQkJZXhkYXRlLnNldERhdGUoZXhkYXRlLmdldERhdGUoKSArIGV4cGlyZWRheXMpOwoJCQkJZG9jdW1lbnQuY29va2llID0gbmFtZSArICI9IiArIGVzY2FwZSh2YWx1ZSkgKyAoKGV4cGlyZWRheXMgPT0gbnVsbCkgPyAiIiA6ICI7ZXhwaXJlcz0iICsgZXhkYXRlCgkJCQkJLnRvR01UU3RyaW5nKCkpOwoJCQl9LAoJCQkvLyDliKDpmaRjb29raWUKCQkJZGVsQ29va2llKG5hbWUpIHsKCQkJCXZhciBleHAgPSBuZXcgRGF0ZSgpOwoJCQkJZXhwLnNldFRpbWUoZXhwLmdldFRpbWUoKSAtIDEpOwoJCQkJdmFyIGN2YWwgPSB0aGlzLmdldENvb2tpZShuYW1lKTsKCQkJCWlmIChjdmFsICE9IG51bGwpIHsKCQkJCQlkb2N1bWVudC5jb29raWUgPSBuYW1lICsgIj0iICsgY3ZhbCArICI7ZXhwaXJlcz0iICsgZXhwLnRvR01UU3RyaW5nKCk7CgkJCQl9CgkJCX0KCQl9LAoJCW1vdW50ZWQoKSB7CgkJCXRoaXMubG9naW5Gb3JtLnVzZXJOYW1lID0gdGhpcy5nZXRDb29raWUoInVzZXJuYW1lIik7CgkJCS8vIGNvb2tpZeWtmOWvhueggeW5tuS4jeWuieWFqO+8jOaaguaXtuaYr+S4uuS6huaWueS+vwoJCQl0aGlzLmxvZ2luRm9ybS5wYXNzd29yZCA9IHRoaXMuZ2V0Q29va2llKCJwYXNzd29yZCIpOwoJCX0KCX0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/view","sourcesContent":["<template>\n\t<div class=\"login-view\">\n\t\t<div class=\"login-content\">\n\t\t\t<div class=\"login-intro\">\n\t\t\t\t<div>\n\t\t\t\t\t<h3>盒子IM 3.0版本已上线(2024-08-04)：</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>后台管理端上线,后台管理代码仓库地址:https://gitee.com/bluexsx/box-im-admin</li>\n\t\t\t\t\t\t<li>框架和组件版本全面升级: jdk17、springboot3.3、node18等</li>\n\t\t\t\t\t\t<li>部分界面，功能、性能优化</li>\n\t\t\t\t\t\t<li>语雀详细文档:\n\t\t\t\t\t\t\t<a href=\"https://www.yuque.com/u1475064/mufu2a\" target=\"_blank\">盒子IM详细介绍文档</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>温馨提示：</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>在管理后台可以看到所有人的消息,请小伙伴们在测试时不要发送任何涉及自身隐私或机密信息,以避免信息泄露!</li>\n\t\t\t\t\t\t<li>音视频通话部分源码未开源，可付费获取:\n\t\t\t\t\t\t\t<a href=\"https://www.yuque.com/u1475064/mufu2a/vi7engzluty594s2\" target=\"_blank\">音视频源码购买说明</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<h3>如果本项目对您有帮助,请在Gitee上帮忙点亮star</h3>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"login-icons\">\n\t\t\t\t\t<a class=\"login-icon\">\n\t\t\t\t\t\t<img src=\"https://img.shields.io/badge/license-MIT-red\" />\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"login-icon\" href=\"https://gitee.com/bluexsx/box-im\" target=\"_blank\">\n\t\t\t\t\t\t<img src=\"https://gitee.com/bluexsx/box-im/badge/star.svg\" />\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class=\"login-icon\" href=\"https://github.com/bluexsx/box-im\" target=\"_blank\">\n\t\t\t\t\t\t<img src=\"https://img.shields.io/github/stars/bluexsx/box-im.svg?style=flat&logo=GitHub\" />\n\t\t\t\t\t</a>\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<el-form class=\"login-form\" :model=\"loginForm\" status-icon :rules=\"rules\" ref=\"loginForm\" label-width=\"60px\"\n\t\t\t\t@keyup.enter.native=\"submitForm('loginForm')\">\n\t\t\t\t<div class=\"login-brand\">登陆盒子IM</div>\n\t\t\t\t<el-form-item label=\"终端\" prop=\"userName\" v-show=\"false\">\n\t\t\t\t\t<el-input type=\"terminal\" v-model=\"loginForm.terminal\" autocomplete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"用户名\" prop=\"userName\">\n\t\t\t\t\t<el-input type=\"userName\" v-model=\"loginForm.userName\" autocomplete=\"off\"\n\t\t\t\t\t\tplaceholder=\"用户名\"></el-input>\n\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"密码\" prop=\"password\">\n\t\t\t\t\t<el-input type=\"password\" v-model=\"loginForm.password\" autocomplete=\"off\"\n\t\t\t\t\t\tplaceholder=\"密码\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('loginForm')\">登陆</el-button>\n\t\t\t\t\t<el-button @click=\"resetForm('loginForm')\">清空</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t\t<div class=\"register\">\n\t\t\t\t\t<router-link to=\"/register\">没有账号,前往注册</router-link>\n\t\t\t\t</div>\n\t\t\t</el-form>\n\t\t</div>\n\t\t<icp></icp>\n\t</div>\n\n</template>\n\n<script>\n\timport Icp from '../components/common/Icp.vue'\n\texport default {\n\t\tname: \"login\",\n\t\tcomponents: {\n\t\t\tIcp\n\t\t},\n\t\tdata() {\n\t\t\tvar checkUsername = (rule, value, callback) => {\n\t\t\t\tif (!value) {\n\t\t\t\t\treturn callback(new Error('请输入用户名'));\n\t\t\t\t}\n\t\t\t\tcallback();\n\t\t\t};\n\t\t\tvar checkPassword = (rule, value, callback) => {\n\t\t\t\tif (value === '') {\n\t\t\t\t\tcallback(new Error('请输入密码'));\n\t\t\t\t}\n\t\t\t\tcallback();\n\n\t\t\t};\n\t\t\treturn {\n\t\t\t\tloginForm: {\n\t\t\t\t\tterminal: this.$enums.TERMINAL_TYPE.WEB,\n\t\t\t\t\tuserName: '',\n\t\t\t\t\tpassword: ''\n\t\t\t\t},\n\t\t\t\trules: {\n\t\t\t\t\tuserName: [{\n\t\t\t\t\t\tvalidator: checkUsername,\n\t\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t\t}],\n\t\t\t\t\tpassword: [{\n\t\t\t\t\t\tvalidator: checkPassword,\n\t\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tsubmitForm(formName) {\n\t\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\t\turl: \"/login\",\n\t\t\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\t\t\tdata: this.loginForm\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\t\t// 保存密码到cookie(不安全)\n\t\t\t\t\t\t\t\tthis.setCookie('username', this.loginForm.userName);\n\t\t\t\t\t\t\t\tthis.setCookie('password', this.loginForm.password);\n\t\t\t\t\t\t\t\t// 保存token\n\t\t\t\t\t\t\t\tsessionStorage.setItem(\"accessToken\", data.accessToken);\n\t\t\t\t\t\t\t\tsessionStorage.setItem(\"refreshToken\", data.refreshToken);\n\t\t\t\t\t\t\t\tthis.$message.success(\"登陆成功\");\n\t\t\t\t\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tresetForm(formName) {\n\t\t\t\tthis.$refs[formName].resetFields();\n\t\t\t},\n\t\t\t// 获取cookie、\n\t\t\tgetCookie(name) {\n\t\t\t\tlet reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\n\t\t\t\tlet arr = document.cookie.match(reg)\n\t\t\t\tif (arr) {\n\t\t\t\t\treturn unescape(arr[2]);\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t},\n\t\t\t// 设置cookie,增加到vue实例方便全局调用\n\t\t\tsetCookie(name, value, expiredays) {\n\t\t\t\tvar exdate = new Date();\n\t\t\t\texdate.setDate(exdate.getDate() + expiredays);\n\t\t\t\tdocument.cookie = name + \"=\" + escape(value) + ((expiredays == null) ? \"\" : \";expires=\" + exdate\n\t\t\t\t\t.toGMTString());\n\t\t\t},\n\t\t\t// 删除cookie\n\t\t\tdelCookie(name) {\n\t\t\t\tvar exp = new Date();\n\t\t\t\texp.setTime(exp.getTime() - 1);\n\t\t\t\tvar cval = this.getCookie(name);\n\t\t\t\tif (cval != null) {\n\t\t\t\t\tdocument.cookie = name + \"=\" + cval + \";expires=\" + exp.toGMTString();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.loginForm.userName = this.getCookie(\"username\");\n\t\t\t// cookie存密码并不安全，暂时是为了方便\n\t\t\tthis.loginForm.password = this.getCookie(\"password\");\n\t\t}\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t.login-view {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: #E8F2FF;\n\t\tbackground-size: cover;\n\t\tbox-sizing: border-box;\n\n\n\t\t.login-content {\n\t\t\tposition: relative;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-around;\n\t\t\talign-items: center;\n\t\t\tpadding: 10%;\n\n\t\t\t.login-intro {\n\t\t\t\tflex: 1;\n\t\t\t\tpadding: 40px;\n\t\t\t\tmax-width: 600px;\n\n\t\t\t\t.login-title {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tfont-size: 30px;\n\t\t\t\t}\n\n\t\t\t\t.login-icons {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t.login-icon {\n\t\t\t\t\t\tpadding-left: 5px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.login-form {\n\t\t\t\theight: 340px;\n\t\t\t\twidth: 400px;\n\t\t\t\tpadding: 30px;\n\t\t\t\tbackground: white;\n\t\t\t\topacity: 0.9;\n\t\t\t\tbox-shadow: 0px 0px 1px #ccc;\n\t\t\t\tborder-radius: 3%;\n\t\t\t\toverflow: hidden;\n\t\t\t\tborder: 1px solid #ccc;\n\n\t\t\t\t.login-brand {\n\t\t\t\t\tline-height: 50px;\n\t\t\t\t\tmargin: 30px 0 40px 0;\n\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tletter-spacing: 2px;\n\t\t\t\t\ttext-transform: uppercase;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t}\n\n\t\t\t\t.register {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row-reverse;\n\t\t\t\t\tline-height: 40px;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tpadding-left: 20px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>"]}]}