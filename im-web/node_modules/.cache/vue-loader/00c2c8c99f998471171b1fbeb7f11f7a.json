{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/components/chat/ChatAtBox.vue?vue&type=style&index=0&id=35654b99&scoped=true&lang=scss","dependencies":[{"path":"/home/d/github/box-im/im-web/src/components/chat/ChatAtBox.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/node_modules/css-loader/dist/cjs.js","mtime":1727014164027},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1727014163855},{"path":"/home/d/github/box-im/im-web/node_modules/postcss-loader/src/index.js","mtime":1727014163867},{"path":"/home/d/github/box-im/im-web/node_modules/sass-loader/dist/cjs.js","mtime":1727014166331},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ncm91cC1tZW1iZXItY2hvb3NlIHsKCXBvc2l0aW9uOiBmaXhlZDsKCXdpZHRoOiAyMDBweDsKCWhlaWdodDogMzAwcHg7Cglib3JkZXI6IDFweCBzb2xpZCAjNTNhMGU3OWM7Cglib3JkZXItcmFkaXVzOiA1cHg7CgliYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1OwoJYm94LXNoYWRvdzogMHB4IDBweCAxMHB4ICNjY2M7Cn0K"},{"version":3,"sources":["ChatAtBox.vue"],"names":[],"mappings":";AAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatAtBox.vue","sourceRoot":"src/components/chat","sourcesContent":["<template>\n\t<el-scrollbar v-show=\"show&&showMembers.length\" ref=\"scrollBox\" class=\"group-member-choose\"\n\t\t:style=\"{'left':pos.x+'px','top':pos.y-300+'px'}\">\n\t\t<div v-for=\"(member,idx) in showMembers\" :key=\"member.id\">\n\t\t\t<chat-group-member :member=\"member\" :height=\"40\" :active='activeIdx==idx'\n\t\t\t@click.native=\"onSelectMember(member)\"></chat-group-member>\n\t\t</div>\n\t</el-scrollbar>\n</template>\n\n<script>\n\timport ChatGroupMember from \"./ChatGroupMember.vue\";\n\texport default {\n\t\tname: \"chatAtBox\",\n\t\tcomponents: {\n\t\t\tChatGroupMember\n\t\t},\n\t\tprops: {\n\t\t\tsearchText: {\n\t\t\t\ttype: String,\n\t\t\t\tdefault: \"\"\n\t\t\t},\n\t\t\townerId: {\n\t\t\t\ttype: Number,\n\t\t\t},\n\t\t\tmembers: {\n\t\t\t\ttype: Array\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshow: false,\n\t\t\t\tpos: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\tactiveIdx: 0,\n\t\t\t\tshowMembers: []\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tinit() {\n\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\tthis.showMembers = [];\n\t\t\t\tlet userId = this.$store.state.userStore.userInfo.id;\n\t\t\t\tlet name = \"全体成员\";\n\t\t\t\tif (this.ownerId == userId && name.startsWith(this.searchText)) {\n\t\t\t\t\tthis.showMembers.push({\n\t\t\t\t\t\tuserId: -1,\n\t\t\t\t\t\tshowNickName: name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.members.forEach((m) => {\n\t\t\t\t\tif (m.userId != userId && !m.quit && m.showNickName.startsWith(this.searchText)) {\n\t\t\t\t\t\tthis.showMembers.push(m);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tthis.activeIdx = this.showMembers.length > 0 ? 0: -1;\n\t\t\t},\n\t\t\topen(pos) {\n\t\t\t\tthis.show = true;\n\t\t\t\tthis.pos = pos;\n\t\t\t\tthis.init();\n\t\t\t},\n\t\t\tclose() {\n\t\t\t\tthis.show = false;\n\t\t\t},\n\t\t\tmoveUp() {\n\t\t\t\tif (this.activeIdx > 0) {\n\t\t\t\t\tthis.activeIdx--;\n\t\t\t\t\tthis.scrollToActive()\n\t\t\t\t}\n\t\t\t},\n\t\t\tmoveDown() {\n\t\t\t\tif (this.activeIdx < this.showMembers.length - 1) {\n\t\t\t\t\tthis.activeIdx++;\n\t\t\t\t\tthis.scrollToActive()\n\t\t\t\t}\n\t\t\t},\n\t\t\tselect() {\n\t\t\t\tif (this.activeIdx >= 0) {\n\t\t\t\t\tthis.onSelectMember(this.showMembers[this.activeIdx])\n\t\t\t\t}\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\tscrollToActive() {\n\t\t\t\tif (this.activeIdx * 35 - this.$refs.scrollBox.wrap.clientHeight > this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop += 140;\n\t\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop > this.$refs.scrollBox.wrap.scrollHeight) {\n\t\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = this.$refs.scrollBox.wrap.scrollHeight\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.activeIdx * 35 < this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop -= 140;\n\t\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop < 0) {\n\t\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSelectMember(member) {\n\t\t\t\tthis.$emit(\"select\", member);\n\t\t\t\tthis.show = false;\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tisOwner() {\n\t\t\t\treturn this.$store.state.userStore.userInfo.id == this.ownerId;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tsearchText: {\n\t\t\t\thandler(newText, oldText) {\n\t\t\t\t\tthis.init();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n</script>\n\n<style scoped lang=\"scss\">\n\t.group-member-choose {\n\t\tposition: fixed;\n\t\twidth: 200px;\n\t\theight: 300px;\n\t\tborder: 1px solid #53a0e79c;\n\t\tborder-radius: 5px;\n\t\tbackground-color: #f5f5f5;\n\t\tbox-shadow: 0px 0px 10px #ccc;\n\t}\n</style>"]}]}