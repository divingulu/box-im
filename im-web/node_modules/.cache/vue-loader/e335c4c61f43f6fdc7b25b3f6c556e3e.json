{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/components/chat/ChatGroupReaded.vue?vue&type=style&index=0&id=d9681b56&lang=scss","dependencies":[{"path":"/home/d/github/box-im/im-web/src/components/chat/ChatGroupReaded.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/node_modules/css-loader/dist/cjs.js","mtime":1727014164027},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1727014163855},{"path":"/home/d/github/box-im/im-web/node_modules/postcss-loader/src/index.js","mtime":1727014163867},{"path":"/home/d/github/box-im/im-web/node_modules/sass-loader/dist/cjs.js","mtime":1727014166331},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jaGF0LWdyb3VwLXJlYWRlZC1tYXNrIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7CiAgICByaWdodDogMDsKICAgIGJvdHRvbTogMDsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgei1pbmRleDogOTk5OTsKfQoKLmNoYXQtZ3JvdXAtcmVhZGVkIHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGJveC1zaGFkb3c6IDBweCAwcHggMTBweCAjY2NjOwogICAgd2lkdGg6IDMwMHB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKCiAgICAuc2Nyb2xsLWJveCB7CiAgICAgICAgaGVpZ2h0OiA0MDBweDsKICAgIH0KCiAgICAuYXJyb3ctbGVmdCB7CgogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICBsZWZ0OiAtMTVweDsKICAgICAgICB3aWR0aDogMDsKICAgICAgICBoZWlnaHQ6IDA7CiAgICAgICAgYm9yZGVyLXRvcDogMTVweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICBib3JkZXItYm90dG9tOiAxNXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAgIGJvcmRlci1yaWdodDogMTVweCBzb2xpZCAjY2NjOwoKICAgICAgICAuYXJyb3ctbGVmdC1pbm5lciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgdG9wOiAtMTJweDsKICAgICAgICAgICAgbGVmdDogM3B4OwogICAgICAgICAgICB3aWR0aDogMDsKICAgICAgICAgICAgaGVpZ2h0OiAwOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBib3JkZXItdG9wOiAxMnB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxMnB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAgICAgICBib3JkZXItcmlnaHQ6IDEycHggc29saWQgd2hpdGU7CiAgICAgICAgfQogICAgfQoKICAgIC5hcnJvdy1yaWdodCB7CiAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgIHJpZ2h0OiAtMTVweDsKICAgICAgICB3aWR0aDogMDsKICAgICAgICBoZWlnaHQ6IDA7CiAgICAgICAgYm9yZGVyLXRvcDogMTVweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICBib3JkZXItYm90dG9tOiAxNXB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAgIGJvcmRlci1sZWZ0OiAxNXB4IHNvbGlkICNjY2M7CgogICAgICAgIC5hcnJvdy1yaWdodC1pbm5lciB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgdG9wOiAtMTJweDsKICAgICAgICAgICAgcmlnaHQ6IDNweDsKICAgICAgICAgICAgd2lkdGg6IDA7CiAgICAgICAgICAgIGhlaWdodDogMDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgYm9yZGVyLXRvcDogMTJweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMTJweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDEycHggc29saWQgd2hpdGU7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["ChatGroupReaded.vue"],"names":[],"mappings":";AAuHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatGroupReaded.vue","sourceRoot":"src/components/chat","sourcesContent":["<template>\n    <div v-show=\"show\">\n        <div class=\"chat-group-readed-mask\" @click.self=\"close()\">\n            <div class=\"chat-group-readed\" :style=\"{ 'left': pos.x + 'px', 'top': pos.y + 'px' }\" @click.prevent=\"\">\n                <el-tabs type=\"border-card\" :stretch=\"true\">\n                    <el-tab-pane :label=\"`已读(${readedMembers.length})`\">\n                        <el-scrollbar class=\"scroll-box\">\n                            <div v-for=\"(member) in readedMembers\" :key=\"member.id\">\n                                <chat-group-member :member=\"member\"></chat-group-member>\n                            </div>\n                        </el-scrollbar>\n                    </el-tab-pane>\n                    <el-tab-pane :label=\"`未读(${unreadMembers.length})`\">\n                        <el-scrollbar class=\"scroll-box\">\n                            <div v-for=\"(member) in unreadMembers\" :key=\"member.id\">\n                                <chat-group-member :member=\"member\"></chat-group-member>\n                            </div>\n                        </el-scrollbar>\n                    </el-tab-pane>\n                </el-tabs>\n                <div v-show=\"msgInfo.selfSend\" class=\"arrow-right\" :style=\"{ 'top': pos.arrowY + 'px' }\">\n                    <div class=\"arrow-right-inner\">\n                    </div>\n                </div>\n                <div v-show=\"!msgInfo.selfSend\" class=\"arrow-left\" :style=\"{ 'top': pos.arrowY + 'px' }\">\n                    <div class=\"arrow-left-inner\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</template>\n\n\n<script>\nimport ChatGroupMember from \"./ChatGroupMember.vue\";\n\nexport default {\n    name: \"chatGroupReaded\",\n    components: {\n        ChatGroupMember\n    },\n    data() {\n        return {\n            show: false,\n            pos: {\n                x: 0,\n                y: 0,\n                arrowY: 0\n            },\n            readedMembers: [],\n            unreadMembers: []\n        }\n    },\n    props: {\n        groupMembers: {\n            type: Array\n        },\n\t\tmsgInfo: {\n\t\t\ttype: Object\n\t\t}\n    },\n    methods: {\n        close() {\n            this.show = false;\n        },\n        open(rect) {\n            this.show = true;\n            this.pos.arrowY = 200;\n            // 计算窗口位置\n            if (this.msgInfo.selfSend) {\n                // 自己发的消息弹出在消息的左边\n                this.pos.x = rect.left - 310;\n            } else {\n                // 别人发的消息弹窗在消息右边\n                this.pos.x = rect.right + 20;\n            }\n            this.pos.y = rect.top + rect.height / 2 - 215;\n            // 防止窗口溢出\n            if (this.pos.y < 0) {\n                this.pos.arrowY += this.pos.y\n                this.pos.y = 0;\n            }\n            this.loadReadedUser()\n        },\n        loadReadedUser() {\n            this.readedMembers = [];\n            this.unreadMembers = [];\n            this.$http({\n                url: \"/message/group/findReadedUsers\",\n                method: 'get',\n                params: { groupId: this.msgInfo.groupId, messageId: this.msgInfo.id }\n            }).then(userIds => {\n                this.groupMembers.forEach(member => {\n                    // 发送者和已退群的不显示\n                    if (member.userId == this.msgInfo.sendId || member.quit) {\n                        return;\n                    }\n                    // 区分已读还是未读\n                    if (userIds.find(userId => member.userId == userId)) {\n                        this.readedMembers.push(member);\n                    } else  {\n                        this.unreadMembers.push(member);\n                    }\n                })\n\t\t\t\t// 更新已读人数\n\t\t\t\tthis.$store.commit(\"updateMessage\", {\n\t\t\t\t    id: this.msgInfo.id,\n\t\t\t\t    groupId: this.msgInfo.groupId,\n\t\t\t\t    readedCount: this.readedMembers.length\n\t\t\t\t})\n            })\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.chat-group-readed-mask {\n    position: fixed;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 9999;\n}\n\n.chat-group-readed {\n    position: fixed;\n    box-shadow: 0px 0px 10px #ccc;\n    width: 300px;\n    background-color: #fafafa;\n    border-radius: 8px;\n\n    .scroll-box {\n        height: 400px;\n    }\n\n    .arrow-left {\n\n        position: absolute;\n        left: -15px;\n        width: 0;\n        height: 0;\n        border-top: 15px solid transparent;\n        border-bottom: 15px solid transparent;\n        border-right: 15px solid #ccc;\n\n        .arrow-left-inner {\n            position: absolute;\n            top: -12px;\n            left: 3px;\n            width: 0;\n            height: 0;\n            overflow: hidden;\n            border-top: 12px solid transparent;\n            border-bottom: 12px solid transparent;\n            border-right: 12px solid white;\n        }\n    }\n\n    .arrow-right {\n        position: absolute;\n        right: -15px;\n        width: 0;\n        height: 0;\n        border-top: 15px solid transparent;\n        border-bottom: 15px solid transparent;\n        border-left: 15px solid #ccc;\n\n        .arrow-right-inner {\n            position: absolute;\n            top: -12px;\n            right: 3px;\n            width: 0;\n            height: 0;\n            overflow: hidden;\n            border-top: 12px solid transparent;\n            border-bottom: 12px solid transparent;\n            border-left: 12px solid white;\n        }\n    }\n}\n</style>"]}]}