{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/view/Group.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/d/github/box-im/im-web/src/view/Group.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js","mtime":1727014166227},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgR3JvdXBJdGVtIGZyb20gJy4uL2NvbXBvbmVudHMvZ3JvdXAvR3JvdXBJdGVtJzsKCWltcG9ydCBGaWxlVXBsb2FkIGZyb20gJy4uL2NvbXBvbmVudHMvY29tbW9uL0ZpbGVVcGxvYWQnOwoJaW1wb3J0IEdyb3VwTWVtYmVyIGZyb20gJy4uL2NvbXBvbmVudHMvZ3JvdXAvR3JvdXBNZW1iZXIudnVlJzsKCWltcG9ydCBBZGRHcm91cE1lbWJlciBmcm9tICcuLi9jb21wb25lbnRzL2dyb3VwL0FkZEdyb3VwTWVtYmVyLnZ1ZSc7CglpbXBvcnQgSGVhZEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvY29tbW9uL0hlYWRJbWFnZS52dWUnOwoJZXhwb3J0IGRlZmF1bHQgewoJCW5hbWU6ICJncm91cCIsCgkJY29tcG9uZW50czogewoJCQlHcm91cEl0ZW0sCgkJCUdyb3VwTWVtYmVyLAoJCQlGaWxlVXBsb2FkLAoJCQlBZGRHcm91cE1lbWJlciwKCQkJSGVhZEltYWdlCgkJfSwKCQlkYXRhKCkgewoJCQlyZXR1cm4gewoJCQkJc2VhcmNoVGV4dDogIiIsCgkJCQltYXhTaXplOiA1ICogMTAyNCAqIDEwMjQsCgkJCQlhY3RpdmVHcm91cDoge30sCgkJCQlncm91cE1lbWJlcnM6IFtdLAoJCQkJc2hvd0FkZEdyb3VwTWVtYmVyOiBmYWxzZSwKCQkJCXJ1bGVzOiB7CgkJCQkJbmFtZTogW3sKCQkJCQkJcmVxdWlyZWQ6IHRydWUsCgkJCQkJCW1lc3NhZ2U6ICfor7fovpPlhaXnvqTogYrlkI3np7AnLAoJCQkJCQl0cmlnZ2VyOiAnYmx1cicKCQkJCQl9XQoJCQkJfQoJCQl9OwoJCX0sCgkJbWV0aG9kczogewoJCQlvbkNyZWF0ZUdyb3VwKCkgewoJCQkJdGhpcy4kcHJvbXB0KCfor7fovpPlhaXnvqTogYrlkI3np7AnLCAn5Yib5bu6576k6IGKJywgewoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCQlpbnB1dFBhdHRlcm46IC9cUy8sCgkJCQkJaW5wdXRFcnJvck1lc3NhZ2U6ICfor7fovpPlhaXnvqTogYrlkI3np7AnCgkJCQl9KS50aGVuKChvKSA9PiB7CgkJCQkJbGV0IHVzZXJJbmZvID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlclN0b3JlLnVzZXJJbmZvOwoJCQkJCWxldCBkYXRhID0gewoJCQkJCQluYW1lOiBvLnZhbHVlCgkJCQkJfQoJCQkJCXRoaXMuJGh0dHAoewoJCQkJCQl1cmw6IGAvZ3JvdXAvY3JlYXRlP2dyb3VwTmFtZT0ke28udmFsdWV9YCwKCQkJCQkJbWV0aG9kOiAncG9zdCcsCgkJCQkJCWRhdGE6IGRhdGEKCQkJCQl9KS50aGVuKChncm91cCkgPT4gewoJCQkJCQl0aGlzLiRzdG9yZS5jb21taXQoImFkZEdyb3VwIiwgZ3JvdXApOwoJCQkJCX0pCgkJCQl9KQoJCQl9LAoJCQlvbkFjdGl2ZUl0ZW0oZ3JvdXAsIGluZGV4KSB7CgkJCQl0aGlzLiRzdG9yZS5jb21taXQoImFjdGl2ZUdyb3VwIiwgaW5kZXgpOwoJCQkJLy8gc3RvcmXmlbDmja7kuI3og73nm7TmjqXkv67mlLnvvIzmiYDku6Xmt7Hmi7fotJ3kuIDku73lhoXlrZgKCQkJCXRoaXMuYWN0aXZlR3JvdXAgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdyb3VwKSk7CgkJCQkvLyDph43mlrDliqDovb3nvqTmiJDlkZgKCQkJCXRoaXMubG9hZEdyb3VwTWVtYmVycygpOwoJCQl9LAoJCQlvbkludml0ZU1lbWJlcigpIHsKCQkJCXRoaXMuc2hvd0FkZEdyb3VwTWVtYmVyID0gdHJ1ZTsKCQkJfSwKCQkJb25DbG9zZUFkZEdyb3VwTWVtYmVyKCkgewoJCQkJdGhpcy5zaG93QWRkR3JvdXBNZW1iZXIgPSBmYWxzZTsKCQkJfSwKCQkJb25VcGxvYWRTdWNjZXNzKGRhdGEpIHsKCQkJCXRoaXMuYWN0aXZlR3JvdXAuaGVhZEltYWdlID0gZGF0YS5vcmlnaW5Vcmw7CgkJCQl0aGlzLmFjdGl2ZUdyb3VwLmhlYWRJbWFnZVRodW1iID0gZGF0YS50aHVtYlVybDsKCQkJfSwKCQkJb25TYXZlR3JvdXAoKSB7CgkJCQl0aGlzLiRyZWZzWydncm91cEZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKCQkJCQlpZiAodmFsaWQpIHsKCQkJCQkJbGV0IHZvID0gdGhpcy5hY3RpdmVHcm91cDsKCQkJCQkJdGhpcy4kaHR0cCh7CgkJCQkJCQl1cmw6ICIvZ3JvdXAvbW9kaWZ5IiwKCQkJCQkJCW1ldGhvZDogInB1dCIsCgkJCQkJCQlkYXRhOiB2bwoJCQkJCQl9KS50aGVuKChncm91cCkgPT4gewoJCQkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVHcm91cCIsIGdyb3VwKTsKCQkJCQkJCXRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+u5pS55oiQ5YqfIik7CgkJCQkJCX0pCgkJCQkJfQoJCQkJfSk7CgkJCX0sCgkJCW9uRGlzc29sdmUoKSB7CgkJCQl0aGlzLiRjb25maXJtKGDnoa7orqTopoHop6PmlaMnJHt0aGlzLmFjdGl2ZUdyb3VwLm5hbWV9J+WQlz9gLCAn56Gu6K6k6Kej5pWjPycsIHsKCQkJCQljb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCgkJCQkJY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCgkJCQkJdHlwZTogJ3dhcm5pbmcnCgkJCQl9KS50aGVuKCgpID0+IHsKCQkJCQl0aGlzLiRodHRwKHsKCQkJCQkJdXJsOiBgL2dyb3VwL2RlbGV0ZS8ke3RoaXMuYWN0aXZlR3JvdXAuaWR9YCwKCQkJCQkJbWV0aG9kOiAnZGVsZXRlJwoJCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoYOe+pOiBiicke3RoaXMuYWN0aXZlR3JvdXAubmFtZX0n5bey6Kej5pWjYCk7CgkJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlR3JvdXAiLCB0aGlzLmFjdGl2ZUdyb3VwLmlkKTsKCQkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJyZW1vdmVHcm91cENoYXQiLCB0aGlzLmFjdGl2ZUdyb3VwLmlkKTsKCQkJCQkJdGhpcy5yZXNldCgpOwoJCQkJCX0pOwoJCQkJfSkKCgkJCX0sCgkJCW9uS2ljayhtZW1iZXIpIHsKCQkJCXRoaXMuJGNvbmZpcm0oYOehruWumuWwhuaIkOWRmCcke21lbWJlci5zaG93Tmlja05hbWV9J+enu+WHuue+pOiBiuWQl++8n2AsICfnoa7orqTnp7vlh7o/JywgewoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCQl0eXBlOiAnd2FybmluZycKCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCXRoaXMuJGh0dHAoewoJCQkJCQl1cmw6IGAvZ3JvdXAva2ljay8ke3RoaXMuYWN0aXZlR3JvdXAuaWR9YCwKCQkJCQkJbWV0aG9kOiAnZGVsZXRlJywKCQkJCQkJcGFyYW1zOiB7CgkJCQkJCQl1c2VySWQ6IG1lbWJlci51c2VySWQKCQkJCQkJfQoJCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoYOW3suWwhiR7bWVtYmVyLnNob3dOaWNrTmFtZX3np7vlh7rnvqTogYpgKTsKCQkJCQkJbWVtYmVyLnF1aXQgPSB0cnVlOwoJCQkJCX0pOwoJCQkJfSkKCgkJCX0sCgkJCW9uUXVpdCgpIHsKCQkJCXRoaXMuJGNvbmZpcm0oYOehruiupOmAgOWHuicke3RoaXMuYWN0aXZlR3JvdXAuc2hvd0dyb3VwTmFtZX0nLOW5tua4heepuuiBiuWkqeiusOW9leWQl++8n2AsICfnoa7orqTpgIDlh7o/JywgewoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCQl0eXBlOiAnd2FybmluZycKCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCXRoaXMuJGh0dHAoewoJCQkJCQl1cmw6IGAvZ3JvdXAvcXVpdC8ke3RoaXMuYWN0aXZlR3JvdXAuaWR9YCwKCQkJCQkJbWV0aG9kOiAnZGVsZXRlJwoJCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoYOaCqOW3sumAgOWHuicke3RoaXMuYWN0aXZlR3JvdXAubmFtZX0nYCk7CgkJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlR3JvdXAiLCB0aGlzLmFjdGl2ZUdyb3VwLmlkKTsKCQkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJyZW1vdmVHcm91cENoYXQiLCB0aGlzLmFjdGl2ZUdyb3VwLmlkKTsKCQkJCQkJdGhpcy5yZXNldCgpOwoJCQkJCX0pOwoJCQkJfSkKCgkJCX0sCgkJCW9uU2VuZE1lc3NhZ2UoKSB7CgkJCQlsZXQgY2hhdCA9IHsKCQkJCQl0eXBlOiAnR1JPVVAnLAoJCQkJCXRhcmdldElkOiB0aGlzLmFjdGl2ZUdyb3VwLmlkLAoJCQkJCXNob3dOYW1lOiB0aGlzLmFjdGl2ZUdyb3VwLnNob3dHcm91cE5hbWUsCgkJCQkJaGVhZEltYWdlOiB0aGlzLmFjdGl2ZUdyb3VwLmhlYWRJbWFnZSwKCQkJCX07CgkJCQl0aGlzLiRzdG9yZS5jb21taXQoIm9wZW5DaGF0IiwgY2hhdCk7CgkJCQl0aGlzLiRzdG9yZS5jb21taXQoImFjdGl2ZUNoYXQiLCAwKTsKCQkJCXRoaXMuJHJvdXRlci5wdXNoKCIvaG9tZS9jaGF0Iik7CgkJCX0sCgkJCWxvYWRHcm91cE1lbWJlcnMoKSB7CgkJCQl0aGlzLiRodHRwKHsKCQkJCQl1cmw6IGAvZ3JvdXAvbWVtYmVycy8ke3RoaXMuYWN0aXZlR3JvdXAuaWR9YCwKCQkJCQltZXRob2Q6ICJnZXQiCgkJCQl9KS50aGVuKChtZW1iZXJzKSA9PiB7CgkJCQkJdGhpcy5ncm91cE1lbWJlcnMgPSBtZW1iZXJzOwoJCQkJfSkKCQkJfSwKCQkJcmVzZXQoKSB7CgkJCQl0aGlzLmFjdGl2ZUdyb3VwID0ge307CgkJCQl0aGlzLmdyb3VwTWVtYmVycyA9IFtdOwoJCQl9CgkJfSwKCQljb21wdXRlZDogewoJCQlncm91cFN0b3JlKCkgewoJCQkJcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmdyb3VwU3RvcmU7CgkJCX0sCgkJCW93bmVyTmFtZSgpIHsKCQkJCWxldCBtZW1iZXIgPSB0aGlzLmdyb3VwTWVtYmVycy5maW5kKChtKSA9PiBtLnVzZXJJZCA9PSB0aGlzLmFjdGl2ZUdyb3VwLm93bmVySWQpOwoJCQkJcmV0dXJuIG1lbWJlciAmJiBtZW1iZXIuc2hvd05pY2tOYW1lOwoJCQl9LAoJCQlpc093bmVyKCkgewoJCQkJcmV0dXJuIHRoaXMuYWN0aXZlR3JvdXAub3duZXJJZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyU3RvcmUudXNlckluZm8uaWQ7CgkJCX0sCgkJCWltYWdlQWN0aW9uKCkgewoJCQkJcmV0dXJuIGAvaW1hZ2UvdXBsb2FkYDsKCQkJfQoJCX0KCX0K"},{"version":3,"sources":["Group.vue"],"names":[],"mappings":";AA0FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Group.vue","sourceRoot":"src/view","sourcesContent":["<template>\n\t<el-container class=\"group-page\">\n\t\t<el-aside width=\"280px\" class=\"group-list-box\">\n\t\t\t<div class=\"group-list-header\">\n\t\t\t\t<el-input class=\"search-text\" placeholder=\"搜索\" v-model=\"searchText\">\n\t\t\t\t\t<i class=\"el-icon-search el-input__icon\" slot=\"prefix\"> </i>\n\t\t\t\t</el-input>\n\t\t\t\t<el-button plain class=\"add-btn\" icon=\"el-icon-plus\" title=\"创建群聊\" @click=\"onCreateGroup()\"></el-button>\n\t\t\t</div>\n\t\t\t<el-scrollbar class=\"group-list-items\">\n\t\t\t\t<div v-for=\"(group,index) in groupStore.groups\" :key=\"index\">\n\t\t\t\t\t<group-item v-show=\"!group.quit&&group.showGroupName.includes(searchText)\" :group=\"group\"\n\t\t\t\t\t\t:active=\"group === groupStore.activeGroup\" @click.native=\"onActiveItem(group,index)\">\n\t\t\t\t\t</group-item>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</el-aside>\n\t\t<el-container class=\"group-box\">\n\t\t\t<div class=\"group-header\" v-show=\"activeGroup.id\">\n\t\t\t\t{{activeGroup.showGroupName}}({{groupMembers.length}})\n\t\t\t</div>\n\t\t\t<el-scrollbar class=\"group-container\">\n\t\t\t\t<div v-show=\"activeGroup.id\">\n\t\t\t\t\t<div class=\"group-info\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<file-upload v-show=\"isOwner\" class=\"avatar-uploader\" :action=\"imageAction\"\n\t\t\t\t\t\t\t\t:showLoading=\"true\" :maxSize=\"maxSize\" @success=\"onUploadSuccess\"\n\t\t\t\t\t\t\t\t:fileTypes=\"['image/jpeg', 'image/png', 'image/jpg','image/webp']\">\n\t\t\t\t\t\t\t\t<img v-if=\"activeGroup.headImage\" :src=\"activeGroup.headImage\" class=\"avatar\">\n\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t<head-image v-show=\"!isOwner\" class=\"avatar\" :size=\"200\" :url=\"activeGroup.headImage\"\n\t\t\t\t\t\t\t\t:name=\"activeGroup.showGroupName\">\n\t\t\t\t\t\t\t</head-image>\n\t\t\t\t\t\t\t<el-button class=\"send-btn\" icon=\"el-icon-position\" type=\"primary\"\n\t\t\t\t\t\t\t\t@click=\"onSendMessage()\">发消息</el-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<el-form class=\"group-form\" label-width=\"130px\" :model=\"activeGroup\" :rules=\"rules\"\n\t\t\t\t\t\t\tref=\"groupForm\">\n\t\t\t\t\t\t\t<el-form-item label=\"群聊名称\" prop=\"name\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.name\" :disabled=\"!isOwner\" maxlength=\"20\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"群主\">\n\t\t\t\t\t\t\t\t<el-input :value=\"ownerName\" disabled></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"群名备注\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.remarkGroupName\" :placeholder=\"activeGroup.name\"\n\t\t\t\t\t\t\t\t\tmaxlength=\"20\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"我在本群的昵称\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.remarkNickName\" maxlength=\"20\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$store.state.userStore.userInfo.nickName\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"群公告\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.notice\" :disabled=\"!isOwner\" type=\"textarea\"\n\t\t\t\t\t\t\t\t\tmaxlength=\"1024\" placeholder=\"群主未设置\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<el-button type=\"success\" @click=\"onSaveGroup()\">保存</el-button>\n\t\t\t\t\t\t\t\t<el-button type=\"danger\" v-show=\"!isOwner\" @click=\"onQuit()\">退出群聊</el-button>\n\t\t\t\t\t\t\t\t<el-button type=\"danger\" v-show=\"isOwner\" @click=\"onDissolve()\">解散群聊</el-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-form>\n\t\t\t\t\t</div>\n\t\t\t\t\t<el-divider content-position=\"center\"></el-divider>\n\t\t\t\t\t<el-scrollbar style=\"height:200px;\">\n\t\t\t\t\t\t<div class=\"group-member-list\">\n\t\t\t\t\t\t\t<div v-for=\"(member) in groupMembers\" :key=\"member.id\">\n\t\t\t\t\t\t\t\t<group-member v-show=\"!member.quit\" class=\"group-member\" :member=\"member\"\n\t\t\t\t\t\t\t\t\t:showDel=\"isOwner&&member.userId!=activeGroup.ownerId\" @del=\"onKick\"></group-member>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"group-invite\">\n\t\t\t\t\t\t\t\t<div class=\"invite-member-btn\" title=\"邀请好友进群聊\" @click=\"onInviteMember()\">\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-plus\"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"invite-member-text\">邀请</div>\n\t\t\t\t\t\t\t\t<add-group-member :visible=\"showAddGroupMember\" :groupId=\"activeGroup.id\"\n\t\t\t\t\t\t\t\t\t:members=\"groupMembers\" @reload=\"loadGroupMembers\"\n\t\t\t\t\t\t\t\t\t@close=\"onCloseAddGroupMember\"></add-group-member>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</el-scrollbar>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</el-container>\n\t</el-container>\n</template>\n\n\n<script>\n\timport GroupItem from '../components/group/GroupItem';\n\timport FileUpload from '../components/common/FileUpload';\n\timport GroupMember from '../components/group/GroupMember.vue';\n\timport AddGroupMember from '../components/group/AddGroupMember.vue';\n\timport HeadImage from '../components/common/HeadImage.vue';\n\texport default {\n\t\tname: \"group\",\n\t\tcomponents: {\n\t\t\tGroupItem,\n\t\t\tGroupMember,\n\t\t\tFileUpload,\n\t\t\tAddGroupMember,\n\t\t\tHeadImage\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tsearchText: \"\",\n\t\t\t\tmaxSize: 5 * 1024 * 1024,\n\t\t\t\tactiveGroup: {},\n\t\t\t\tgroupMembers: [],\n\t\t\t\tshowAddGroupMember: false,\n\t\t\t\trules: {\n\t\t\t\t\tname: [{\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tmessage: '请输入群聊名称',\n\t\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tmethods: {\n\t\t\tonCreateGroup() {\n\t\t\t\tthis.$prompt('请输入群聊名称', '创建群聊', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\tinputPattern: /\\S/,\n\t\t\t\t\tinputErrorMessage: '请输入群聊名称'\n\t\t\t\t}).then((o) => {\n\t\t\t\t\tlet userInfo = this.$store.state.userStore.userInfo;\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tname: o.value\n\t\t\t\t\t}\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/group/create?groupName=${o.value}`,\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t}).then((group) => {\n\t\t\t\t\t\tthis.$store.commit(\"addGroup\", group);\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t},\n\t\t\tonActiveItem(group, index) {\n\t\t\t\tthis.$store.commit(\"activeGroup\", index);\n\t\t\t\t// store数据不能直接修改，所以深拷贝一份内存\n\t\t\t\tthis.activeGroup = JSON.parse(JSON.stringify(group));\n\t\t\t\t// 重新加载群成员\n\t\t\t\tthis.loadGroupMembers();\n\t\t\t},\n\t\t\tonInviteMember() {\n\t\t\t\tthis.showAddGroupMember = true;\n\t\t\t},\n\t\t\tonCloseAddGroupMember() {\n\t\t\t\tthis.showAddGroupMember = false;\n\t\t\t},\n\t\t\tonUploadSuccess(data) {\n\t\t\t\tthis.activeGroup.headImage = data.originUrl;\n\t\t\t\tthis.activeGroup.headImageThumb = data.thumbUrl;\n\t\t\t},\n\t\t\tonSaveGroup() {\n\t\t\t\tthis.$refs['groupForm'].validate((valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tlet vo = this.activeGroup;\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: \"/group/modify\",\n\t\t\t\t\t\t\tmethod: \"put\",\n\t\t\t\t\t\t\tdata: vo\n\t\t\t\t\t\t}).then((group) => {\n\t\t\t\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\t\t\t\t\t\t\tthis.$message.success(\"修改成功\");\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tonDissolve() {\n\t\t\t\tthis.$confirm(`确认要解散'${this.activeGroup.name}'吗?`, '确认解散?', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/group/delete/${this.activeGroup.id}`,\n\t\t\t\t\t\tmethod: 'delete'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(`群聊'${this.activeGroup.name}'已解散`);\n\t\t\t\t\t\tthis.$store.commit(\"removeGroup\", this.activeGroup.id);\n\t\t\t\t\t\tthis.$store.commit(\"removeGroupChat\", this.activeGroup.id);\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t});\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonKick(member) {\n\t\t\t\tthis.$confirm(`确定将成员'${member.showNickName}'移出群聊吗？`, '确认移出?', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/group/kick/${this.activeGroup.id}`,\n\t\t\t\t\t\tmethod: 'delete',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tuserId: member.userId\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(`已将${member.showNickName}移出群聊`);\n\t\t\t\t\t\tmember.quit = true;\n\t\t\t\t\t});\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonQuit() {\n\t\t\t\tthis.$confirm(`确认退出'${this.activeGroup.showGroupName}',并清空聊天记录吗？`, '确认退出?', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: `/group/quit/${this.activeGroup.id}`,\n\t\t\t\t\t\tmethod: 'delete'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(`您已退出'${this.activeGroup.name}'`);\n\t\t\t\t\t\tthis.$store.commit(\"removeGroup\", this.activeGroup.id);\n\t\t\t\t\t\tthis.$store.commit(\"removeGroupChat\", this.activeGroup.id);\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t});\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonSendMessage() {\n\t\t\t\tlet chat = {\n\t\t\t\t\ttype: 'GROUP',\n\t\t\t\t\ttargetId: this.activeGroup.id,\n\t\t\t\t\tshowName: this.activeGroup.showGroupName,\n\t\t\t\t\theadImage: this.activeGroup.headImage,\n\t\t\t\t};\n\t\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\t\tthis.$store.commit(\"activeChat\", 0);\n\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t},\n\t\t\tloadGroupMembers() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/members/${this.activeGroup.id}`,\n\t\t\t\t\tmethod: \"get\"\n\t\t\t\t}).then((members) => {\n\t\t\t\t\tthis.groupMembers = members;\n\t\t\t\t})\n\t\t\t},\n\t\t\treset() {\n\t\t\t\tthis.activeGroup = {};\n\t\t\t\tthis.groupMembers = [];\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tgroupStore() {\n\t\t\t\treturn this.$store.state.groupStore;\n\t\t\t},\n\t\t\townerName() {\n\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == this.activeGroup.ownerId);\n\t\t\t\treturn member && member.showNickName;\n\t\t\t},\n\t\t\tisOwner() {\n\t\t\t\treturn this.activeGroup.ownerId == this.$store.state.userStore.userInfo.id;\n\t\t\t},\n\t\t\timageAction() {\n\t\t\t\treturn `/image/upload`;\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.group-page {\n\t\t.group-list-box {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tborder-right: #53a0e79c solid 1px;\n\t\t\tbackground: #F8F8F8;\n\n\t\t\t.group-list-header {\n\t\t\t\theight: 50px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tpadding: 3px 8px;\n\t\t\t\tbackground-color: white;\n\t\t\t\tborder-bottom: 1px #ddd solid;\n\n\t\t\t\t.el-input__inner {\n\t\t\t\t\tborder-radius: 10px !important;\n\t\t\t\t}\n\n\t\t\t\t.add-btn {\n\t\t\t\t\tpadding: 5px !important;\n\t\t\t\t\tmargin: 5px;\n\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\tcolor: #587FF0;\n\t\t\t\t\tborder: #587FF0 1px solid;\n\t\t\t\t\tbackground-color: #F0F8FF;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.group-list-items {\n\t\t\t\tflex: 1;\n\t\t\t\tmargin: 0 3px;\n\t\t\t\tbackground: #F8F8F8;\n\t\t\t}\n\t\t}\n\n\t\t.group-box {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t\n\t\t\t.group-header {\n\t\t\t\tpadding: 3px;\n\t\t\t\theight: 50px;\n\t\t\t\tline-height: 50px;\n\t\t\t\tfont-size: 20px;\n\t\t\t\tfont-weight: 600;\n\t\t\t\ttext-align: center;\n\t\t\t\tbackground-color: white;\n\t\t\t\tborder-bottom: 1px #ddd solid;\n\t\t\t}\n\n\t\t\t.group-container {\n\t\t\t\tpadding: 20px;\n\t\t\t\tflex: 1;\n\n\t\t\t\t.group-info {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tpadding: 5px 20px;\n\n\t\t\t\t\t.group-form {\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\tpadding-left: 40px;\n\t\t\t\t\t\tmax-width: 700px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.avatar-uploader {\n\t\t\t\t\t\ttext-align: left;\n\n\t\t\t\t\t\t.el-upload {\n\t\t\t\t\t\t\tborder: 1px dashed #d9d9d9 !important;\n\t\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.el-upload:hover {\n\t\t\t\t\t\t\tborder-color: #409EFF;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.avatar-uploader-icon {\n\t\t\t\t\t\t\tfont-size: 28px;\n\t\t\t\t\t\t\tcolor: #8c939d;\n\t\t\t\t\t\t\twidth: 200px;\n\t\t\t\t\t\t\theight: 200px;\n\t\t\t\t\t\t\tline-height: 200px;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.avatar {\n\t\t\t\t\t\t\twidth: 200px;\n\t\t\t\t\t\t\theight: 200px;\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.send-btn {\n\t\t\t\t\t\tmargin-top: 20px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.group-member-list {\n\t\t\t\t\tpadding: 5px 20px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tflex-wrap: wrap;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\ttext-align: center;\n\n\t\t\t\t\t.group-member {\n\t\t\t\t\t\tmargin-right: 15px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.group-invite {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\twidth: 60px;\n\n\t\t\t\t\t\t.invite-member-btn {\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 60px;\n\t\t\t\t\t\t\tline-height: 60px;\n\t\t\t\t\t\t\tborder: #cccccc solid 1px;\n\t\t\t\t\t\t\tfont-size: 25px;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\tbox-sizing: border-box;\n\n\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\tborder: #aaaaaa solid 1px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.invite-member-text {\n\t\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 30px;\n\t\t\t\t\t\t\tline-height: 30px;\n\t\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t\t\toverflow: hidden\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>"]}]}