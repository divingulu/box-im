{"remainingRequest":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/d/github/box-im/im-web/src/components/chat/ChatBox.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/d/github/box-im/im-web/src/components/chat/ChatBox.vue","mtime":1727013808920},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/babel-loader/lib/index.js","mtime":1727014166227},{"path":"/home/d/github/box-im/im-web/node_modules/cache-loader/dist/cjs.js","mtime":1727014166207},{"path":"/home/d/github/box-im/im-web/node_modules/vue-loader/lib/index.js","mtime":1727014163811}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CglpbXBvcnQgQ2hhdEdyb3VwU2lkZSBmcm9tICIuL0NoYXRHcm91cFNpZGUudnVlIjsKCWltcG9ydCBDaGF0TWVzc2FnZUl0ZW0gZnJvbSAiLi9DaGF0TWVzc2FnZUl0ZW0udnVlIjsKCWltcG9ydCBGaWxlVXBsb2FkIGZyb20gIi4uL2NvbW1vbi9GaWxlVXBsb2FkLnZ1ZSI7CglpbXBvcnQgRW1vdGlvbiBmcm9tICIuLi9jb21tb24vRW1vdGlvbi52dWUiOwoJaW1wb3J0IENoYXRSZWNvcmQgZnJvbSAiLi9DaGF0UmVjb3JkLnZ1ZSI7CglpbXBvcnQgQ2hhdEhpc3RvcnkgZnJvbSAiLi9DaGF0SGlzdG9yeS52dWUiOwoJaW1wb3J0IENoYXRBdEJveCBmcm9tICIuL0NoYXRBdEJveC52dWUiCglpbXBvcnQgR3JvdXBNZW1iZXJTZWxlY3RvciBmcm9tICIuLi9ncm91cC9Hcm91cE1lbWJlclNlbGVjdG9yLnZ1ZSIKCWltcG9ydCBSdGNHcm91cEpvaW4gZnJvbSAiLi4vcnRjL1J0Y0dyb3VwSm9pbi52dWUiCglpbXBvcnQgQ2hhdElucHV0IGZyb20gIi4vQ2hhdElucHV0IjsKCgoJZXhwb3J0IGRlZmF1bHQgewoJCW5hbWU6ICJjaGF0UHJpdmF0ZSIsCgkJY29tcG9uZW50czogewoJCQlDaGF0SW5wdXQsCgkJCUNoYXRNZXNzYWdlSXRlbSwKCQkJRmlsZVVwbG9hZCwKCQkJQ2hhdEdyb3VwU2lkZSwKCQkJRW1vdGlvbiwKCQkJQ2hhdFJlY29yZCwKCQkJQ2hhdEhpc3RvcnksCgkJCUNoYXRBdEJveCwKCQkJR3JvdXBNZW1iZXJTZWxlY3RvciwKCQkJUnRjR3JvdXBKb2luCgkJfSwKCQlwcm9wczogewoJCQljaGF0OiB7CgkJCQl0eXBlOiBPYmplY3QKCQkJfQoJCX0sCgkJZGF0YSgpIHsKCQkJcmV0dXJuIHsKCQkJCWZyaWVuZDoge30sCgkJCQlncm91cDoge30sCgkJCQlncm91cE1lbWJlcnM6IFtdLAoJCQkJc2VuZEltYWdlVXJsOiAiIiwKCQkJCXNlbmRJbWFnZUZpbGU6ICIiLAoJCQkJcGxhY2Vob2xkZXI6ICIiLAoJCQkJaXNSZWNlaXB0OiB0cnVlLAoJCQkJc2hvd1JlY29yZDogZmFsc2UsIC8vIOaYr+WQpuaYvuekuuivremfs+W9leWItuW8ueeqlwoJCQkJc2hvd1NpZGU6IGZhbHNlLCAvLyDmmK/lkKbmmL7npLrnvqTogYrkv6Hmga/moI8KCQkJCXNob3dIaXN0b3J5OiBmYWxzZSwgLy8g5piv5ZCm5pi+56S65Y6G5Y+y6IGK5aSp6K6w5b2VCgkJCQlsb2NrTWVzc2FnZTogZmFsc2UsIC8vIOaYr+WQpumUgeWumuWPkemAge+8jAoJCQkJc2hvd01pbklkeDogMCwgLy8g5LiL5qCH5L2O5LqOc2hvd01pbklkeOeahOa2iOaBr+S4jeaYvuekuu+8jOWQpuWImemhtemdouS8muW+iOWNoee9rgoJCQkJcmVxUXVldWU6IFtdLAoJCQkJaXNTZW5kaW5nIDogZmFsc2UKCQkJfQoJCX0sCgkJbWV0aG9kczogewoJCQltb3ZlQ2hhdFRvVG9wKCkgewoJCQkJbGV0IGNoYXRJZHggPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmZpbmRDaGF0SWR4KHRoaXMuY2hhdCk7CgkJCQl0aGlzLiRzdG9yZS5jb21taXQoIm1vdmVUb3AiLCBjaGF0SWR4KTsKCQkJfSwKCQkJY2xvc2VSZWZCb3goKSB7CgkJCQl0aGlzLiRyZWZzLmVtb0JveC5jbG9zZSgpOwoJCQkJLy8gdGhpcy4kcmVmcy5hdEJveC5jbG9zZSgpOwoJCQl9LAoJCQlvbkNhbGwodHlwZSkgewoJCQkJaWYgKHR5cGUgPT0gdGhpcy4kZW51bXMuTUVTU0FHRV9UWVBFLkFDVF9SVF9WT0lDRSkgewoJCQkJCXRoaXMuc2hvd1ByaXZhdGVWaWRlbygndm9pY2UnKTsKCQkJCX0gZWxzZSBpZiAodHlwZSA9PSB0aGlzLiRlbnVtcy5NRVNTQUdFX1RZUEUuQUNUX1JUX1ZJREVPKSB7CgkJCQkJdGhpcy5zaG93UHJpdmF0ZVZpZGVvKCd2aWRlbycpOwoJCQkJfQoJCQl9LAoJCQlvblN3aXRjaFJlY2VpcHQoKSB7CgkJCQl0aGlzLmlzUmVjZWlwdCA9ICF0aGlzLmlzUmVjZWlwdDsKCQkJCXRoaXMucmVmcmVzaFBsYWNlSG9sZGVyKCk7CgkJCX0sCgkJCW9uSW1hZ2VTdWNjZXNzKGRhdGEsIGZpbGUpIHsKCQkJCWxldCBtc2dJbmZvID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlLm1zZ0luZm8pKTsKCQkJCW1zZ0luZm8uY29udGVudCA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOwoJCQkJbXNnSW5mby5yZWNlaXB0ID0gdGhpcy5pc1JlY2VpcHQ7CgkJCQl0aGlzLnNlbmRNZXNzYWdlUmVxdWVzdChtc2dJbmZvKS50aGVuKChtKSA9PiB7CgkJCQkJbXNnSW5mby5sb2FkU3RhdHVzID0gJ29rJzsKCQkJCQltc2dJbmZvLmlkID0gbS5pZDsKCQkJCQl0aGlzLmlzUmVjZWlwdCA9IGZhbHNlOwoJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiaW5zZXJ0TWVzc2FnZSIsIG1zZ0luZm8pOwoJCQkJfSkKCQkJfSwKCQkJb25JbWFnZUZhaWwoZSwgZmlsZSkgewoJCQkJbGV0IG1zZ0luZm8gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGZpbGUubXNnSW5mbykpOwoJCQkJbXNnSW5mby5sb2FkU3RhdHVzID0gJ2ZhaWwnOwoJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CgkJCX0sCgkJCW9uSW1hZ2VCZWZvcmUoZmlsZSkgewoJCQkJbGV0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7CgkJCQlsZXQgZGF0YSA9IHsKCQkJCQlvcmlnaW5Vcmw6IHVybCwKCQkJCQl0aHVtYlVybDogdXJsCgkJCQl9CgkJCQlsZXQgbXNnSW5mbyA9IHsKCQkJCQlpZDogMCwKCQkJCQl0bXBJZDogdGhpcy5nZW5lcmF0ZUlkKCksCgkJCQkJZmlsZUlkOiBmaWxlLnVpZCwKCQkJCQlzZW5kSWQ6IHRoaXMubWluZS5pZCwKCQkJCQljb250ZW50OiBKU09OLnN0cmluZ2lmeShkYXRhKSwKCQkJCQlzZW5kVGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCksCgkJCQkJc2VsZlNlbmQ6IHRydWUsCgkJCQkJdHlwZTogMSwKCQkJCQlyZWFkZWRDb3VudDogMCwKCQkJCQlsb2FkU3RhdHVzOiAibG9hZGluZyIsCgkJCQkJc3RhdHVzOiB0aGlzLiRlbnVtcy5NRVNTQUdFX1NUQVRVUy5VTlNFTkQKCQkJCX0KCQkJCS8vIOWhq+WFheWvueaWuWlkCgkJCQl0aGlzLmZpbGxUYXJnZXRJZChtc2dJbmZvLCB0aGlzLmNoYXQudGFyZ2V0SWQpOwoJCQkJLy8g5o+S5YWl5raI5oGvCgkJCQl0aGlzLiRzdG9yZS5jb21taXQoImluc2VydE1lc3NhZ2UiLCBtc2dJbmZvKTsKCQkJCS8vIOS8muivnee9rumhtgoJCQkJdGhpcy5tb3ZlQ2hhdFRvVG9wKCk7CgkJCQkvLyDmu5rliqjliLDlupXpg6gKCQkJCXRoaXMuc2Nyb2xsVG9Cb3R0b20oKTsKCQkJCS8vIOWAn+WKqWZpbGXlr7nosaHkv53lrZgKCQkJCWZpbGUubXNnSW5mbyA9IG1zZ0luZm87CgkJCX0sCgkJCW9uRmlsZVN1Y2Nlc3ModXJsLCBmaWxlKSB7CgkJCQlsZXQgZGF0YSA9IHsKCQkJCQluYW1lOiBmaWxlLm5hbWUsCgkJCQkJc2l6ZTogZmlsZS5zaXplLAoJCQkJCXVybDogdXJsCgkJCQl9CgkJCQlsZXQgbXNnSW5mbyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZmlsZS5tc2dJbmZvKSk7CgkJCQltc2dJbmZvLmNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKCQkJCW1zZ0luZm8ucmVjZWlwdCA9IHRoaXMuaXNSZWNlaXB0CgkJCQl0aGlzLnNlbmRNZXNzYWdlUmVxdWVzdChtc2dJbmZvKS50aGVuKChtKSA9PiB7CgkJCQkJbXNnSW5mby5sb2FkU3RhdHVzID0gJ29rJzsKCQkJCQltc2dJbmZvLmlkID0gbS5pZDsKCQkJCQl0aGlzLmlzUmVjZWlwdCA9IGZhbHNlOwoJCQkJCXRoaXMucmVmcmVzaFBsYWNlSG9sZGVyKCk7CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CgkJCQl9KQoJCQl9LAoJCQlvbkZpbGVGYWlsKGUsIGZpbGUpIHsKCQkJCWxldCBtc2dJbmZvID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShmaWxlLm1zZ0luZm8pKTsKCQkJCW1zZ0luZm8ubG9hZFN0YXR1cyA9ICdmYWlsJzsKCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiaW5zZXJ0TWVzc2FnZSIsIG1zZ0luZm8pOwoJCQl9LAoJCQlvbkZpbGVCZWZvcmUoZmlsZSkgewoJCQkJbGV0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7CgkJCQlsZXQgZGF0YSA9IHsKCQkJCQluYW1lOiBmaWxlLm5hbWUsCgkJCQkJc2l6ZTogZmlsZS5zaXplLAoJCQkJCXVybDogdXJsCgkJCQl9CgkJCQlsZXQgbXNnSW5mbyA9IHsKCQkJCQlpZDogMCwKCQkJCQl0bXBJZDogdGhpcy5nZW5lcmF0ZUlkKCksCgkJCQkJc2VuZElkOiB0aGlzLm1pbmUuaWQsCgkJCQkJY29udGVudDogSlNPTi5zdHJpbmdpZnkoZGF0YSksCgkJCQkJc2VuZFRpbWU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAoJCQkJCXNlbGZTZW5kOiB0cnVlLAoJCQkJCXR5cGU6IDIsCgkJCQkJbG9hZFN0YXR1czogImxvYWRpbmciLAoJCQkJCXJlYWRlZENvdW50OiAwLAoJCQkJCXN0YXR1czogdGhpcy4kZW51bXMuTUVTU0FHRV9TVEFUVVMuVU5TRU5ECgkJCQl9CgkJCQkvLyDloavlhYXlr7nmlrlpZAoJCQkJdGhpcy5maWxsVGFyZ2V0SWQobXNnSW5mbywgdGhpcy5jaGF0LnRhcmdldElkKTsKCQkJCS8vIOaPkuWFpea2iOaBrwoJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbXNnSW5mbyk7CgkJCQkvLyDkvJror53nva7pobYKCQkJCXRoaXMubW92ZUNoYXRUb1RvcCgpOwoJCQkJLy8g5rua5Yqo5Yiw5bqV6YOoCgkJCQl0aGlzLnNjcm9sbFRvQm90dG9tKCk7CgkJCQkvLyDlgJ/liqlmaWxl5a+56LGh6YCP5LygCgkJCQlmaWxlLm1zZ0luZm8gPSBtc2dJbmZvOwoJCQl9LAoJCQlvbkNsb3NlU2lkZSgpIHsKCQkJCXRoaXMuc2hvd1NpZGUgPSBmYWxzZTsKCQkJfSwKCQkJb25TY3JvbGxUb1RvcCgpIHsKCQkJCS8vIOWkmuWxleekujEw5p2h5L+h5oGvCgkJCQl0aGlzLnNob3dNaW5JZHggPSB0aGlzLnNob3dNaW5JZHggPiAxMCA/IHRoaXMuc2hvd01pbklkeCAtIDEwIDogMDsKCQkJfSwKCQkJb25TY3JvbGwoZSkgewoJCQkJbGV0IHNjcm9sbEVsZW1lbnQgPSBlLnRhcmdldAoJCQkJbGV0IHNjcm9sbFRvcCA9IHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wCgkJCQlpZiAoc2Nyb2xsVG9wIDwgMzApIHsgLy8g5Zyo6aG26YOoLOS4jea7muWKqOeahOaDheWGtQoJCQkJCS8vIOWkmuWxleekujIw5p2h5L+h5oGvCgkJCQkJdGhpcy5zaG93TWluSWR4ID0gdGhpcy5zaG93TWluSWR4ID4gMjAgPyB0aGlzLnNob3dNaW5JZHggLSAyMCA6IDA7CgkJCQl9CgkJCX0sCgkJCXNob3dFbW90aW9uQm94KCkgewoJCQkJbGV0IHdpZHRoID0gdGhpcy4kcmVmcy5lbW90aW9uLm9mZnNldFdpZHRoOwoJCQkJbGV0IGxlZnQgPSB0aGlzLiRlbG0uZml4TGVmdCh0aGlzLiRyZWZzLmVtb3Rpb24pOwoJCQkJbGV0IHRvcCA9IHRoaXMuJGVsbS5maXhUb3AodGhpcy4kcmVmcy5lbW90aW9uKTsKCQkJCXRoaXMuJHJlZnMuZW1vQm94Lm9wZW4oewoJCQkJCXg6IGxlZnQgKyB3aWR0aCAvIDIsCgkJCQkJeTogdG9wCgkJCQl9KQoJCQl9LAoJCQlvbkVtb3Rpb24oZW1vVGV4dCkgewoJCQkJdGhpcy4kcmVmcy5jaGF0SW5wdXRFZGl0b3IuaW5zZXJ0RW1vamkoZW1vVGV4dCk7CgkJCX0sCgkJCXNob3dSZWNvcmRCb3goKSB7CgkJCQl0aGlzLnNob3dSZWNvcmQgPSB0cnVlOwoJCQl9LAoJCQljbG9zZVJlY29yZEJveCgpIHsKCQkJCXRoaXMuc2hvd1JlY29yZCA9IGZhbHNlOwoJCQl9LAoJCQlzaG93UHJpdmF0ZVZpZGVvKG1vZGUpIHsKCQkJCWxldCBydGNJbmZvID0gewoJCQkJCW1vZGU6IG1vZGUsCgkJCQkJaXNIb3N0OiB0cnVlLAoJCQkJCWZyaWVuZDogdGhpcy5mcmllbmQsCgkJCQl9CgkJCQkvLyDpgJrov4dob21lLnZ1ZeaJk+W8gOWNleS6uuinhumikeeql+WPowoJCQkJdGhpcy4kZXZlbnRCdXMuJGVtaXQoIm9wZW5Qcml2YXRlVmlkZW8iLCBydGNJbmZvKTsKCQkJfSwKCQkJb25Hcm91cFZpZGVvKCkgewoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiAiL3dlYnJ0Yy9ncm91cC9pbmZvP2dyb3VwSWQ9IiArIHRoaXMuZ3JvdXAuaWQsCgkJCQkJbWV0aG9kOiAnR0VUJwoJCQkJfSkudGhlbigocnRjSW5mbykgPT4gewoJCQkJCWlmIChydGNJbmZvLmlzQ2hhdGluZykgewoJCQkJCQkvLyDlt7LlnKjpgJror53kuK3vvIzlj6/ku6Xnm7TmjqXliqDlhaXpgJror50KCQkJCQkJdGhpcy4kcmVmcy5ydGNKb2luLm9wZW4ocnRjSW5mbyk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJLy8g6YKA6K+35oiQ5ZGY5Y+R6LW36YCa6K+dCgkJCQkJCWxldCBpZHMgPSBbdGhpcy5taW5lLmlkXTsKCQkJCQkJbGV0IG1heENoYW5uZWwgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jb25maWdTdG9yZS53ZWJydGMubWF4Q2hhbm5lbDsKCQkJCQkJdGhpcy4kcmVmcy5ydGNTZWwub3BlbihtYXhDaGFubmVsLCBpZHMsIGlkcyk7CgkJCQkJfQoJCQkJfSkKCgkJCX0sCgkJCW9uSW52aXRlT2sobWVtYmVycykgewoJCQkJaWYgKG1lbWJlcnMubGVuZ3RoIDwgMikgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJCWxldCB1c2VySW5mb3MgPSBbXTsKCQkJCW1lbWJlcnMuZm9yRWFjaChtID0+IHsKCQkJCQl1c2VySW5mb3MucHVzaCh7CgkJCQkJCWlkOiBtLnVzZXJJZCwKCQkJCQkJbmlja05hbWU6IG0uc2hvd05pY2tOYW1lLAoJCQkJCQloZWFkSW1hZ2U6IG0uaGVhZEltYWdlLAoJCQkJCQlpc0NhbWVyYTogZmFsc2UsCgkJCQkJCWlzTWljcm9QaG9uZTogdHJ1ZQoJCQkJCX0pCgkJCQl9KQoJCQkJbGV0IHJ0Y0luZm8gPSB7CgkJCQkJaXNIb3N0OiB0cnVlLAoJCQkJCWdyb3VwSWQ6IHRoaXMuZ3JvdXAuaWQsCgkJCQkJaW52aXRlcklkOiB0aGlzLm1pbmUuaWQsCgkJCQkJdXNlckluZm9zOiB1c2VySW5mb3MKCQkJCX0KCQkJCS8vIOmAmui/h2hvbWUudnVl5omT5byA5aSa5Lq66KeG6aKR56qX5Y+jCgkJCQl0aGlzLiRldmVudEJ1cy4kZW1pdCgib3Blbkdyb3VwVmlkZW8iLCBydGNJbmZvKTsKCQkJfSwKCQkJc2hvd0hpc3RvcnlCb3goKSB7CgkJCQl0aGlzLnNob3dIaXN0b3J5ID0gdHJ1ZTsKCQkJfSwKCQkJY2xvc2VIaXN0b3J5Qm94KCkgewoJCQkJdGhpcy5zaG93SGlzdG9yeSA9IGZhbHNlOwoJCQl9LAoJCQlvblNlbmRSZWNvcmQoZGF0YSkgewoJCQkJbGV0IG1zZ0luZm8gPSB7CgkJCQkJY29udGVudDogSlNPTi5zdHJpbmdpZnkoZGF0YSksCgkJCQkJdHlwZTogMywKCQkJCQlyZWNlaXB0OiB0aGlzLmlzUmVjZWlwdAoJCQkJfQoJCQkJLy8g5aGr5YWF5a+55pa5aWQKCQkJCXRoaXMuZmlsbFRhcmdldElkKG1zZ0luZm8sIHRoaXMuY2hhdC50YXJnZXRJZCk7CgkJCQl0aGlzLnNlbmRNZXNzYWdlUmVxdWVzdChtc2dJbmZvKS50aGVuKChtKSA9PiB7CgkJCQkJbS5zZWxmU2VuZCA9IHRydWU7CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJpbnNlcnRNZXNzYWdlIiwgbSk7CgkJCQkJLy8g5Lya6K+d572u6aG2CgkJCQkJdGhpcy5tb3ZlQ2hhdFRvVG9wKCk7CgkJCQkJLy8g5L+d5oyB6L6T5YWl5qGG54Sm54K5CgkJCQkJdGhpcy4kcmVmcy5jaGF0SW5wdXRFZGl0b3IuZm9jdXMoKTsKCQkJCQkvLyDmu5rliqjliLDlupXpg6gKCQkJCQl0aGlzLnNjcm9sbFRvQm90dG9tKCk7CgkJCQkJLy8g5YWz6Zet5b2V6Z+z56qX5Y+jCgkJCQkJdGhpcy5zaG93UmVjb3JkID0gZmFsc2U7CgkJCQkJdGhpcy5pc1JlY2VpcHQgPSBmYWxzZTsKCQkJCQl0aGlzLnJlZnJlc2hQbGFjZUhvbGRlcigpOwoJCQkJfSkKCQkJfSwKCQkJZmlsbFRhcmdldElkKG1zZ0luZm8sIHRhcmdldElkKSB7CgkJCQlpZiAodGhpcy5jaGF0LnR5cGUgPT0gIkdST1VQIikgewoJCQkJCW1zZ0luZm8uZ3JvdXBJZCA9IHRhcmdldElkOwoJCQkJfSBlbHNlIHsKCQkJCQltc2dJbmZvLnJlY3ZJZCA9IHRhcmdldElkOwoJCQkJfQoJCQl9LAoJCQlub3RpZnlTZW5kKCkgewoJCQkJdGhpcy4kcmVmcy5jaGF0SW5wdXRFZGl0b3Iuc3VibWl0KCk7CgkJCX0sCgkJCWFzeW5jIHNlbmRNZXNzYWdlKGZ1bGxMaXN0KSB7CgkJCQl0aGlzLnJlc2V0RWRpdG9yKCk7CgkJCQl0aGlzLnJlYWRlZE1lc3NhZ2UoKTsKCQkJCWxldCBzZW5kVGV4dCA9IHRoaXMuaXNSZWNlaXB0ID8gIuOAkOWbnuaJp+a2iOaBr+OAkSIgOiAiIjsKCQkJCWxldCBwcm9taXNlTGlzdCA9IFtdOwoJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBmdWxsTGlzdC5sZW5ndGg7IGkrKykgewoJCQkJCWxldCBtc2cgPSBmdWxsTGlzdFtpXTsKCQkJCQlzd2l0Y2ggKG1zZy50eXBlKSB7CgkJCQkJCWNhc2UgInRleHQiOgoJCQkJCQkJYXdhaXQgdGhpcy5zZW5kVGV4dE1lc3NhZ2Uoc2VuZFRleHQgKyBtc2cuY29udGVudCxtc2cuYXRVc2VySWRzKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlICJpbWFnZSI6CgkJCQkJCQlhd2FpdCB0aGlzLnNlbmRJbWFnZU1lc3NhZ2UobXNnLmNvbnRlbnQuZmlsZSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAiZmlsZSI6CgkJCQkJCQlhd2FpdCB0aGlzLnNlbmRGaWxlTWVzc2FnZShtc2cuY29udGVudC5maWxlKTsKCQkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCQoJCQkJfQoJCQl9LAoJCQlzZW5kSW1hZ2VNZXNzYWdlKGZpbGUpIHsKCQkJCXJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57CgkJCQkJdGhpcy5vbkltYWdlQmVmb3JlKGZpbGUpOwoJCQkJCWxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCgkJCQkJZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSkKCQkJCQl0aGlzLiRodHRwLnBvc3QoIi9pbWFnZS91cGxvYWQiLCBmb3JtRGF0YSwgewoJCQkJCQloZWFkZXJzOiB7CgkJCQkJCQknQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCgkJCQkJCX0KCQkJCQl9KS50aGVuKChkYXRhKSA9PiB7CgkJCQkJCXRoaXMub25JbWFnZVN1Y2Nlc3MoZGF0YSwgZmlsZSk7CgkJCQkJCXJlc29sdmUoKTsKCQkJCQl9KS5jYXRjaCgocmVzKSA9PiB7CgkJCQkJCXRoaXMub25JbWFnZUZhaWwocmVzLCBmaWxlKTsKCQkJCQkJcmVqZWN0KCk7CgkJCQkJfSkKCQkJCQl0aGlzLiRuZXh0VGljaygoKSA9PiB0aGlzLiRyZWZzLmNoYXRJbnB1dEVkaXRvci5mb2N1cygpKTsKCQkJCQl0aGlzLnNjcm9sbFRvQm90dG9tKCk7CgkJCQkJfSk7CgkJCX0sCgkJCSBzZW5kVGV4dE1lc3NhZ2Uoc2VuZFRleHQsYXRVc2VySWRzKSB7CgkJCQlyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KT0+ewoJCQkJCWlmICghc2VuZFRleHQudHJpbSgpKSB7CgkJCQkJCXJlamVjdCgpOwoJCQkJCX0KCQkJCQlsZXQgbXNnSW5mbyA9IHsKCQkJCQkJY29udGVudDogc2VuZFRleHQsCgkJCQkJCXR5cGU6IDAKCQkJCQl9CgkJCQkJLy8g5aGr5YWF5a+55pa5aWQKCQkJCQl0aGlzLmZpbGxUYXJnZXRJZChtc2dJbmZvLCB0aGlzLmNoYXQudGFyZ2V0SWQpOwoJCQkJCS8vIOiiq0DkurrlkZjliJfooagKCQkJCQlpZiAodGhpcy5jaGF0LnR5cGUgPT0gIkdST1VQIikgewoJCQkJCQltc2dJbmZvLmF0VXNlcklkcyA9IGF0VXNlcklkczsKCQkJCQkJbXNnSW5mby5yZWNlaXB0ID0gdGhpcy5pc1JlY2VpcHQ7CgkJCQkJfQoJCQkJCXRoaXMubG9ja01lc3NhZ2UgPSB0cnVlOwoJCQkJCXRoaXMuc2VuZE1lc3NhZ2VSZXF1ZXN0KG1zZ0luZm8pLnRoZW4oKG0pID0+IHsKCQkJCQkJbS5zZWxmU2VuZCA9IHRydWU7CgkJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiaW5zZXJ0TWVzc2FnZSIsIG0pOwoJCQkJCQkvLyDkvJror53nva7pobYKCQkJCQkJdGhpcy5tb3ZlQ2hhdFRvVG9wKCk7CgkJCQkJfSkuZmluYWxseSgoKSA9PiB7CgkJCQkJCS8vIOino+mZpOmUgeWumgoJCQkJCQl0aGlzLnNjcm9sbFRvQm90dG9tKCk7CgkJCQkJCXRoaXMuaXNSZWNlaXB0ID0gZmFsc2U7CgkJCQkJCXJlc29sdmUoKTsKCQkJCQl9KTsKCQkJCX0pOwoJCQl9LAoJCQlzZW5kRmlsZU1lc3NhZ2UoZmlsZSkgewoJCQkJcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCk9PnsKCQkJCQlsZXQgY2hlY2sgPSB0aGlzLiRyZWZzLmZpbGVVcGxvYWQuYmVmb3JlVXBsb2FkKGZpbGUpOwoJCQkJCWlmIChjaGVjaykgewoJCQkJCQl0aGlzLiRyZWZzLmZpbGVVcGxvYWQub25GaWxlVXBsb2FkKHsgZmlsZSB9KTsKCQkJCQl9CgkJCQl9KQoJCQl9LAoJCQlkZWxldGVNZXNzYWdlKG1zZ0luZm8pIHsKCQkJCXRoaXMuJGNvbmZpcm0oJ+ehruiupOWIoOmZpOa2iOaBrz8nLCAn5Yig6Zmk5raI5oGvJywgewoJCQkJCWNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKCQkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCQl0eXBlOiAnd2FybmluZycKCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiZGVsZXRlTWVzc2FnZSIsIG1zZ0luZm8pOwoJCQkJfSk7CgkJCX0sCgkJCXJlY2FsbE1lc3NhZ2UobXNnSW5mbykgewoJCQkJdGhpcy4kY29uZmlybSgn56Gu6K6k5pKk5Zue5raI5oGvPycsICfmkqTlm57mtojmga8nLCB7CgkJCQkJY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAoJCQkJCWNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAoJCQkJCXR5cGU6ICd3YXJuaW5nJwoJCQkJfSkudGhlbigoKSA9PiB7CgkJCQkJbGV0IHVybCA9IGAvbWVzc2FnZS8ke3RoaXMuY2hhdC50eXBlLnRvTG93ZXJDYXNlKCl9L3JlY2FsbC8ke21zZ0luZm8uaWR9YAoJCQkJCXRoaXMuJGh0dHAoewoJCQkJCQl1cmw6IHVybCwKCQkJCQkJbWV0aG9kOiAnZGVsZXRlJwoJCQkJCX0pLnRoZW4oKCkgPT4gewoJCQkJCQl0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua2iOaBr+W3suaSpOWbniIpOwoJCQkJCQltc2dJbmZvID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShtc2dJbmZvKSk7CgkJCQkJCW1zZ0luZm8udHlwZSA9IDEwOwoJCQkJCQltc2dJbmZvLmNvbnRlbnQgPSAn5L2g5pKk5Zue5LqG5LiA5p2h5raI5oGvJzsKCQkJCQkJbXNnSW5mby5zdGF0dXMgPSB0aGlzLiRlbnVtcy5NRVNTQUdFX1NUQVRVUy5SRUNBTEw7CgkJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgiaW5zZXJ0TWVzc2FnZSIsIG1zZ0luZm8pOwoJCQkJCX0pCgkJCQl9KTsKCQkJfSwKCQkJcmVhZGVkTWVzc2FnZSgpIHsKCQkJCWlmICh0aGlzLmNoYXQudW5yZWFkQ291bnQgPT0gMCkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgicmVzZXRVbnJlYWRDb3VudCIsIHRoaXMuY2hhdCkKCQkJCWlmICh0aGlzLmNoYXQudHlwZSA9PSAiR1JPVVAiKSB7CgkJCQkJdmFyIHVybCA9IGAvbWVzc2FnZS9ncm91cC9yZWFkZWQ/Z3JvdXBJZD0ke3RoaXMuY2hhdC50YXJnZXRJZH1gCgkJCQl9IGVsc2UgewoJCQkJCXVybCA9IGAvbWVzc2FnZS9wcml2YXRlL3JlYWRlZD9mcmllbmRJZD0ke3RoaXMuY2hhdC50YXJnZXRJZH1gCgkJCQl9CgkJCQl0aGlzLiRodHRwKHsKCQkJCQl1cmw6IHVybCwKCQkJCQltZXRob2Q6ICdwdXQnCgkJCQl9KS50aGVuKCgpID0+IHt9KQoJCQl9LAoJCQlsb2FkUmVhZGVkKGZJZCkgewoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiBgL21lc3NhZ2UvcHJpdmF0ZS9tYXhSZWFkZWRJZD9mcmllbmRJZD0ke2ZJZH1gLAoJCQkJCW1ldGhvZDogJ2dldCcKCQkJCX0pLnRoZW4oKGlkKSA9PiB7CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJyZWFkZWRNZXNzYWdlIiwgewoJCQkJCQlmcmllbmRJZDogZklkLAoJCQkJCQltYXhJZDogaWQKCQkJCQl9KTsKCQkJCX0pOwoJCQl9LAoJCQlsb2FkR3JvdXAoZ3JvdXBJZCkgewoJCQkJdGhpcy4kaHR0cCh7CgkJCQkJdXJsOiBgL2dyb3VwL2ZpbmQvJHtncm91cElkfWAsCgkJCQkJbWV0aG9kOiAnZ2V0JwoJCQkJfSkudGhlbigoZ3JvdXApID0+IHsKCQkJCQl0aGlzLmdyb3VwID0gZ3JvdXA7CgkJCQkJdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDaGF0RnJvbUdyb3VwIiwgZ3JvdXApOwoJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlR3JvdXAiLCBncm91cCk7CgkJCQl9KTsKCgkJCQl0aGlzLiRodHRwKHsKCQkJCQl1cmw6IGAvZ3JvdXAvbWVtYmVycy8ke2dyb3VwSWR9YCwKCQkJCQltZXRob2Q6ICdnZXQnCgkJCQl9KS50aGVuKChncm91cE1lbWJlcnMpID0+IHsKCQkJCQl0aGlzLmdyb3VwTWVtYmVycyA9IGdyb3VwTWVtYmVyczsKCQkJCX0pOwoJCQl9LAoJCQlsb2FkRnJpZW5kKGZyaWVuZElkKSB7CgkJCQkvLyDojrflj5blr7nmlrnmnIDmlrDkv6Hmga8KCQkJCXRoaXMuJGh0dHAoewoJCQkJCXVybDogYC91c2VyL2ZpbmQvJHtmcmllbmRJZH1gLAoJCQkJCW1ldGhvZDogJ2dldCcKCQkJCX0pLnRoZW4oKGZyaWVuZCkgPT4gewoJCQkJCXRoaXMuZnJpZW5kID0gZnJpZW5kOwoJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlQ2hhdEZyb21GcmllbmQiLCBmcmllbmQpOwoJCQkJCXRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlRnJpZW5kIiwgZnJpZW5kKTsKCQkJCX0pCgkJCX0sCgkJCXNob3dOYW1lKG1zZ0luZm8pIHsKCQkJCWlmICh0aGlzLmNoYXQudHlwZSA9PSAnR1JPVVAnKSB7CgkJCQkJbGV0IG1lbWJlciA9IHRoaXMuZ3JvdXBNZW1iZXJzLmZpbmQoKG0pID0+IG0udXNlcklkID09IG1zZ0luZm8uc2VuZElkKTsKCQkJCQlyZXR1cm4gbWVtYmVyID8gbWVtYmVyLnNob3dOaWNrTmFtZSA6ICIiOwoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gbXNnSW5mby5zZW5kSWQgPT0gdGhpcy5taW5lLmlkID8gdGhpcy5taW5lLm5pY2tOYW1lIDogdGhpcy5jaGF0LnNob3dOYW1lCgkJCQl9CgoJCQl9LAoJCQloZWFkSW1hZ2UobXNnSW5mbykgewoJCQkJaWYgKHRoaXMuY2hhdC50eXBlID09ICdHUk9VUCcpIHsKCQkJCQlsZXQgbWVtYmVyID0gdGhpcy5ncm91cE1lbWJlcnMuZmluZCgobSkgPT4gbS51c2VySWQgPT0gbXNnSW5mby5zZW5kSWQpOwoJCQkJCXJldHVybiBtZW1iZXIgPyBtZW1iZXIuaGVhZEltYWdlIDogIiI7CgkJCQl9IGVsc2UgewoJCQkJCXJldHVybiBtc2dJbmZvLnNlbmRJZCA9PSB0aGlzLm1pbmUuaWQgPyB0aGlzLm1pbmUuaGVhZEltYWdlVGh1bWIgOiB0aGlzLmNoYXQuaGVhZEltYWdlCgkJCQl9CgkJCX0sCgkJCXJlc2V0RWRpdG9yKCkgewoJCQkJCgkJCQl0aGlzLiRuZXh0VGljaygoKSA9PiB7CgkJCQkJdGhpcy4kcmVmcy5jaGF0SW5wdXRFZGl0b3IuY2xlYXIoKTsKCQkJCQl0aGlzLiRyZWZzLmNoYXRJbnB1dEVkaXRvci5mb2N1cygpOwoJCQkJfSk7CgkJCX0sCgkJCXNjcm9sbFRvQm90dG9tKCkgewoJCQkJdGhpcy4kbmV4dFRpY2soKCkgPT4gewoJCQkJCWxldCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2hhdFNjcm9sbEJveCIpOwoJCQkJCWRpdi5zY3JvbGxUb3AgPSBkaXYuc2Nyb2xsSGVpZ2h0OwoJCQkJfSk7CgkJCX0sCgkJCXJlZnJlc2hQbGFjZUhvbGRlcigpIHsKCQkJCWlmICh0aGlzLmlzUmVjZWlwdCkgewoJCQkJCXRoaXMucGxhY2Vob2xkZXIgPSAi44CQ5Zue5omn5raI5oGv44CRIgoJCQkJfSBlbHNlIGlmICh0aGlzLiRyZWZzLmVkaXRCb3ggJiYgdGhpcy4kcmVmcy5lZGl0Qm94LmlubmVySFRNTCkgewoJCQkJCXRoaXMucGxhY2Vob2xkZXIgPSAiIgoJCQkJfSBlbHNlIHsKCQkJCQl0aGlzLnBsYWNlaG9sZGVyID0gIuiBiueCueS7gOS5iOWQp34iOwoJCQkJfQoJCQl9LAoJCQlzZW5kTWVzc2FnZVJlcXVlc3QobXNnSW5mbyl7CgkJCQlyZXR1cm4gIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCk9PnsKCQkJCQkvLyDor7fmsYLlhaXpmJ/liJfvvIzpmLLmraLor7fmsYIi5ZCO5Y+R5YWI6IezIu+8jOWvvOiHtOa2iOaBr+mUmeW6jwoJCQkJCXRoaXMucmVxUXVldWUucHVzaCh7bXNnSW5mbyxyZXNvbHZlLHJlamVjdH0pOwoJCQkJCXRoaXMucHJvY2Vzc1JlcVF1ZXVlKCk7CgkJCQl9KQoJCQl9LAoJCQlwcm9jZXNzUmVxUXVldWUoKXsKCQkJCWlmICh0aGlzLnJlcVF1ZXVlLmxlbmd0aCAmJiAhdGhpcy5pc1NlbmRpbmcpIHsKCQkJCQl0aGlzLmlzU2VuZGluZyA9IHRydWU7CgkJCQkJY29uc3QgcmVxRGF0YSA9IHRoaXMucmVxUXVldWUuc2hpZnQoKTsKCQkJCQl0aGlzLiRodHRwKHsKCQkJCQkJdXJsOiB0aGlzLm1lc3NhZ2VBY3Rpb24sCgkJCQkJCW1ldGhvZDogJ3Bvc3QnLAoJCQkJCQlkYXRhOiByZXFEYXRhLm1zZ0luZm8KCQkJCQl9KS50aGVuKChyZXMpPT57CgkJCQkJCXJlcURhdGEucmVzb2x2ZShyZXMpCgkJCQkJfSkuY2F0Y2goKGUpPT57CgkJCQkJCXJlcURhdGEucmVqZWN0KGUpCgkJCQkJfSkuZmluYWxseSgoKT0+ewoJCQkJCQl0aGlzLmlzU2VuZGluZyA9IGZhbHNlOwoJCQkJCQkvLyDlj5HpgIHkuIvkuIDmnaHor7fmsYIKCQkJCQkJdGhpcy5wcm9jZXNzUmVxUXVldWUoKTsKCQkJCQl9KQoJCQkJfQoJCQl9LAoJCQlnZW5lcmF0ZUlkKCkgewoJCQkJLy8g55Sf5oiQ5Li05pe2aWQKCQkJCXJldHVybiBTdHJpbmcobmV3IERhdGUoKS5nZXRUaW1lKCkpICsgU3RyaW5nKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApKTsKCQkJfQoJCX0sCgkJY29tcHV0ZWQ6IHsKCQkJbWluZSgpIHsKCQkJCXJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyU3RvcmUudXNlckluZm87CgkJCX0sCgkJCXRpdGxlKCkgewoJCQkJbGV0IHRpdGxlID0gdGhpcy5jaGF0LnNob3dOYW1lOwoJCQkJaWYgKHRoaXMuY2hhdC50eXBlID09ICJHUk9VUCIpIHsKCQkJCQlsZXQgc2l6ZSA9IHRoaXMuZ3JvdXBNZW1iZXJzLmZpbHRlcihtID0+ICFtLnF1aXQpLmxlbmd0aDsKCQkJCQl0aXRsZSArPSBgKCR7c2l6ZX0pYDsKCQkJCX0KCQkJCXJldHVybiB0aXRsZTsKCQkJfSwKCQkJbWVzc2FnZUFjdGlvbigpIHsKCQkJCXJldHVybiBgL21lc3NhZ2UvJHt0aGlzLmNoYXQudHlwZS50b0xvd2VyQ2FzZSgpfS9zZW5kYDsKCQkJfSwKCQkJdW5yZWFkQ291bnQoKSB7CgkJCQlyZXR1cm4gdGhpcy5jaGF0LnVucmVhZENvdW50OwoJCQl9LAoJCQltZXNzYWdlU2l6ZSgpIHsKCQkJCWlmICghdGhpcy5jaGF0IHx8ICF0aGlzLmNoYXQubWVzc2FnZXMpIHsKCQkJCQlyZXR1cm4gMDsKCQkJCX0KCQkJCXJldHVybiB0aGlzLmNoYXQubWVzc2FnZXMubGVuZ3RoOwoJCQl9CgkJfSwKCQl3YXRjaDogewoJCQljaGF0OiB7CgkJCQloYW5kbGVyKG5ld0NoYXQsIG9sZENoYXQpIHsKCQkJCQlpZiAobmV3Q2hhdC50YXJnZXRJZCA+IDAgJiYgKCFvbGRDaGF0IHx8IG5ld0NoYXQudHlwZSAhPSBvbGRDaGF0LnR5cGUgfHwKCQkJCQkJCW5ld0NoYXQudGFyZ2V0SWQgIT0gb2xkQ2hhdC50YXJnZXRJZCkpIHsKCQkJCQkJaWYgKHRoaXMuY2hhdC50eXBlID09ICJHUk9VUCIpIHsKCQkJCQkJCXRoaXMubG9hZEdyb3VwKHRoaXMuY2hhdC50YXJnZXRJZCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl0aGlzLmxvYWRGcmllbmQodGhpcy5jaGF0LnRhcmdldElkKTsKCQkJCQkJCS8vIOWKoOi9veW3suivu+eKtuaAgQoJCQkJCQkJdGhpcy5sb2FkUmVhZGVkKHRoaXMuY2hhdC50YXJnZXRJZCkKCQkJCQkJfQoJCQkJCQkvLyDmu5rliLDlupXpg6gKCQkJCQkJdGhpcy5zY3JvbGxUb0JvdHRvbSgpOwoJCQkJCQl0aGlzLnNob3dTaWRlID0gZmFsc2U7CgkJCQkJCS8vIOa2iOaBr+W3suivuwoJCQkJCQl0aGlzLnJlYWRlZE1lc3NhZ2UoKQoJCQkJCQkvLyDliJ3lp4vnirbmgIHlj6rmmL7npLozMOadoea2iOaBrwoJCQkJCQlsZXQgc2l6ZSA9IHRoaXMuY2hhdC5tZXNzYWdlcy5sZW5ndGg7CgkJCQkJCXRoaXMuc2hvd01pbklkeCA9IHNpemUgPiAzMCA/IHNpemUgLSAzMCA6IDA7CgkJCQkJCS8vIOmHjee9rui+k+WFpeahhgoJCQkJCQl0aGlzLnJlc2V0RWRpdG9yKCk7CgkJCQkJCS8vIOWkjeS9jeWbnuaJp+a2iOaBrwoJCQkJCQl0aGlzLmlzUmVjZWlwdCA9IGZhbHNlOwoJCQkJCQkvLyDmm7TmlrBwbGFjZWhvbGRlcgoJCQkJCQl0aGlzLnJlZnJlc2hQbGFjZUhvbGRlcigpOwoJCQkJCX0KCQkJCX0sCgkJCQlpbW1lZGlhdGU6IHRydWUKCQkJfSwKCQkJbWVzc2FnZVNpemU6IHsKCQkJCWhhbmRsZXIobmV3U2l6ZSwgb2xkU2l6ZSkgewoJCQkJCWlmIChuZXdTaXplID4gb2xkU2l6ZSkgewoJCQkJCQkvLyDmi4noh7PlupXpg6gKCQkJCQkJdGhpcy5zY3JvbGxUb0JvdHRvbSgpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0sCgkJbW91bnRlZCgpIHsKCQkJbGV0IGRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGF0U2Nyb2xsQm94Iik7CgkJCWRpdi5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uU2Nyb2xsKQoJCX0KCX0K"},{"version":3,"sources":["ChatBox.vue"],"names":[],"mappings":";AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChatBox.vue","sourceRoot":"src/components/chat","sourcesContent":["<template>\n\t<div class=\"chat-box\" @click=\"closeRefBox()\" @mousemove=\"readedMessage()\">\n\t\t<el-container>\n\t\t\t<el-header height=\"56px\">\n\t\t\t\t<span>{{ title }}</span>\n\t\t\t\t<span title=\"群聊信息\" v-show=\"this.chat.type == 'GROUP'\" class=\"btn-side el-icon-more\"\n\t\t\t\t\t@click=\"showSide = !showSide\"></span>\n\t\t\t</el-header>\n\t\t\t<el-main style=\"padding: 0;\">\n\t\t\t\t<el-container>\n\t\t\t\t\t<el-container class=\"content-box\">\n\t\t\t\t\t\t<el-main class=\"im-chat-main\" id=\"chatScrollBox\" @scroll=\"onScroll\">\n\t\t\t\t\t\t\t<div class=\"im-chat-box\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li v-for=\"(msgInfo, idx) in chat.messages\" :key=\"idx\">\n\t\t\t\t\t\t\t\t\t\t<chat-message-item v-if=\"idx >= showMinIdx\" @call=\"onCall(msgInfo.type)\"\n\t\t\t\t\t\t\t\t\t\t\t:mine=\"msgInfo.sendId == mine.id\" :headImage=\"headImage(msgInfo)\"\n\t\t\t\t\t\t\t\t\t\t\t:showName=\"showName(msgInfo)\" :msgInfo=\"msgInfo\"\n\t\t\t\t\t\t\t\t\t\t\t:groupMembers=\"groupMembers\" @delete=\"deleteMessage\"\n\t\t\t\t\t\t\t\t\t\t\t@recall=\"recallMessage\">\n\t\t\t\t\t\t\t\t\t\t</chat-message-item>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-main>\n\t\t\t\t\t\t<el-footer height=\"240px\" class=\"im-chat-footer\">\n\t\t\t\t\t\t\t<div class=\"chat-tool-bar\">\n\t\t\t\t\t\t\t\t<div title=\"表情\" class=\"icon iconfont icon-emoji\" ref=\"emotion\"\n\t\t\t\t\t\t\t\t\t@click.stop=\"showEmotionBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送图片\">\n\t\t\t\t\t\t\t\t\t<file-upload :action=\"'/image/upload'\" :maxSize=\"5 * 1024 * 1024\"\n\t\t\t\t\t\t\t\t\t\t:fileTypes=\"['image/jpeg', 'image/png', 'image/jpg', 'image/webp', 'image/gif']\"\n\t\t\t\t\t\t\t\t\t\t@before=\"onImageBefore\" @success=\"onImageSuccess\" @fail=\"onImageFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-picture-outline\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送文件\">\n\t\t\t\t\t\t\t\t\t<file-upload ref=\"fileUpload\" :action=\"'/file/upload'\" :maxSize=\"10 * 1024 * 1024\"\n\t\t\t\t\t\t\t\t\t\t@before=\"onFileBefore\" @success=\"onFileSuccess\" @fail=\"onFileFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-wallet\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"回执消息\" v-show=\"chat.type == 'GROUP'\" class=\"icon iconfont icon-receipt\"\n\t\t\t\t\t\t\t\t\t:class=\"isReceipt ? 'chat-tool-active' : ''\" @click=\"onSwitchReceipt\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送语音\" class=\"el-icon-microphone\" @click=\"showRecordBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"语音通话\" v-show=\"chat.type == 'PRIVATE'\" class=\"el-icon-phone-outline\"\n\t\t\t\t\t\t\t\t\t@click=\"showPrivateVideo('voice')\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"语音通话\" v-show=\"chat.type == 'GROUP'\" class=\"el-icon-phone-outline\"\n\t\t\t\t\t\t\t\t\t@click=\"onGroupVideo()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"视频通话\" v-show=\"chat.type == 'PRIVATE'\" class=\"el-icon-video-camera\"\n\t\t\t\t\t\t\t\t\t@click=\"showPrivateVideo('video')\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"聊天记录\" class=\"el-icon-chat-dot-round\" @click=\"showHistoryBox()\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"send-content-area\">\n\t\t\t\t\t\t\t\t<ChatInput :ownerId=\"group.ownerId\" ref=\"chatInputEditor\" :group-members=\"groupMembers\"\n\t\t\t\t\t\t\t\t\t@submit=\"sendMessage\" />\n\t\t\t\t\t\t\t\t<div class=\"send-btn-area\">\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"notifySend()\">发送</el-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-footer>\n\t\t\t\t\t</el-container>\n\t\t\t\t\t<el-aside class=\"chat-group-side-box\" width=\"300px\" v-if=\"showSide\">\n\t\t\t\t\t\t<chat-group-side :group=\"group\" :groupMembers=\"groupMembers\" @reload=\"loadGroup(group.id)\">\n\t\t\t\t\t\t</chat-group-side>\n\t\t\t\t\t</el-aside>\n\t\t\t\t</el-container>\n\t\t\t</el-main>\n\t\t\t<emotion ref=\"emoBox\" @emotion=\"onEmotion\"></Emotion>\n\t\t\t<chat-record :visible=\"showRecord\" @close=\"closeRecordBox\" @send=\"onSendRecord\"></chat-record>\n\t\t\t<group-member-selector ref=\"rtcSel\" :groupId=\"group.id\" @complete=\"onInviteOk\"></group-member-selector>\n\t\t\t<rtc-group-join ref=\"rtcJoin\" :groupId=\"group.id\"></rtc-group-join>\n\t\t\t<chat-history :visible=\"showHistory\" :chat=\"chat\" :friend=\"friend\" :group=\"group\"\n\t\t\t\t:groupMembers=\"groupMembers\" @close=\"closeHistoryBox\"></chat-history>\n\t\t</el-container>\n\t</div>\n</template>\n\n<script>\n\timport ChatGroupSide from \"./ChatGroupSide.vue\";\n\timport ChatMessageItem from \"./ChatMessageItem.vue\";\n\timport FileUpload from \"../common/FileUpload.vue\";\n\timport Emotion from \"../common/Emotion.vue\";\n\timport ChatRecord from \"./ChatRecord.vue\";\n\timport ChatHistory from \"./ChatHistory.vue\";\n\timport ChatAtBox from \"./ChatAtBox.vue\"\n\timport GroupMemberSelector from \"../group/GroupMemberSelector.vue\"\n\timport RtcGroupJoin from \"../rtc/RtcGroupJoin.vue\"\n\timport ChatInput from \"./ChatInput\";\n\n\n\texport default {\n\t\tname: \"chatPrivate\",\n\t\tcomponents: {\n\t\t\tChatInput,\n\t\t\tChatMessageItem,\n\t\t\tFileUpload,\n\t\t\tChatGroupSide,\n\t\t\tEmotion,\n\t\t\tChatRecord,\n\t\t\tChatHistory,\n\t\t\tChatAtBox,\n\t\t\tGroupMemberSelector,\n\t\t\tRtcGroupJoin\n\t\t},\n\t\tprops: {\n\t\t\tchat: {\n\t\t\t\ttype: Object\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tfriend: {},\n\t\t\t\tgroup: {},\n\t\t\t\tgroupMembers: [],\n\t\t\t\tsendImageUrl: \"\",\n\t\t\t\tsendImageFile: \"\",\n\t\t\t\tplaceholder: \"\",\n\t\t\t\tisReceipt: true,\n\t\t\t\tshowRecord: false, // 是否显示语音录制弹窗\n\t\t\t\tshowSide: false, // 是否显示群聊信息栏\n\t\t\t\tshowHistory: false, // 是否显示历史聊天记录\n\t\t\t\tlockMessage: false, // 是否锁定发送，\n\t\t\t\tshowMinIdx: 0, // 下标低于showMinIdx的消息不显示，否则页面会很卡置\n\t\t\t\treqQueue: [],\n\t\t\t\tisSending : false\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tmoveChatToTop() {\n\t\t\t\tlet chatIdx = this.$store.getters.findChatIdx(this.chat);\n\t\t\t\tthis.$store.commit(\"moveTop\", chatIdx);\n\t\t\t},\n\t\t\tcloseRefBox() {\n\t\t\t\tthis.$refs.emoBox.close();\n\t\t\t\t// this.$refs.atBox.close();\n\t\t\t},\n\t\t\tonCall(type) {\n\t\t\t\tif (type == this.$enums.MESSAGE_TYPE.ACT_RT_VOICE) {\n\t\t\t\t\tthis.showPrivateVideo('voice');\n\t\t\t\t} else if (type == this.$enums.MESSAGE_TYPE.ACT_RT_VIDEO) {\n\t\t\t\t\tthis.showPrivateVideo('video');\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSwitchReceipt() {\n\t\t\t\tthis.isReceipt = !this.isReceipt;\n\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t},\n\t\t\tonImageSuccess(data, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\t\tmsgInfo.receipt = this.isReceipt;\n\t\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\t\tmsgInfo.id = m.id;\n\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t})\n\t\t\t},\n\t\t\tonImageFail(e, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t},\n\t\t\tonImageBefore(file) {\n\t\t\t\tlet url = URL.createObjectURL(file);\n\t\t\t\tlet data = {\n\t\t\t\t\toriginUrl: url,\n\t\t\t\t\tthumbUrl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\ttmpId: this.generateId(),\n\t\t\t\t\tfileId: file.uid,\n\t\t\t\t\tsendId: this.mine.id,\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\t\tselfSend: true,\n\t\t\t\t\ttype: 1,\n\t\t\t\t\treadedCount: 0,\n\t\t\t\t\tloadStatus: \"loading\",\n\t\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 插入消息\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t// 会话置顶\n\t\t\t\tthis.moveChatToTop();\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t// 借助file对象保存\n\t\t\t\tfile.msgInfo = msgInfo;\n\t\t\t},\n\t\t\tonFileSuccess(url, file) {\n\t\t\t\tlet data = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\turl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\t\tmsgInfo.receipt = this.isReceipt\n\t\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\t\tmsgInfo.id = m.id;\n\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t})\n\t\t\t},\n\t\t\tonFileFail(e, file) {\n\t\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t},\n\t\t\tonFileBefore(file) {\n\t\t\t\tlet url = URL.createObjectURL(file);\n\t\t\t\tlet data = {\n\t\t\t\t\tname: file.name,\n\t\t\t\t\tsize: file.size,\n\t\t\t\t\turl: url\n\t\t\t\t}\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\ttmpId: this.generateId(),\n\t\t\t\t\tsendId: this.mine.id,\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\t\tselfSend: true,\n\t\t\t\t\ttype: 2,\n\t\t\t\t\tloadStatus: \"loading\",\n\t\t\t\t\treadedCount: 0,\n\t\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 插入消息\n\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t// 会话置顶\n\t\t\t\tthis.moveChatToTop();\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t// 借助file对象透传\n\t\t\t\tfile.msgInfo = msgInfo;\n\t\t\t},\n\t\t\tonCloseSide() {\n\t\t\t\tthis.showSide = false;\n\t\t\t},\n\t\t\tonScrollToTop() {\n\t\t\t\t// 多展示10条信息\n\t\t\t\tthis.showMinIdx = this.showMinIdx > 10 ? this.showMinIdx - 10 : 0;\n\t\t\t},\n\t\t\tonScroll(e) {\n\t\t\t\tlet scrollElement = e.target\n\t\t\t\tlet scrollTop = scrollElement.scrollTop\n\t\t\t\tif (scrollTop < 30) { // 在顶部,不滚动的情况\n\t\t\t\t\t// 多展示20条信息\n\t\t\t\t\tthis.showMinIdx = this.showMinIdx > 20 ? this.showMinIdx - 20 : 0;\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowEmotionBox() {\n\t\t\t\tlet width = this.$refs.emotion.offsetWidth;\n\t\t\t\tlet left = this.$elm.fixLeft(this.$refs.emotion);\n\t\t\t\tlet top = this.$elm.fixTop(this.$refs.emotion);\n\t\t\t\tthis.$refs.emoBox.open({\n\t\t\t\t\tx: left + width / 2,\n\t\t\t\t\ty: top\n\t\t\t\t})\n\t\t\t},\n\t\t\tonEmotion(emoText) {\n\t\t\t\tthis.$refs.chatInputEditor.insertEmoji(emoText);\n\t\t\t},\n\t\t\tshowRecordBox() {\n\t\t\t\tthis.showRecord = true;\n\t\t\t},\n\t\t\tcloseRecordBox() {\n\t\t\t\tthis.showRecord = false;\n\t\t\t},\n\t\t\tshowPrivateVideo(mode) {\n\t\t\t\tlet rtcInfo = {\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tisHost: true,\n\t\t\t\t\tfriend: this.friend,\n\t\t\t\t}\n\t\t\t\t// 通过home.vue打开单人视频窗口\n\t\t\t\tthis.$eventBus.$emit(\"openPrivateVideo\", rtcInfo);\n\t\t\t},\n\t\t\tonGroupVideo() {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: \"/webrtc/group/info?groupId=\" + this.group.id,\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t}).then((rtcInfo) => {\n\t\t\t\t\tif (rtcInfo.isChating) {\n\t\t\t\t\t\t// 已在通话中，可以直接加入通话\n\t\t\t\t\t\tthis.$refs.rtcJoin.open(rtcInfo);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 邀请成员发起通话\n\t\t\t\t\t\tlet ids = [this.mine.id];\n\t\t\t\t\t\tlet maxChannel = this.$store.state.configStore.webrtc.maxChannel;\n\t\t\t\t\t\tthis.$refs.rtcSel.open(maxChannel, ids, ids);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t},\n\t\t\tonInviteOk(members) {\n\t\t\t\tif (members.length < 2) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet userInfos = [];\n\t\t\t\tmembers.forEach(m => {\n\t\t\t\t\tuserInfos.push({\n\t\t\t\t\t\tid: m.userId,\n\t\t\t\t\t\tnickName: m.showNickName,\n\t\t\t\t\t\theadImage: m.headImage,\n\t\t\t\t\t\tisCamera: false,\n\t\t\t\t\t\tisMicroPhone: true\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tlet rtcInfo = {\n\t\t\t\t\tisHost: true,\n\t\t\t\t\tgroupId: this.group.id,\n\t\t\t\t\tinviterId: this.mine.id,\n\t\t\t\t\tuserInfos: userInfos\n\t\t\t\t}\n\t\t\t\t// 通过home.vue打开多人视频窗口\n\t\t\t\tthis.$eventBus.$emit(\"openGroupVideo\", rtcInfo);\n\t\t\t},\n\t\t\tshowHistoryBox() {\n\t\t\t\tthis.showHistory = true;\n\t\t\t},\n\t\t\tcloseHistoryBox() {\n\t\t\t\tthis.showHistory = false;\n\t\t\t},\n\t\t\tonSendRecord(data) {\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\t\ttype: 3,\n\t\t\t\t\treceipt: this.isReceipt\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\t\tm.selfSend = true;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", m);\n\t\t\t\t\t// 会话置顶\n\t\t\t\t\tthis.moveChatToTop();\n\t\t\t\t\t// 保持输入框焦点\n\t\t\t\t\tthis.$refs.chatInputEditor.focus();\n\t\t\t\t\t// 滚动到底部\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t// 关闭录音窗口\n\t\t\t\t\tthis.showRecord = false;\n\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t\t})\n\t\t\t},\n\t\t\tfillTargetId(msgInfo, targetId) {\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tmsgInfo.groupId = targetId;\n\t\t\t\t} else {\n\t\t\t\t\tmsgInfo.recvId = targetId;\n\t\t\t\t}\n\t\t\t},\n\t\t\tnotifySend() {\n\t\t\t\tthis.$refs.chatInputEditor.submit();\n\t\t\t},\n\t\t\tasync sendMessage(fullList) {\n\t\t\t\tthis.resetEditor();\n\t\t\t\tthis.readedMessage();\n\t\t\t\tlet sendText = this.isReceipt ? \"【回执消息】\" : \"\";\n\t\t\t\tlet promiseList = [];\n\t\t\t\tfor (let i = 0; i < fullList.length; i++) {\n\t\t\t\t\tlet msg = fullList[i];\n\t\t\t\t\tswitch (msg.type) {\n\t\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\t\tawait this.sendTextMessage(sendText + msg.content,msg.atUserIds);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"image\":\n\t\t\t\t\t\t\tawait this.sendImageMessage(msg.content.file);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"file\":\n\t\t\t\t\t\t\tawait this.sendFileMessage(msg.content.file);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t}\n\t\t\t},\n\t\t\tsendImageMessage(file) {\n\t\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\t\tthis.onImageBefore(file);\n\t\t\t\t\tlet formData = new FormData()\n\t\t\t\t\tformData.append('file', file)\n\t\t\t\t\tthis.$http.post(\"/image/upload\", formData, {\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then((data) => {\n\t\t\t\t\t\tthis.onImageSuccess(data, file);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}).catch((res) => {\n\t\t\t\t\t\tthis.onImageFail(res, file);\n\t\t\t\t\t\treject();\n\t\t\t\t\t})\n\t\t\t\t\tthis.$nextTick(() => this.$refs.chatInputEditor.focus());\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t sendTextMessage(sendText,atUserIds) {\n\t\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\t\tif (!sendText.trim()) {\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t\tlet msgInfo = {\n\t\t\t\t\t\tcontent: sendText,\n\t\t\t\t\t\ttype: 0\n\t\t\t\t\t}\n\t\t\t\t\t// 填充对方id\n\t\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t\t// 被@人员列表\n\t\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\t\tmsgInfo.atUserIds = atUserIds;\n\t\t\t\t\t\tmsgInfo.receipt = this.isReceipt;\n\t\t\t\t\t}\n\t\t\t\t\tthis.lockMessage = true;\n\t\t\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\t\t\tm.selfSend = true;\n\t\t\t\t\t\tthis.$store.commit(\"insertMessage\", m);\n\t\t\t\t\t\t// 会话置顶\n\t\t\t\t\t\tthis.moveChatToTop();\n\t\t\t\t\t}).finally(() => {\n\t\t\t\t\t\t// 解除锁定\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tsendFileMessage(file) {\n\t\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\t\tlet check = this.$refs.fileUpload.beforeUpload(file);\n\t\t\t\t\tif (check) {\n\t\t\t\t\t\tthis.$refs.fileUpload.onFileUpload({ file });\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tdeleteMessage(msgInfo) {\n\t\t\t\tthis.$confirm('确认删除消息?', '删除消息', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$store.commit(\"deleteMessage\", msgInfo);\n\t\t\t\t});\n\t\t\t},\n\t\t\trecallMessage(msgInfo) {\n\t\t\t\tthis.$confirm('确认撤回消息?', '撤回消息', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tlet url = `/message/${this.chat.type.toLowerCase()}/recall/${msgInfo.id}`\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: url,\n\t\t\t\t\t\tmethod: 'delete'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.$message.success(\"消息已撤回\");\n\t\t\t\t\t\tmsgInfo = JSON.parse(JSON.stringify(msgInfo));\n\t\t\t\t\t\tmsgInfo.type = 10;\n\t\t\t\t\t\tmsgInfo.content = '你撤回了一条消息';\n\t\t\t\t\t\tmsgInfo.status = this.$enums.MESSAGE_STATUS.RECALL;\n\t\t\t\t\t\tthis.$store.commit(\"insertMessage\", msgInfo);\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t},\n\t\t\treadedMessage() {\n\t\t\t\tif (this.chat.unreadCount == 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.$store.commit(\"resetUnreadCount\", this.chat)\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tvar url = `/message/group/readed?groupId=${this.chat.targetId}`\n\t\t\t\t} else {\n\t\t\t\t\turl = `/message/private/readed?friendId=${this.chat.targetId}`\n\t\t\t\t}\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: url,\n\t\t\t\t\tmethod: 'put'\n\t\t\t\t}).then(() => {})\n\t\t\t},\n\t\t\tloadReaded(fId) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/message/private/maxReadedId?friendId=${fId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((id) => {\n\t\t\t\t\tthis.$store.commit(\"readedMessage\", {\n\t\t\t\t\t\tfriendId: fId,\n\t\t\t\t\t\tmaxId: id\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tloadGroup(groupId) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/find/${groupId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((group) => {\n\t\t\t\t\tthis.group = group;\n\t\t\t\t\tthis.$store.commit(\"updateChatFromGroup\", group);\n\t\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\t\t\t\t});\n\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/members/${groupId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((groupMembers) => {\n\t\t\t\t\tthis.groupMembers = groupMembers;\n\t\t\t\t});\n\t\t\t},\n\t\t\tloadFriend(friendId) {\n\t\t\t\t// 获取对方最新信息\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/user/find/${friendId}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((friend) => {\n\t\t\t\t\tthis.friend = friend;\n\t\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", friend);\n\t\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\tshowName(msgInfo) {\n\t\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\t\treturn member ? member.showNickName : \"\";\n\t\t\t\t} else {\n\t\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.nickName : this.chat.showName\n\t\t\t\t}\n\n\t\t\t},\n\t\t\theadImage(msgInfo) {\n\t\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\t\treturn member ? member.headImage : \"\";\n\t\t\t\t} else {\n\t\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.headImageThumb : this.chat.headImage\n\t\t\t\t}\n\t\t\t},\n\t\t\tresetEditor() {\n\t\t\t\t\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.chatInputEditor.clear();\n\t\t\t\t\tthis.$refs.chatInputEditor.focus();\n\t\t\t\t});\n\t\t\t},\n\t\t\tscrollToBottom() {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\t\t\t\tdiv.scrollTop = div.scrollHeight;\n\t\t\t\t});\n\t\t\t},\n\t\t\trefreshPlaceHolder() {\n\t\t\t\tif (this.isReceipt) {\n\t\t\t\t\tthis.placeholder = \"【回执消息】\"\n\t\t\t\t} else if (this.$refs.editBox && this.$refs.editBox.innerHTML) {\n\t\t\t\t\tthis.placeholder = \"\"\n\t\t\t\t} else {\n\t\t\t\t\tthis.placeholder = \"聊点什么吧~\";\n\t\t\t\t}\n\t\t\t},\n\t\t\tsendMessageRequest(msgInfo){\n\t\t\t\treturn  new Promise((resolve,reject)=>{\n\t\t\t\t\t// 请求入队列，防止请求\"后发先至\"，导致消息错序\n\t\t\t\t\tthis.reqQueue.push({msgInfo,resolve,reject});\n\t\t\t\t\tthis.processReqQueue();\n\t\t\t\t})\n\t\t\t},\n\t\t\tprocessReqQueue(){\n\t\t\t\tif (this.reqQueue.length && !this.isSending) {\n\t\t\t\t\tthis.isSending = true;\n\t\t\t\t\tconst reqData = this.reqQueue.shift();\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: reqData.msgInfo\n\t\t\t\t\t}).then((res)=>{\n\t\t\t\t\t\treqData.resolve(res)\n\t\t\t\t\t}).catch((e)=>{\n\t\t\t\t\t\treqData.reject(e)\n\t\t\t\t\t}).finally(()=>{\n\t\t\t\t\t\tthis.isSending = false;\n\t\t\t\t\t\t// 发送下一条请求\n\t\t\t\t\t\tthis.processReqQueue();\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tgenerateId() {\n\t\t\t\t// 生成临时id\n\t\t\t\treturn String(new Date().getTime()) + String(Math.floor(Math.random() * 1000));\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tmine() {\n\t\t\t\treturn this.$store.state.userStore.userInfo;\n\t\t\t},\n\t\t\ttitle() {\n\t\t\t\tlet title = this.chat.showName;\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tlet size = this.groupMembers.filter(m => !m.quit).length;\n\t\t\t\t\ttitle += `(${size})`;\n\t\t\t\t}\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tmessageAction() {\n\t\t\t\treturn `/message/${this.chat.type.toLowerCase()}/send`;\n\t\t\t},\n\t\t\tunreadCount() {\n\t\t\t\treturn this.chat.unreadCount;\n\t\t\t},\n\t\t\tmessageSize() {\n\t\t\t\tif (!this.chat || !this.chat.messages) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\treturn this.chat.messages.length;\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tchat: {\n\t\t\t\thandler(newChat, oldChat) {\n\t\t\t\t\tif (newChat.targetId > 0 && (!oldChat || newChat.type != oldChat.type ||\n\t\t\t\t\t\t\tnewChat.targetId != oldChat.targetId)) {\n\t\t\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\t\t\tthis.loadGroup(this.chat.targetId);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.loadFriend(this.chat.targetId);\n\t\t\t\t\t\t\t// 加载已读状态\n\t\t\t\t\t\t\tthis.loadReaded(this.chat.targetId)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 滚到底部\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\tthis.showSide = false;\n\t\t\t\t\t\t// 消息已读\n\t\t\t\t\t\tthis.readedMessage()\n\t\t\t\t\t\t// 初始状态只显示30条消息\n\t\t\t\t\t\tlet size = this.chat.messages.length;\n\t\t\t\t\t\tthis.showMinIdx = size > 30 ? size - 30 : 0;\n\t\t\t\t\t\t// 重置输入框\n\t\t\t\t\t\tthis.resetEditor();\n\t\t\t\t\t\t// 复位回执消息\n\t\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\t\t// 更新placeholder\n\t\t\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\timmediate: true\n\t\t\t},\n\t\t\tmessageSize: {\n\t\t\t\thandler(newSize, oldSize) {\n\t\t\t\t\tif (newSize > oldSize) {\n\t\t\t\t\t\t// 拉至底部\n\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\t\tdiv.addEventListener('scroll', this.onScroll)\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n\t.chat-box {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\tbackground: #f8f8f8;\n\t\tborder: #dddddd solid 1px;\n\n\t\t.el-header {\n\t\t\tpadding: 3px;\n\t\t\tbackground-color: white;\n\t\t\tline-height: 50px;\n\t\t\tfont-size: 20px;\n\t\t\tfont-weight: 600;\n\t\t\tborder-bottom: 1px #ddd solid;\n\n\t\t\t.btn-side {\n\t\t\t\tposition: absolute;\n\t\t\t\tright: 20px;\n\t\t\t\tline-height: 50px;\n\t\t\t\tfont-size: 25px;\n\t\t\t\tcursor: pointer;\n\t\t\t}\n\t\t}\n\n\t\t.im-chat-main {\n\t\t\tpadding: 0;\n\t\t\tbackground-color: #f8f8f8;\n\n\t\t\t.im-chat-box {\n\t\t\t\t>ul {\n\t\t\t\t\tpadding: 0 20px;\n\n\t\t\t\t\tli {\n\t\t\t\t\t\tlist-style-type: none;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.im-chat-footer {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tpadding: 0;\n\n\t\t\t.chat-tool-bar {\n\t\t\t\tdisplay: flex;\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 40px;\n\t\t\t\ttext-align: left;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\tborder-top: #ccc solid 1px;\n\t\t\t\tpadding: 2px;\n\t\t\t\tbackground-color: #e8f2ff;\n\n\t\t\t\t>div {\n\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tcolor: black;\n\t\t\t\t\tline-height: 30px;\n\t\t\t\t\twidth: 30px;\n\t\t\t\t\theight: 30px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\tmargin: 3px;\n\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\tcolor: black;\n\t\t\t\t\t}\n\n\t\t\t\t\t&.chat-tool-active {\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\tcolor: #195ee2;\n\t\t\t\t\t\tbackground-color: #ddd;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t>div:hover {\n\t\t\t\t\tcolor: #949494;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.send-content-area {\n\t\t\t\tposition: relative;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\theight: 100%;\n\t\t\t\tbackground-color: white !important;\n\n\t\t\t\t.send-text-area {\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\tpadding: 5px;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tresize: none;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\tcolor: black;\n\t\t\t\t\toutline: none;\n\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tline-height: 30px;\n\n\t\t\t\t\t&:before {\n\t\t\t\t\t\tcontent: attr(placeholder);\n\t\t\t\t\t\tcolor: gray;\n\t\t\t\t\t}\n\n\t\t\t\t\t.at {\n\t\t\t\t\t\tcolor: blue;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t}\n\n\t\t\t\t\t.receipt {\n\t\t\t\t\t\tcolor: darkblue;\n\t\t\t\t\t\tfont-size: 15px;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t}\n\n\t\t\t\t\t.emo {\n\t\t\t\t\t\twidth: 30px;\n\t\t\t\t\t\theight: 30px;\n\t\t\t\t\t\tvertical-align: bottom;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.send-image-area {\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tborder: #53a0e7 solid 1px;\n\n\t\t\t\t\t.send-image-box {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tdisplay: inline-block;\n\n\t\t\t\t\t\t.send-image {\n\t\t\t\t\t\t\tmax-height: 180px;\n\t\t\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\t\t\tborder-radius: 2%;\n\t\t\t\t\t\t\tmargin: 2px;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.send-image-close {\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\tpadding: 3px;\n\t\t\t\t\t\t\tright: 7px;\n\t\t\t\t\t\t\ttop: 7px;\n\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\tfont-size: 15px;\n\t\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\t\tbackground-color: #aaa;\n\t\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.send-btn-area {\n\t\t\t\t\tpadding: 10px;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.chat-group-side-box {\n\t\t\tborder: #dddddd solid 1px;\n\t\t\tanimation: rtl-drawer-in .3s 1ms;\n\t\t}\n\t}\n</style>"]}]}